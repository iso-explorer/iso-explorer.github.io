post_cb({"7159235": {"CommentCount": "0", "ViewCount": "1759", "CreationDate": "2011-08-23T09:57:53.940", "LastActivityDate": "2011-08-23T11:30:06.777", "Title": "external array definition", "PostTypeId": "1", "Id": "7159235", "Score": "4", "Body": "<p>I would like to define array of strings in different cpp file, but there seems to be some discrepancy between definition and declaration when I try to make pointer (array element) also const. Using the same definition as declaration seems to work fine, so I suspect initialization is not an issue. In the code below I have commented out offending const - so it will compile, but  if const is un-commented, linker (tested with g++ 4.6 &amp; VS10) will not find ext_string_array.</p>\n<h2>main.cpp:</h2>\n<pre><code>#include &lt;iostream&gt;\n\nconst char* const string_array[2] =\n{\n  \"aaa\",\n  \"bbb\"\n};\n\nextern const char* /*const*/ ext_string_array[2]; // &lt;- offending const\n\nint main()\n{\n  std::cout &lt;&lt; string_array[0];\n  std::cout &lt;&lt; ext_string_array[0];\n}\n</code></pre>\n<hr>\n<h2>definition.cpp:</h2>\n<pre><code>const char* /*const*/ ext_string_array[2] = // &lt;- offending const\n{\n  \"aaa\",\n  \"bbb\"\n};\n</code></pre>\n</hr>", "Tags": "<c++><arrays><const><definition><extern>", "OwnerUserId": "757089", "AnswerCount": "2"}, "7160293": {"ParentId": "7159235", "CommentCount": "0", "Body": "<p>C++ 2003, <em>3.5 Program and Linkage</em>, <em>3</em>:</p>\n<blockquote>\n<p id=\"so_7159235_7160293_0\">A name having namespace scope (3.3.5) has internal linkage if it is the name of\n  [...]</p>\n<p id=\"so_7159235_7160293_1\">\u2014 an object or reference that is explicitly declared const and neither explicitly declared  extern nor previously declared to have external linkage; [...]</p>\n</blockquote>\n<p>So you need an explicit <code>extern</code> in the declaration..</p>\n", "OwnerUserId": "76722", "PostTypeId": "2", "Id": "7160293", "Score": "1", "CreationDate": "2011-08-23T11:30:06.777", "LastActivityDate": "2011-08-23T11:30:06.777"}, "7159299": {"ParentId": "7159235", "CommentCount": "0", "Body": "<p>In this context const also means static, unless you also specify extern. Change your .cpp file to this</p>\n<pre><code>extern const char* const ext_string_array[2] =\n{\n  \"aaa\",\n  \"bbb\"\n};\n</code></pre>\n", "OwnerUserId": "882003", "PostTypeId": "2", "Id": "7159299", "Score": "3", "CreationDate": "2011-08-23T10:02:44.840", "LastActivityDate": "2011-08-23T10:02:44.840"}, "bq_ids": {"n4140": {"so_7159235_7160293_1": {"section_id": 7136, "quality": 0.8666666666666667, "length": 13}, "so_7159235_7160293_0": {"section_id": 7136, "quality": 0.875, "length": 7}}, "n3337": {"so_7159235_7160293_1": {"section_id": 6880, "quality": 0.8666666666666667, "length": 13}, "so_7159235_7160293_0": {"section_id": 6880, "quality": 0.875, "length": 7}}, "n4659": {"so_7159235_7160293_1": {"section_id": 8637, "quality": 0.8, "length": 12}, "so_7159235_7160293_0": {"section_id": 8637, "quality": 0.875, "length": 7}}}});