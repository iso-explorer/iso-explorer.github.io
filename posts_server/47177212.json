post_cb({"47199026": {"ParentId": "47177212", "CommentCount": "2", "Body": "<p>VC++'s problem is the fact that the parameter type isn't qualified by <code>typename</code>. <a href=\"http://eel.is/c++draft/temp#res-7\" rel=\"nofollow noreferrer\">[temp.res]/7</a>:</p>\n<blockquote>\n<p id=\"so_47177212_47199026_0\">[\u2026] within the definition of\n  a member of a class template following the <em>declarator-id</em>, the keyword\n  <code>typename</code> is not required when referring to the name of a previously\n  declared member of the class template that declares a type or a class\n  template.</p>\n</blockquote>\n<p>The <em>declarator-id</em> is the first component of the <em>declaration</em>, hence any member type in the parameter clause need not be prefixed by <code>typename</code>.</p>\n", "OwnerUserId": "3647361", "PostTypeId": "2", "Id": "47199026", "Score": "2", "CreationDate": "2017-11-09T10:08:37.357", "LastActivityDate": "2017-11-09T10:08:37.357"}, "47177212": {"CommentCount": "2", "AcceptedAnswerId": "47199026", "PostTypeId": "1", "LastEditorUserId": "2104697", "CreationDate": "2017-11-08T10:25:51.127", "LastActivityDate": "2017-11-09T10:08:37.357", "LastEditDate": "2017-11-08T13:55:51.137", "ViewCount": "90", "FavoriteCount": "1", "Title": "MSVC: unrecognizable template declaration/definition (compiles with Clang/GCC)", "Id": "47177212", "Score": "3", "Body": "<p>I try to build a library which compiles just fine on OSX (clang) and Linux (GCC/Clang). I stumbled upon a template definition which MSVC/Visual Studio 2017 does not understand. I could boil it down to:</p>\n<pre><code>#include \"stdafx.h\"\n\ntemplate&lt;class T&gt;\nclass Parent {\n    class Child {\n        friend class Parent;\n    public:\n        Child(const Child &amp;r);\n    };\n};\n\ntemplate&lt;class T&gt;\nParent&lt;T&gt;::Child::Child(const Parent&lt;T&gt;::Child &amp;r) {\n    *this = r;\n}\n\nint main(int argc, char const *argv[]) {\n    /* code */\n    return 0;\n}\n</code></pre>\n<p>This (still) results in the following error:</p>\n<pre><code>1&gt;...consoleapplication1.cpp(13): error C2988: unrecognizable template declaration/definition\n1&gt;...consoleapplication1.cpp(13): error C2059: syntax error: '('\n1&gt;...consoleapplication1.cpp(13): error C2143: syntax error: missing ';' before '{'\n1&gt;...consoleapplication1.cpp(13): error C2447: '{': missing function header (old-style formal list?)\n</code></pre>\n<p>but (still) compiles on OSX with Clang or GCC. <code>stdafx.h</code> and also <code>main</code> are not part of the actual library code but have been added to allow using this in a VS Windows command line project.</p>\n<p>What do I miss here? Does MSVC have issues with member classes or friend declarations in templates?</p>\n", "Tags": "<c++><visual-c++><language-lawyer>", "OwnerUserId": "1617563", "AnswerCount": "1"}, "bq_ids": {"n4140": {"so_47177212_47199026_0": {"section_id": 174, "quality": 0.9545454545454546, "length": 21}}, "n3337": {"so_47177212_47199026_0": {"section_id": 168, "quality": 0.9545454545454546, "length": 21}}, "n4659": {"so_47177212_47199026_0": {"section_id": 179, "quality": 1.0, "length": 22}}}});