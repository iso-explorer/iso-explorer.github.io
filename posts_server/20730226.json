post_cb({"20730226": {"CommentCount": "13", "ViewCount": "166", "CreationDate": "2013-12-22T14:04:28.520", "LastActivityDate": "2013-12-22T14:11:54.497", "Title": "how does the inline function work in C++?", "AcceptedAnswerId": "20730292", "PostTypeId": "1", "Id": "20730226", "Score": "3", "Body": "<p>now I have 2 c++ source files: test9.cpp test10.cpp, they both have a inline function with the same name.</p>\n<p>test9.cpp:</p>\n<pre><code>1 #include &lt;iostream&gt;\n2 using namespace std;\n3 void test();\n4 inline void f1()\n5 {\n6     cout &lt;&lt; \"inline f1 in test9.cpp\" &lt;&lt; endl;\n7 }   \n8 int main()\n9 {\n10     f1();\n11     test();\n12     return 0;\n13 } \n</code></pre>\n<p>test10.cpp:</p>\n<pre><code>1 #include &lt;iostream&gt;\n2 using namespace std;\n3 inline void f1()\n4 {\n5     cout &lt;&lt; \"inline f1 in test10.cpp\" &lt;&lt; endl;\n6 }   \n7 void test()\n8 {\n9     f1();\n10 } \n</code></pre>\n<p>now compile them with g++:   g++ test9.cpp test10.cpp    ./a.out   I get the following result:</p>\n<pre><code>inline f1 in test9.cpp\ninline f1 in test9.cpp\n</code></pre>\n<p>what's wrong? I thought it would be: \"inline f1 in test9.cpp inline f1 in test10.cpp\"\nwho can tell me why? how does the g++ compiler treats the inline function?</p>\n", "Tags": "<c++><inline>", "OwnerUserId": "2810733", "AnswerCount": "1"}, "20730292": {"ParentId": "20730226", "CommentCount": "0", "Body": "<p>While the compiler will allow you (nay, <em>require</em> you!) to redefine functions marked <code>inline</code>, the default of external linkage still applies, so you are breaking the One Definition Rule. This results in undefined behaviour and the outcome that you are seeing.</p>\n<blockquote>\n<p id=\"so_20730226_20730292_0\"><code>[C++11: 7.1.2/4]:</code> An inline function shall be defined in every translation unit in which it is odr-used and shall have exactly the same definition in every case (3.2). <em>[..]</em></p>\n</blockquote>\n", "OwnerUserId": "560648", "PostTypeId": "2", "Id": "20730292", "Score": "7", "CreationDate": "2013-12-22T14:11:54.497", "LastActivityDate": "2013-12-22T14:11:54.497"}, "bq_ids": {"n4140": {"so_20730226_20730292_0": {"section_id": 5404, "quality": 0.8666666666666667, "length": 13}}, "n3337": {"so_20730226_20730292_0": {"section_id": 5199, "quality": 0.8666666666666667, "length": 13}}, "n4659": {"so_20730226_20730292_0": {"section_id": 6853, "quality": 0.8666666666666667, "length": 13}}}});