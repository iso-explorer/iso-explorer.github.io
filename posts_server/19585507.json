post_cb({"19585610": {"ParentId": "19585507", "PostTypeId": "2", "CommentCount": "3", "Body": "<p>The operator <code>~</code> performs integral promotions on its operand (C++11, <code>[expr.unary.op]\u00a710</code>). Which means it will convert the <code>char</code> to <code>int</code> before doing the complement. So it will go like this:</p>\n<pre><code>'q' == 01110001\n\n~ 'q' == ~ 00000000000000000000000001110001\n\n~ 'q' == 11111111111111111111111110001110\n</code></pre>\n<p>Then comes a problem. We see the value of <code>~ 'q'</code> is negative. Left-shifting a negative value has undefined behaviour (<code>[expr.shift]\u00a72</code>). <em>(Thanks to <a href=\"https://stackoverflow.com/a/42300052/1782465\">@colombien's answer</a> for pointing out this last part)</em></p>\n", "OwnerUserId": "1782465", "LastEditorUserId": "1782465", "LastEditDate": "2017-06-06T07:06:38.660", "Id": "19585610", "Score": "7", "CreationDate": "2013-10-25T09:06:50.990", "LastActivityDate": "2017-06-06T07:06:38.660"}, "42300052": {"ParentId": "19585507", "PostTypeId": "2", "CommentCount": "0", "Body": "<p>I guess the answer is here: <a href=\"https://stackoverflow.com/questions/28141871/bitwise-operators-and-signed-types\">Bitwise operators and signed types</a></p>\n<blockquote>\n<p id=\"so_19585507_42300052_0\">The expression <code>~'q' &lt;&lt; 6</code> results in undefined behavior.</p>\n</blockquote>\n", "OwnerUserId": "7035728", "LastEditorUserId": "-1", "LastEditDate": "2017-05-23T12:00:07.183", "Id": "42300052", "Score": "2", "CreationDate": "2017-02-17T14:13:20.217", "LastActivityDate": "2017-02-17T14:43:33.877"}, "bq_ids": {"n4140": {"so_19585507_42300052_0": {"section_id": 3913, "quality": 0.8, "length": 4}}, "n3337": {"so_19585507_42300052_0": {"section_id": 3773, "quality": 0.8, "length": 4}}, "n4659": {"so_19585507_42300052_0": {"section_id": 7225, "quality": 0.8, "length": 4}}}, "19585507": {"CommentCount": "0", "ViewCount": "194", "CreationDate": "2013-10-25T09:00:12.557", "LastActivityDate": "2017-06-06T07:06:38.660", "Title": "C++ NOT bitwise operator binary char conversion", "AcceptedAnswerId": "19585610", "PostTypeId": "1", "Id": "19585507", "Score": "2", "Body": "<p>I am studying C++ from Primer 5th edition. One of the questions is:</p>\n<blockquote>\n<p id=\"so_19585507_19585507_0\">What is the value of ~'q' &lt;&lt; 6 on a machine with 32-bit ints and 8 bit chars, that uses Latin-1 character set in which 'q' has the bit pattern 01110001?</p>\n</blockquote>\n<p>What i am confused with is will the compiler convert the 'q' to 32-bit int before ~ or before &lt;\n\n<p>As far as I understand it should work like so:</p>\n<pre><code>'q' = 01110001\n\n~'q' = 10001110\n\n~'q' &lt;&lt; 6 = 00000000000000000010001110000000\n</code></pre>\n<p>Am I right? </p>\n</p>", "Tags": "<c++><bit-manipulation>", "OwnerUserId": "1700384", "AnswerCount": "2"}});