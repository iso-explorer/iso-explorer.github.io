post_cb({"bq_ids": {"n4140": {"so_17074089_17074539_0": {"length": 13, "quality": 1.0, "section_id": 5417}}, "n3337": {"so_17074089_17074539_0": {"length": 13, "quality": 1.0, "section_id": 5212}}, "n4659": {"so_17074089_17074539_0": {"length": 13, "quality": 1.0, "section_id": 6839}}}, "17074089": {"ViewCount": "471", "Body": "<p>Clang accepts this code, but GCC rejects it:</p>\n<pre><code>class Foo {\n public:\n  static constexpr double kVal = 0.25f;\n};\n\nconst double Foo::kVal;\n</code></pre>\n<p>(Using clang 3.0 and g++ 4.6.3)</p>\n<pre><code>~$ clang++ foo.cc -std=c++11 -c \n[ok]\n~$ g++ foo.cc -std=c++0x -c \nfoo.cc:6:19: error: redeclaration \u2018Foo::kVal\u2019 differs in \u2018constexpr\u2019\nfoo.cc:3:34: error: from previous declaration \u2018Foo::kVal\u2019\nfoo.cc:6:19: error: declaration of \u2018constexpr const double Foo::kVal\u2019 outside of class is not definition [-fpermissive]\n</code></pre>\n<p>Which interpretation is correct?</p>\n", "AcceptedAnswerId": "17074539", "Title": "Error: redeclaration differs in \u2018constexpr\u2019", "CreationDate": "2013-06-12T19:52:08.527", "Id": "17074089", "CommentCount": "0", "LastEditDate": "2013-06-12T19:55:22.690", "PostTypeId": "1", "LastEditorUserId": "1932150", "LastActivityDate": "2013-06-12T20:17:56.140", "Score": "6", "OwnerUserId": "19750", "Tags": "<c++><c++11><g++><constexpr><clang++>", "AnswerCount": "2"}, "17074272": {"Id": "17074272", "PostTypeId": "2", "Body": "<p>You don't need to declare twice. </p>\n<pre><code>class Foo {\n  public:\n   static constexpr double kVal = 0.25f;\n};\n</code></pre>\n<p>Is all that is needed. </p>\n", "LastActivityDate": "2013-06-12T20:01:48.130", "CommentCount": "1", "CreationDate": "2013-06-12T20:01:48.130", "ParentId": "17074089", "Score": "-1", "OwnerUserId": "1459360"}, "17074539": {"Id": "17074539", "PostTypeId": "2", "Body": "<p>clang is correct.  It looks like somebody on the gcc team misread or misimplemented:</p>\n<p>7.1.5/1:</p>\n<blockquote>\n<p id=\"so_17074089_17074539_0\">If any declaration of a function or function template has <code>constexpr</code> specifier, then all its declarations shall contain the <code>constexpr</code> specifier.</p>\n</blockquote>\n<p><code>Foo::kVal</code> is obviously not a function or function template.  I don't see anything else in the Standard requiring use of <code>constexpr</code> to be consistent from one declaration to the next.</p>\n", "LastActivityDate": "2013-06-12T20:17:56.140", "CommentCount": "2", "CreationDate": "2013-06-12T20:17:56.140", "ParentId": "17074089", "Score": "5", "OwnerUserId": "459640"}});