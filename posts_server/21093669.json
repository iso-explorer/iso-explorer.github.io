post_cb({"21093669": {"CommentCount": "2", "AcceptedAnswerId": "21093800", "CreationDate": "2014-01-13T14:28:20.277", "LastActivityDate": "2014-01-13T14:34:34.570", "PostTypeId": "1", "ViewCount": "250", "FavoriteCount": "1", "Title": "According to \u00a712.1/4 in the C++11 Standard, the code shouldn't compile", "Id": "21093669", "Score": "7", "Body": "<p><strong>\u00a712.1/4: and its first bullet point</strong></p>\n<blockquote>\n<p id=\"so_21093669_21093669_0\">A default constructor for a class X is a constructor of class X that\n  can be called without an argument. If\n      there is no user-declared constructor for class X, a constructor having no parameters is implicitly declared as defaulted (8.4). An\n  implicitly-declared default constructor is an inline public member of\n  its class. A defaulted default constructor for class X is defined as\n  deleted if:</p>\n<ul>\n<li>X is a union-like class that has a variant member with a non-trivial default constructor,</li>\n</ul>\n</blockquote>\n<p>According to this bullet point this snippet should not compile, as <code>struct A</code> is a union-like class (it contains an anonymous union) and it has a variant member, <code>B b;</code> with a non-trivial default constructor. But the <a href=\"http://rextester.com/YUZTER74836\" rel=\"noreferrer\">code compiles without a problem in vc++, clang++ and g++</a>.</p>\n<pre><code>#include &lt;iostream&gt;\n\nstruct B { B(): i(10) {} int i; };\n\nstruct A\n{\n    union{ int y = 1; double x; };\n    int i;\n    A(int j) : i{j} {};\n    B b;\n    A() = default;\n};\n\nint main() {\n    A a;\n}\n</code></pre>\n", "Tags": "<c++><c++11><constructor><language-lawyer>", "OwnerUserId": "1042389", "AnswerCount": "1"}, "21093800": {"ParentId": "21093669", "CommentCount": "3", "Body": "<p>The <em>variant</em> members are</p>\n<pre><code>union{ int y = 1; double x; };\n</code></pre>\n<p>and none of them has a non-trivial constructor.</p>\n<p>This is defined in \u00a79.5/8:</p>\n<blockquote>\n<h3>9.5 Unions [class.union]</h3>\n<p id=\"so_21093669_21093800_0\"><sup>8</sup> A <em>union-like class</em> is a union or a class that has an anonymous union as a direct member. A union-like class X has a set of <em>variant members</em>. If <code>X</code> is a union its variant members are the non-static data members; otherwise, its variant members are the non-static data members of all anonymous unions that are members of <code>X</code>.</p>\n</blockquote>\n", "OwnerUserId": "2073257", "PostTypeId": "2", "Id": "21093800", "Score": "13", "CreationDate": "2014-01-13T14:34:34.570", "LastActivityDate": "2014-01-13T14:34:34.570"}, "bq_ids": {"n4140": {"so_21093669_21093669_0": {"section_id": 369, "quality": 0.96875, "length": 31}, "so_21093669_21093800_0": {"section_id": 5920, "quality": 0.5806451612903226, "length": 18}}, "n3337": {"so_21093669_21093669_0": {"section_id": 359, "quality": 0.96875, "length": 31}, "so_21093669_21093800_0": {"section_id": 5692, "quality": 0.967741935483871, "length": 30}}, "n4659": {"so_21093669_21093800_0": {"section_id": 7413, "quality": 0.5483870967741935, "length": 17}, "so_21093669_21093669_0": {"section_id": 381, "quality": 0.71875, "length": 23}}}});