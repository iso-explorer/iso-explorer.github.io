post_cb({"33951171": {"Id": "33951171", "PostTypeId": "2", "Body": "<p>The lifetime is only extended to the end of the compiler generator constructor for <code>B</code>.  When the constructor returns, the temporary string created to hold \"def\" will be destroyed leaving you with a dangling reference.</p>\n", "LastActivityDate": "2015-11-27T06:05:58.950", "CommentCount": "2", "CreationDate": "2015-11-27T06:05:58.950", "ParentId": "33951129", "Score": "0", "OwnerUserId": "5231607"}, "33951261": {"Id": "33951261", "PostTypeId": "2", "Body": "<p>In the article that you linked to, you will find:</p>\n<blockquote>\n<p id=\"so_33951129_33951261_0\">(Note this only applies to stack-based references. It doesn\u2019t work for references that are members of objects.)</p>\n</blockquote>\n<p>That's why the references in <code>a</code> and <code>b</code> are not valid. They don't extend the life of the temporaries.</p>\n", "LastActivityDate": "2015-11-27T06:14:05.657", "CommentCount": "5", "CreationDate": "2015-11-27T06:14:05.657", "ParentId": "33951129", "Score": "3", "OwnerUserId": "434551"}, "33952333": {"Id": "33952333", "PostTypeId": "2", "Body": "<p>cppreference.com says:</p>\n<blockquote>\n<p id=\"so_33951129_33952333_0\">a temporary bound to a reference member in a constructor initializer\n  list persists only until the constructor exits, not as long as the\n  object exists.</p>\n</blockquote>\n<p><a href=\"http://en.cppreference.com/w/cpp/language/reference_initialization\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/reference_initialization</a> </p>\n", "LastActivityDate": "2015-11-27T07:33:00.770", "CommentCount": "2", "CreationDate": "2015-11-27T07:33:00.770", "ParentId": "33951129", "Score": "1", "OwnerUserId": "5137315"}, "33951129": {"ViewCount": "133", "Body": "<p>Binding a temporary to a const reference extends its lifetime; cf. <a href=\"http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/\" rel=\"nofollow\">GotW #88</a>.</p>\n<p>Why does not this work on this snippet? Live <a href=\"http://ideone.com/h1sx7V\" rel=\"nofollow\">here</a>.</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstruct A {\n    A() : s(\"abc\") {}\n    const std::string&amp; s;\n};\n\nstruct B {\n    const std::string&amp; s = \"def\";\n};\n\nint main() {\n    A a;\n    std::cout &lt;&lt; a.s &lt;&lt; std::endl;\n    B b;\n    std::cout &lt;&lt; b.s &lt;&lt; std::endl;\n}\n</code></pre>\n<p>Bonus question: How to trigger a warning with gcc?</p>\n", "AcceptedAnswerId": "33951261", "Title": "Lifetime of const reference variable not extended", "CreationDate": "2015-11-27T06:01:43.117", "Id": "33951129", "CommentCount": "2", "LastEditDate": "2015-11-27T23:30:04.877", "PostTypeId": "1", "LastEditorUserId": "3628160", "LastActivityDate": "2015-11-27T23:30:04.877", "Score": "1", "OwnerUserId": "3628160", "Tags": "<c++><reference><lifetime><string-literals>", "AnswerCount": "4"}, "bq_ids": {"n4140": {"so_33951129_33952280_1": {"length": 10, "quality": 1.0, "section_id": 382}, "so_33951129_33952280_0": {"length": 13, "quality": 0.9285714285714286, "section_id": 382}, "so_33951129_33952333_0": {"length": 9, "quality": 0.6428571428571429, "section_id": 382}}, "n3337": {"so_33951129_33952333_0": {"length": 9, "quality": 0.6428571428571429, "section_id": 373}, "so_33951129_33952280_0": {"length": 13, "quality": 0.9285714285714286, "section_id": 373}, "so_33951129_33952280_1": {"length": 10, "quality": 1.0, "section_id": 373}}, "n4659": {"so_33951129_33952280_0": {"length": 13, "quality": 0.9285714285714286, "section_id": 397}}}, "33952280": {"Id": "33952280", "PostTypeId": "2", "Body": "<p>From C++14 [class.temporary]/5:</p>\n<blockquote>\n<p id=\"so_33951129_33952280_0\">The temporary to which the reference is bound or the temporary that is the complete object of a subobject to which the reference is bound persists\n  for the lifetime of the reference <strong>except</strong>:</p>\n<ul>\n<li><p id=\"so_33951129_33952280_1\">A temporary bound to a reference member in a constructor\u2019s <em>ctor-initializer</em> persists until the constructor exits.</p></li>\n<li><p id=\"so_33951129_33952280_2\">[...]</p></li>\n</ul>\n</blockquote>\n", "LastActivityDate": "2015-11-27T07:29:24.980", "CommentCount": "0", "CreationDate": "2015-11-27T07:29:24.980", "ParentId": "33951129", "Score": "3", "OwnerUserId": "1505939"}});