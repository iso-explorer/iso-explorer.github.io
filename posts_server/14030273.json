post_cb({"14030299": {"ParentId": "14030273", "CommentCount": "2", "Body": "<blockquote>\n<p id=\"so_14030273_14030299_0\">It is unspecified whether a call to the <code>atexit</code> function that does not happen before the <code>exit</code> function is called will succeed.</p>\n</blockquote>\n<p>ISO C standard, \u00a77.22.4.2. So both behaviors are compliant; you can't reliably register a function using <code>atexit</code> while <code>exit</code> is already running its <code>atexit</code> handlers.</p>\n", "OwnerUserId": "166749", "PostTypeId": "2", "Id": "14030299", "Score": "3", "CreationDate": "2012-12-25T11:40:25.373", "LastActivityDate": "2012-12-25T11:40:25.373"}, "14030298": {"ParentId": "14030273", "CommentCount": "0", "Body": "<p>This behavior is unspecified. You can define multiple functions to be called using <code>atexit()</code> multiple times, but you must not use it once you're already exiting the program (i.e. once you've left <code>main()</code>).</p>\n", "OwnerUserId": "409744", "PostTypeId": "2", "Id": "14030298", "Score": "1", "CreationDate": "2012-12-25T11:40:17.900", "LastActivityDate": "2012-12-25T11:40:17.900"}, "bq_ids": {"n4140": {"so_14030273_14030299_0": {"section_id": 6802, "quality": 0.7692307692307693, "length": 10}}, "n3337": {"so_14030273_14030299_0": {"section_id": 6557, "quality": 0.7692307692307693, "length": 10}}, "n4659": {"so_14030273_14030299_0": {"section_id": 8293, "quality": 0.7692307692307693, "length": 10}}}, "14030273": {"CommentCount": "1", "ViewCount": "455", "PostTypeId": "1", "LastEditorUserId": "15168", "CreationDate": "2012-12-25T11:36:26.313", "LastActivityDate": "2012-12-25T12:59:24.297", "Title": "atexit() function bionic vs glibc", "AcceptedAnswerId": "14030299", "LastEditDate": "2012-12-25T12:59:24.297", "Id": "14030273", "Score": "4", "Body": "<p>I found interesting moment: the <code>atexit()</code> function works differently for <code>bionic</code> and <code>glibc</code>. Here is an example:</p>\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;cstdio&gt;\nextern \"C\" {\n    void one(){\n    printf(\"one\\n\");\n    }\n    void two() {\n    printf(\"two\\n\");\n    atexit(one);\n    }\n}\nint main() {\n    atexit(two);\n}\n</code></pre>\n<p><strong>Results for <code>bionic</code>:</strong> </p>\n<pre><code>two\n</code></pre>\n<p><strong>Results for <code>glibc</code>:</strong></p>\n<pre><code>two\none\n</code></pre>\n<p>Why do the results differ?</p>\n", "Tags": "<c++><g++><glibc><bionic>", "OwnerUserId": "1446154", "AnswerCount": "2"}});