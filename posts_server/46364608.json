post_cb({"bq_ids": {"n4140": {"so_46364608_46364980_2": {"length": 6, "quality": 0.6666666666666666, "section_id": 6395}, "so_46364608_46364980_0": {"length": 13, "quality": 0.8666666666666667, "section_id": 6393}, "so_46364608_46364980_1": {"length": 4, "quality": 0.8, "section_id": 6394}}, "n3337": {"so_46364608_46364980_0": {"length": 13, "quality": 0.8666666666666667, "section_id": 6152}, "so_46364608_46364980_2": {"length": 6, "quality": 0.6666666666666666, "section_id": 6154}, "so_46364608_46364980_1": {"length": 4, "quality": 0.8, "section_id": 6153}}, "n4659": {"so_46364608_46364980_0": {"length": 13, "quality": 0.8666666666666667, "section_id": 7905}, "so_46364608_46364980_2": {"length": 6, "quality": 0.6666666666666666, "section_id": 7907}, "so_46364608_46364980_1": {"length": 4, "quality": 0.8, "section_id": 7906}}}, "46364608": {"ViewCount": "55", "Body": "<h3>Question</h3>\n<p>Is constructing <code>std::locale</code> with an empty string to get the user-preferred native locale a part of the standard? If yes, could you point out a source which explicitly states that?</p>\n<h3>Problem description</h3>\n<p>Example from documentation of <a href=\"http://en.cppreference.com/w/cpp/locale/locale\" rel=\"nofollow noreferrer\"><code>std::locale</code></a> has this line:</p>\n<pre><code>std::wcout &lt;&lt; \"User-preferred locale setting is \" &lt;&lt; std::locale(\"\").name().c_str()\n</code></pre>\n<p>Which hints that creating a locale with an empty string will return a user-preferred native locale. After quick googling, this <a href=\"http://stdcxx.apache.org/doc/stdlibug/24-3.html\" rel=\"nofollow noreferrer\">article</a> also mentions:</p>\n<blockquote>\n<p id=\"so_46364608_46364608_0\">The empty string tells setlocale to use the locale specified by the\n  user in the environment.</p>\n</blockquote>\n<p>However, when looking at the <a href=\"http://en.cppreference.com/w/cpp/locale/locale/locale\" rel=\"nofollow noreferrer\">documentation</a> for <code>std::locale</code> constructors, there is no mentioning of a special case, when an empty string is provided. </p>\n<p>Here's the quote:</p>\n<blockquote>\n<p id=\"so_46364608_46364608_1\">3-4) Constructs a copy of the system locale with specified std_name\n  (such as \"C\", or \"POSIX\", or \"en_US.UTF-8\", or \"English_US.1251\"), if\n  such locale is supported by the operating system. The locale\n  constructed in this manner has a name.</p>\n</blockquote>\n", "AcceptedAnswerId": "46364980", "Title": "Creating an std::locale with an empty string \"\"", "CreationDate": "2017-09-22T12:16:20.643", "Id": "46364608", "CommentCount": "1", "LastEditDate": "2017-09-22T12:24:50.543", "PostTypeId": "1", "LastEditorUserId": "1597714", "LastActivityDate": "2017-09-22T12:35:59.517", "Score": "2", "OwnerUserId": "1597714", "Tags": "<c++><locale><std>", "AnswerCount": "1"}, "46364980": {"Id": "46364980", "PostTypeId": "2", "Body": "<p>The <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3797.pdf\" rel=\"nofollow noreferrer\">draft standard</a> says in <strong>[locale.cons]</strong>:</p>\n<blockquote>\n<pre><code>explicit locale(const char* std_name);\n</code></pre>\n<ol start=\"4\">\n<li><p id=\"so_46364608_46364980_0\"><em>Effects:</em>\n  Constructs a locale using standard C locale names, e.g., <code>\"POSIX\"</code>. The resulting locale implements semantics defined to be associated with that name.</p></li>\n<li><p id=\"so_46364608_46364980_1\"><em>Throws:</em>\n<code>runtime_error</code> if the argument is not valid, or is null.</p></li>\n<li><p id=\"so_46364608_46364980_2\"><em>Remarks:</em>\n  The set of valid string argument values is <code>\"C\"</code> , <code>\"\"</code> , and any implementation-defined values.</p></li>\n</ol>\n</blockquote>\n<p>This says <code>\"\"</code> is a valid constructor argument, and arguments are standard C locale names.</p>\n<p>Then in <strong>[c.locale]</strong> it explicitly refers to the standard C header <code>&lt;locale.h&gt;</code>.</p>\n<p>Quoting from the C standard (C99), <strong>7.11.1.1/3</strong>:</p>\n<blockquote>\n<p id=\"so_46364608_46364980_3\">A value of <code>\"C\"</code> for <code>locale</code> specifies the minimal environment for C translation; a value of <code>\"\"</code> for <code>locale</code> specifies the locale-specific native environment. Other implementation-defined strings may be passed as the second argument to <code>setlocale</code>.</p>\n</blockquote>\n<p>I think this means the answer to your question is \"yes\": A name of <code>\"\"</code> refers to the native locale.</p>\n", "LastActivityDate": "2017-09-22T12:35:29.907", "CommentCount": "1", "CreationDate": "2017-09-22T12:35:29.907", "ParentId": "46364608", "Score": "3", "OwnerUserId": "1848654"}});