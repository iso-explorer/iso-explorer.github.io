post_cb({"bq_ids": {"n4140": {"so_48635366_48635366_0": {"length": 8, "quality": 0.5333333333333333, "section_id": 472}}, "n3337": {"so_48635366_48635366_0": {"length": 9, "quality": 0.6, "section_id": 463}}, "n4659": {"so_48635366_48635366_0": {"length": 9, "quality": 0.6, "section_id": 495}}}, "48635366": {"ViewCount": "65", "Body": "<p>In C++ Primer, Fifth Edition, \u00a713.1.6:</p>\n<blockquote>\n<p id=\"so_48635366_48635366_0\">The synthesized copy-assignment operator is defined as deleted if a member has a deleted or inaccessible copy-assignment operator, or if the class has a const or reference member.</p>\n</blockquote>\n<p>The explanation from the chapter:</p>\n<blockquote>\n<p id=\"so_48635366_48635366_1\">Although we can assign a new value to a reference, doing so changes the value of the object to which the reference refers. If the copy-assignment operator were synthesized for such classes, the left-hand operand would continue to refer to the same object as it did before the assignment. It would not refer to the same object as the right-hand operand. Because this behavior <em>is unlikely to be desired</em>, the synthesized copy-assignment operator is defined as deleted if the class has a reference member.</p>\n</blockquote>\n<p>Copying the class changes the object to which the reference member refers. Isn't this desired? Why the explanation say \"<em>is unlikely to be desired</em>\"?</p>\n<p>Concretely,</p>\n<pre><code>class A {\npublic:\n    A(int &amp;n) : a(n) {}\nprivate:\n    int &amp;a;\n};\n\nint main() {\n    int n = 1;\n\n    A a(n);\n\n    /* Why is this allowed? */\n    A b(a);\n\n    /*\n    Why is this not allowed?\n    error C2280: 'A &amp;A::operator =(const A &amp;)': attempting to reference a deleted function\n    */\n    b = a;\n\n    return 0;\n}\n</code></pre>\n", "AcceptedAnswerId": "48635747", "Title": "Why synthesized copy-assignment operator is defined as deleted if the class has a reference member?", "CreationDate": "2018-02-06T04:09:32.317", "LastActivityDate": "2018-02-06T04:56:12.857", "CommentCount": "5", "LastEditDate": "2018-02-06T04:52:10.150", "PostTypeId": "1", "LastEditorUserId": "6181069", "Id": "48635366", "Score": "0", "OwnerUserId": "6181069", "Tags": "<c++><c++11>", "AnswerCount": "1"}, "48635747": {"Id": "48635747", "PostTypeId": "2", "Body": "<p>A reference can't be reassigned once it's created. That means it's <em>impossible</em> to make a proper assignment operator if the class contains a reference member.</p>\n<p>A copy constructor is a different matter, because the reference <em>can</em> be assigned at object creation.</p>\n", "LastActivityDate": "2018-02-06T04:56:12.857", "CommentCount": "4", "CreationDate": "2018-02-06T04:56:12.857", "ParentId": "48635366", "Score": "3", "OwnerUserId": "5987"}});