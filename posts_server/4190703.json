post_cb({"4190733": {"Id": "4190733", "PostTypeId": "2", "Body": "<p>From the C++0x draft Standard.</p>\n<blockquote>\n<p id=\"so_4190703_4190733_0\">$5.3.5/2 - \"[...]In either\n  alternative, the value of the operand\n  of delete may be a null pointer\n  value.[...'\"</p>\n</blockquote>\n<p>Of course, no one would ever do 'delete' of a pointer with NULL value, but it is safe to do. Ideally one should not have code that does deletion of a NULL pointer. But it is sometimes useful when deletion of pointers (e.g. in a container) happens in a loop. Since delete of a NULL pointer value is safe, one can really write the deletion logic without explicit checks for NULL operand to delete.</p>\n<p>As an aside, C Standard $7.20.3.2 also says that 'free' on a NULL pointer does no action.</p>\n<blockquote>\n<p id=\"so_4190703_4190733_1\">The free function causes the space\n  pointed to by ptr to be deallocated,\n  that is, made available for further\n  allocation. If ptr is a null pointer,\n  no action occurs.</p>\n</blockquote>\n", "LastEditorUserId": "418110", "LastActivityDate": "2010-11-16T02:46:28.600", "Score": "61", "CreationDate": "2010-11-16T02:38:24.323", "ParentId": "4190703", "CommentCount": "2", "OwnerUserId": "418110", "LastEditDate": "2010-11-16T02:46:28.600"}, "4190703": {"ViewCount": "114922", "Body": "<p>Is it safe to delete a NULL pointer?</p>\n<p>And is it a good coding style?</p>\n", "AcceptedAnswerId": "4190737", "Title": "Is it safe to delete a NULL pointer?", "CreationDate": "2010-11-16T02:33:27.157", "Id": "4190703", "CommentCount": "4", "FavoriteCount": "55", "PostTypeId": "1", "LastEditDate": "2014-08-16T08:09:00.400", "LastEditorUserId": "2246344", "LastActivityDate": "2017-11-08T15:01:47.993", "Score": "229", "OwnerUserId": "495865", "Tags": "<c++><pointers><memory-management><null-pointer><delete-operator>", "AnswerCount": "7"}, "4190715": {"Id": "4190715", "PostTypeId": "2", "Body": "<p>Deleting a null pointer has no effect.  It's not good coding style necessarily because it's not needed, but it's not bad either.</p>\n<p>If you are searching for good coding practices consider using smart pointers instead so then you don't need to <code>delete</code> at all.</p>\n", "LastActivityDate": "2010-11-16T02:35:06.917", "CommentCount": "4", "CreationDate": "2010-11-16T02:35:06.917", "ParentId": "4190703", "Score": "18", "OwnerUserId": "3153"}, "bq_ids": {"n4140": {"so_4190703_4190733_0": {"length": 8, "quality": 0.8, "section_id": 6106}}, "n3337": {"so_4190703_4190733_0": {"length": 8, "quality": 0.8, "section_id": 5872}}, "n4659": {"so_4190703_4190733_0": {"length": 8, "quality": 0.8, "section_id": 7603}}}, "4190717": {"Id": "4190717", "PostTypeId": "2", "Body": "<p>Yes it is safe.</p>\n<p>There's no harm in deleting a null pointer; it often reduces the number of tests at the tail of a function if the unallocated pointers are initialized to zero and then simply deleted.</p>\n<hr>\n<p>Since the previous sentence has caused confusion, an example \u2014 which isn't exception safe \u2014 of what is being described:</p>\n<pre><code>void somefunc(void)\n{\n    SomeType *pst = 0;\n    AnotherType *pat = 0;\n\n    \u2026\n    pst = new SomeType;\n    \u2026\n    if (\u2026)\n    {\n        pat = new AnotherType[10];\n        \u2026\n    }\n    if (\u2026)\n    {\n        \u2026code using pat sometimes\u2026\n    }\n\n    delete[] pat;\n    delete pst;\n}\n</code></pre>\n<p>There are all sorts of nits that can be picked with the sample code, but the concept is (I hope) clear.  The pointer variables are initialized to zero so that the <code>delete</code> operations at the end of the function do not need to test whether they're non-null in the source code; the library code performs that check anyway.</p>\n</hr>", "LastEditorUserId": "15168", "LastActivityDate": "2015-01-06T20:05:38.477", "Score": "39", "CreationDate": "2010-11-16T02:35:55.680", "ParentId": "4190703", "CommentCount": "2", "OwnerUserId": "15168", "LastEditDate": "2015-01-06T20:05:38.477"}, "4190737": {"Id": "4190737", "PostTypeId": "2", "Body": "<p><code>delete</code> performs the check anyway, so checking it on your side adds overhead and looks uglier. A <strong>very</strong> good practice is setting the pointer to NULL after <code>delete</code> (helps avoiding double deletion and other similar memory corruption problems).</p>\n<p>I'd also love if <code>delete</code> by default was setting the parameter to NULL like in </p>\n<pre><code>#define my_delete(x) {delete x; x = NULL;}\n</code></pre>\n<p>(I know about R and L values, but wouldn't it be nice?)</p>\n", "LastEditorUserId": "395626", "LastActivityDate": "2010-11-16T02:43:59.390", "Score": "203", "CreationDate": "2010-11-16T02:38:46.957", "ParentId": "4190703", "CommentCount": "30", "OwnerUserId": "395626", "LastEditDate": "2010-11-16T02:43:59.390"}, "26956320": {"Id": "26956320", "PostTypeId": "2", "Body": "<p>It is safe unless overloaded the delete operator.</p>\n", "LastEditorUserId": "4016479", "LastActivityDate": "2014-11-16T15:40:47.987", "Score": "1", "CreationDate": "2014-11-16T11:15:55.143", "ParentId": "4190703", "CommentCount": "2", "OwnerUserId": "4016479", "LastEditDate": "2014-11-16T15:40:47.987"}, "18537903": {"Id": "18537903", "PostTypeId": "2", "Body": "<p>I have experienced that it is <em>not</em> safe (VS2010) to delete[] NULL (i.e. array syntax).\nI'm not sure whether this is according to the C++ standard.</p>\n<p>It <em>is</em> safe to delete NULL (scalar syntax).</p>\n", "LastActivityDate": "2013-08-30T16:50:33.887", "CommentCount": "7", "CreationDate": "2013-08-30T16:50:33.887", "ParentId": "4190703", "Score": "0", "OwnerUserId": "2733748"}, "47182958": {"Id": "47182958", "PostTypeId": "2", "Body": "<p>To completent ruslik's answer, in C++14 you can use that construction:</p>\n<pre><code>delete std::exchange(heapObject, nullptr);\n</code></pre>\n", "LastActivityDate": "2017-11-08T15:01:47.993", "CommentCount": "0", "CreationDate": "2017-11-08T15:01:47.993", "ParentId": "4190703", "Score": "0", "OwnerUserId": "2059351"}});