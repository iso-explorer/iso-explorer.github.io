post_cb({"2036892": {"CommentCount": "4", "ViewCount": "146", "PostTypeId": "1", "LastEditorUserId": "89847", "CreationDate": "2010-01-10T11:52:48.890", "LastActivityDate": "2010-01-10T12:18:17.673", "Title": "STL containers fails to add a structure defined inside a function", "AcceptedAnswerId": "2036902", "LastEditDate": "2010-01-10T12:13:39.320", "Id": "2036892", "Score": "1", "Body": "<p>I have enanoutered a problem with a code similar to this </p>\n<pre><code>void aFuncion()\n{\n    struct entry\n    {\n        std::string field1;\n        int         field2;\n        int         field3;\n\n        entry(const entry&amp; ent)\n        { \n            // copy constructor code \n        }\n\n        entry()\n        { \n            // default constructor code \n        }\n\n        entry(std::string s, int a, int b)\n        { \n            field1 = s;\n            field2 = a;\n            field3 = b;\n        }\n\n    }; //end of structure definition \n\n    std::vector&lt;entry&gt; vec;\n    entry en(\"a string\", 1, 2);\n\n    vec.push_back(en);  // vec has garbage in index 0\n}\n</code></pre>\n<p>after pushing the entry into the vector the debuggers shows only garbage in the vector first entry.   </p>\n<p>the problem resolved once we took the structure definition  out of the function.<br>\n<strong>why did the problem occur how did getting the definition into  out of the function resolved it ?</strong> </br></p>\n<p>(we are working with VS 2008  on XP 32 bit )</p>\n", "Tags": "<c++>", "OwnerUserId": "243033", "AnswerCount": "1"}, "2036902": {"ParentId": "2036892", "CommentCount": "3", "Body": "<p>The current C++ standard does not allow the template arguments to be locally defined types. This is remedied in the upcoming version of the standard.</p>\n<p>14.3.1/2:</p>\n<blockquote>\n<p id=\"so_2036892_2036902_0\">A local type, a type with no linkage, an unnamed type or a type compounded from any of these types shall not be used as a template-argument for a template type-parameter.</p>\n</blockquote>\n", "OwnerUserId": "89847", "PostTypeId": "2", "Id": "2036902", "Score": "7", "CreationDate": "2010-01-10T11:57:28.067", "LastActivityDate": "2010-01-10T11:57:28.067"}, "bq_ids": {"n4140": {"so_2036892_2036902_0": {"section_id": 7141, "quality": 0.6666666666666666, "length": 8}}, "n3337": {"so_2036892_2036902_0": {"section_id": 6885, "quality": 0.6666666666666666, "length": 8}}, "n4659": {"so_2036892_2036902_0": {"section_id": 8642, "quality": 0.6666666666666666, "length": 8}}}});