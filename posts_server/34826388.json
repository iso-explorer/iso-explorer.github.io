post_cb({"bq_ids": {"n4140": {"so_34826388_34826388_0": {"length": 6, "quality": 0.5454545454545454, "section_id": 2304}}, "n3337": {"so_34826388_34826388_0": {"length": 6, "quality": 0.5454545454545454, "section_id": 2291}}, "n4659": {"so_34826388_34826388_0": {"length": 6, "quality": 0.5454545454545454, "section_id": 2578}}}, "34826550": {"Id": "34826550", "PostTypeId": "2", "Body": "<p>The <code>initHmac</code> function signature is: </p>\n<pre><code>void initHmac(const uint8_t* secret, int secretLength);\n</code></pre>\n<p>But you use <code>const char*</code> for secret. </p>\n<p><strong>Solution</strong></p>\n<p>Try to cast the secret variable to <code>const uint8_t*</code> (or <code>const unsigned char*</code>):</p>\n<pre><code>Sha256.initHmac((const uint8_t*)\"hash key\",8);\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<p>To solve your new compilation error, just add <code>const</code> in front of all declarations containing <code>PROGMEM</code> in the library sources. For insance:</p>\n<p>In <em>Sha/sha1.cpp (line 11)</em></p>\n<pre><code>const uint8_t sha1InitState[] PROGMEM = {\n</code></pre>\n<p>In <em>Sha/sha256.cpp (line 6)</em></p>\n<pre><code>const uint32_t sha256K[] PROGMEM = {\n</code></pre>\n<p>In <em>Sha/sha256.cpp (line 11)</em>:</p>\n<pre><code>const uint8_t sha256InitState[] PROGMEM = {\n</code></pre>\n", "LastEditorUserId": "4187445", "LastActivityDate": "2016-01-16T16:25:59.730", "Score": "3", "CreationDate": "2016-01-16T11:43:54.477", "ParentId": "34826388", "CommentCount": "3", "OwnerUserId": "4187445", "LastEditDate": "2016-01-16T16:25:59.730"}, "34826388": {"ViewCount": "6079", "Body": "<p>I installed this SHA library: <a href=\"https://github.com/Cathedrow/Cryptosuite\" rel=\"nofollow\">https://github.com/Cathedrow/Cryptosuite</a>. I want to implement HMAC256 using Arduino IDE 1.6.7 installed on Win. 10 and the controller is ATMEGA328. </p>\n<p>I copied the example given in their webpage. I am still new and want to test and try. I wrote this code in Arduino IDE. </p>\n<pre><code>#include \"sha256.h\"\n\nvoid setup() {\n    // put your setup code here, to run once:\n    uint8_t *hash;\n    //static const char hash[450]={};\n    //const char *hash; hash={};\n    Sha256.initHmac(\"hash key\",8); // key, and length of key in bytes\n    Sha256.print(\"This is a message to hash\");\n    hash = Sha256.resultHmac();\n    //Serial.print(hash,HEX);\n}\n\nvoid loop() {\n    // put your main code here, to run repeatedly:\n}\n</code></pre>\n<p>I got this error:</p>\n<blockquote>\n<p id=\"so_34826388_34826388_0\">invalid conversion from 'const char*' to 'const uint8_t* {aka const\n  unsigned char*}' [-fpermissive]</p>\n</blockquote>\n<p>I do not know why this happens. The example is primitive taken as is from the library site. Can you help?</p>\n<p><strong>EDIT:</strong>\nI tried to change the line from:</p>\n<pre><code>Sha256.initHmac((const uint8_t*)\"hash key\",8);\n</code></pre>\n<p>to:</p>\n<pre><code>Sha256.initHmac((const uint8_t*)\"hash key\",8);\n</code></pre>\n<p>But again, the compilation fails. It says:</p>\n<blockquote>\n<p id=\"so_34826388_34826388_1\">Arduino: 1.6.7 (Windows 10), Board: \"Arduino/Genuino Uno\"</p>\n<p id=\"so_34826388_34826388_2\">In file included from C:\\Program Files\n  (x86)\\Arduino\\hardware\\arduino\\avr\\cores\\arduino/arduino.h:28:0,</p>\n<pre><code>             from C:\\Users\\e\\Documents\\Arduino\\libraries\\Sha\\sha1_config.h:13,\n\n             from C:\\Users\\e\\Documents\\Arduino\\libraries\\Sha\\sha1.h:4,\n\n             from C:\\Users\\e\\Documents\\Arduino\\libraries\\Sha\\sha1.cpp:1:\n</code></pre>\n<p id=\"so_34826388_34826388_3\">C:\\Users\\e\\Documents\\Arduino\\libraries\\Sha\\sha1.cpp:8:25: error:\n  variable 'sha1InitState' must be const in order to be put into\n  read-only section by means of '<strong>attribute</strong>((progmem))'</p>\n<p id=\"so_34826388_34826388_4\">uint8_t sha1InitState[] PROGMEM = {</p>\n<pre><code>                     ^\n</code></pre>\n<p id=\"so_34826388_34826388_5\">exit status 1 Error compiling.</p>\n<p id=\"so_34826388_34826388_6\">This report would have more information with   \"Show verbose output\n  during compilation\"   enabled in File &gt; Preferences.</p>\n</blockquote>\n", "AcceptedAnswerId": "34826550", "Title": "How to resolve this: invalid conversion from 'const char*' to 'const uint8_t*", "CreationDate": "2016-01-16T11:26:26.060", "Id": "34826388", "CommentCount": "0", "LastEditDate": "2016-01-16T13:01:14.797", "PostTypeId": "1", "LastEditorUserId": "2192774", "LastActivityDate": "2016-01-16T16:25:59.730", "Score": "1", "OwnerUserId": "2192774", "Tags": "<c++><arduino><sha><hmac><arduino-ide>", "AnswerCount": "1"}});