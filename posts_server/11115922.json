post_cb({"11115968": {"ParentId": "11115922", "PostTypeId": "2", "CommentCount": "3", "Body": "<p>This is the problem:</p>\n<pre><code>if(*str2 - *str == 0)\n{ \n    strcmp(str+1,str2+1); /* no return here. */\n}\n</code></pre>\n<p>meaning the code will drop through to end, where there is no <code>return</code>, which is undefined behaviour:</p>\n<ul>\n<li>From section <em>6.9.1 Function definitions</em> of the C99 standard:</li>\n</ul>\n<blockquote>\n<p id=\"so_11115922_11115968_0\">If the } that terminates a function is reached, and the value of the function call is used by the caller, the behavior is undefined.</p>\n</blockquote>\n<ul>\n<li>From section <em>6.6.3 The return statement</em> of the C++03 standard:</li>\n</ul>\n<blockquote>\n<p id=\"so_11115922_11115968_1\">Flowing off the end of a function is equivalent to a return with no value; this results in undefined behavior in a value-returning function.</p>\n</blockquote>\n<p>As the behaviour is undefined anything can occur. In this case <code>0</code> is returned.</p>\n<p>Change to:</p>\n<pre><code>if(*str2 - *str == 0)\n{ \n    return strcmp(str+1,str2+1);\n}\n</code></pre>\n", "OwnerUserId": "1033896", "LastEditorUserId": "1033896", "LastEditDate": "2012-06-20T09:14:37.110", "Id": "11115968", "Score": "4", "CreationDate": "2012-06-20T08:51:32.923", "LastActivityDate": "2012-06-20T09:14:37.110"}, "11115967": {"ParentId": "11115922", "PostTypeId": "2", "CommentCount": "7", "Body": "<p>Did you forget to add a <code>return</code> statement?</p>\n<pre><code> 33 if(*str2 - *str == 0)\n 34   {\n 35     return strcmp(str+1,str2+1);\n 36   }\n</code></pre>\n<p>Otherwise, the code will just skip past the rest of your <code>if</code> statement and reach the end of your function, returning nothing (or <code>0</code> in your case, but that's being lucky).</p>\n<p>Your code will only work if the first characters of both strings are different from each other. Or if both strings are empty.</p>\n<p>Your compiler should warn you about this; returning <code>void</code> from <code>non void</code> function. If not, you should compile with <code>-Wall</code> :)</p>\n", "OwnerUserId": "1338292", "LastEditorUserId": "1338292", "LastEditDate": "2012-06-20T09:27:32.223", "Id": "11115967", "Score": "8", "CreationDate": "2012-06-20T08:51:31.123", "LastActivityDate": "2012-06-20T09:27:32.223"}, "bq_ids": {"n4140": {"so_11115922_11115968_0": {"section_id": 7182, "quality": 0.6666666666666666, "length": 6}, "so_11115922_11115968_1": {"section_id": 3913, "quality": 1.0, "length": 12}}, "n3337": {"so_11115922_11115968_0": {"section_id": 6926, "quality": 0.6666666666666666, "length": 6}, "so_11115922_11115968_1": {"section_id": 3773, "quality": 1.0, "length": 12}}, "n4659": {"so_11115922_11115968_0": {"section_id": 3923, "quality": 0.6666666666666666, "length": 6}, "so_11115922_11115968_1": {"section_id": 4799, "quality": 0.75, "length": 9}}}, "11115922": {"CommentCount": "7", "ViewCount": "590", "PostTypeId": "1", "LastEditorUserId": "337149", "CreationDate": "2012-06-20T08:48:56.263", "LastActivityDate": "2012-06-20T12:57:51.297", "Title": "Why is my implementation of strcmp not returning the proper value?", "AcceptedAnswerId": "11115967", "LastEditDate": "2012-06-20T09:08:48.300", "Id": "11115922", "Score": "5", "Body": "<p>Why is this printing out 0 back in main but 6 when it is inside of the strcmp function?</p>\n<pre><code>  7 int main()\n  8 {\n  9 char* str = \"test string\";\n 10 char* str2 = \"test strong\";\n 11 //printf(\"string length = %d\\n\",strlen(str));\n 12 \n 13 int num = strcmp(str,str2);\n 14 \n 15 printf(\"num = %d\\n\",num);\n 16 }\n\n\n\n\n 29 int strcmp(char* str, char* str2)\n 30 {\n 31   if(*str == '\\0' &amp;&amp; *str2 == '\\0')\n 32     return 0;\n 33   if(*str2 - *str == 0)\n 34   {\n 35     strcmp(str+1,str2+1);\n 36   }\n 37   else\n 38   {\n 39     int num = *str2 - *str;\n 40     cout &lt;&lt; \"num = \" &lt;&lt;num&lt;&lt;endl;\n 41     return num;\n 42     }\n 43 }\n</code></pre>\n<p>The output is:</p>\n<p>num = 6\nnum = 0</p>\n<p>Why is it printing 0 when obviously the value that it should be returning is 6?</p>\n", "Tags": "<c++><c>", "OwnerUserId": "1218599", "AnswerCount": "2"}});