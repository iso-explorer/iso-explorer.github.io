post_cb({"29357570": {"Id": "29357570", "PostTypeId": "2", "Body": "<p>Your code is syntactically and semantically fine at the first sight. However, <code>NAN</code> is a standard C macro defined in <code>math.h</code>. This is the reason it triggers weird errors. You are not supposed to use this name in your code.</p>\n<p>The code compiles fine by GCC if <code>NAN</code> is replaced by some other name. But once you call it <code>NAN</code> and include <code>cmath</code> (or <code>math.h</code>), it triggers errors. In my experiment the error message is different though.</p>\n<p>Change the name from <code>NAN</code> to something else.</p>\n", "LastEditorUserId": "187690", "LastActivityDate": "2015-03-30T22:46:42.217", "Score": "3", "CreationDate": "2015-03-30T22:37:06.337", "ParentId": "29357404", "CommentCount": "3", "OwnerUserId": "187690", "LastEditDate": "2015-03-30T22:46:42.217"}, "bq_ids": {"n4140": {"so_29357404_29357527_0": {"length": 13, "quality": 1.0, "section_id": 3312}}, "n3337": {"so_29357404_29357527_0": {"length": 13, "quality": 1.0, "section_id": 3182}}, "n4659": {"so_29357404_29357527_0": {"length": 13, "quality": 1.0, "section_id": 4078}}}, "29357527": {"Id": "29357527", "PostTypeId": "2", "Body": "<p>That's an initializer, not an assignment.</p>\n<p>In an initializer like:</p>\n<pre><code>static const DataU NAN  = {0x7fc00000};\n</code></pre>\n<p>the value <code>0x7fc00000</code> initializes the <em>first</em> declared member of the union -- in this case, <code>u</code>.</p>\n<p>This is specified in section 8.5.1 [dcl.init.aggr] paragraph 16 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf\" rel=\"nofollow noreferrer\">N4296</a> draft of the C++ standard:</p>\n<blockquote>\n<p id=\"so_29357404_29357527_0\">When a union is initialized with a brace-enclosed initializer, the\n  braces shall only contain an <em>initializer-clause</em> for the first\n  non-static data member of the union.</p>\n</blockquote>\n<p>I expect the same wording is in other editions of the standard (and similar wording in the C standard as well).</p>\n<p>But I think the cause of the error message is your use of the identifier <code>NAN</code>. That's a macro defined in <code>&lt;cmath&gt;</code> or <code>&lt;math.h&gt;</code>; it expands to an expression representing a floating-point NaN (Not a Number). Changing the identifier will likely fix the problem. (And I see that [AnT's answer'(<a href=\"https://stackoverflow.com/a/29357570/827263\">https://stackoverflow.com/a/29357570/827263</a>) mentioned this before I did.)</p>\n", "LastEditorUserId": "-1", "LastActivityDate": "2015-03-30T22:41:47.967", "Score": "3", "CreationDate": "2015-03-30T22:33:05.850", "ParentId": "29357404", "CommentCount": "1", "OwnerUserId": "827263", "LastEditDate": "2017-05-23T12:17:42.023"}, "29357404": {"ViewCount": "451", "Body": "<p>I am porting some code from Visual studio to mingw. After resolving some issues I cam across the following issue. I am getting the error</p>\n<pre><code> error: no matching function for call to 'DataU::DataU(const char [1])'\n static const DataU NAN  = {0x7fc00000};\n                    ^\n</code></pre>\n<p>This is the code that I am using </p>\n<pre><code>static const DataU NAN  = {0x7fc00000};\n</code></pre>\n<p>and this is the data structure</p>\n<pre><code>union DataU {\n    uint32_t u;\n    float f;\n};\n</code></pre>\n<p>I do not have much experience with unions however I got the basics from <a href=\"http://www.yolinux.com/TUTORIALS/LinuxTutorialC++Structures.html\" rel=\"nofollow\">here</a></p>\n<p>I am still confused as to why I am getting an error on this statment in GCC.</p>\n<pre><code> static const DataU NAN  = {0x7fc00000};\n</code></pre>\n<p>From what I understand the copy constructor of DataU should be called. However that union does not have a custom copy constructor.\nThis is C++03 and I dont understand why the <code>{}</code> are used here. Any suggestion on how I could resolve this issue would be appreciated.</p>\n<p><strong>Update:</strong>\nI am really not sure where I am getting this error from. However I hope this output assists the question</p>\n<pre><code>: error: no matching function for call to 'kt_flash::DataU::DataU(const char [1])'\n static const DataU NAN  = {0x7fc00000};\n                    ^\nC:\\Users\\admin\\kflash.cpp:55:20: note: candidates are:\nC:\\Users\\admin\\kflash.cpp:11:7: note: kt_flash::DataU::DataU()\n union DataU {\n       ^\nC:\\Users\\admin\\kflash.cpp:11:7: note:   candidate expects 0 arguments, 1 provided\nC:\\Users\\admin\\kflash.cpp:11:7: note: constexpr kt_flash::DataU::DataU(const kt_flash::DataU&amp;)\nC:\\Users\\admin\\kflash.cpp:11:7: note:   no known conversion for argument 1 from 'const char [1]' to 'const kt_flash::DataU&amp;'\nC:\\Users\\admin\\kflash.cpp:11:7: note: constexpr kt_flash::DataU::DataU(kt_flash::DataU&amp;&amp;)\nC:\\Users\\admin\\kflash.cpp:11:7: note:   no known conversion for argument 1 from 'const char [1]' to 'kt_flash::DataU&amp;&amp;'\nC:\\Users\\admin\\kflash.cpp:55:25: error: expected ',' or ';' before '=' token\n static const DataU NAN  = {0x7fc00000};\n                         ^\nIn file included from C:/mingw64/x86_64-w64-mingw32/include/d3dx9math.h:26:0,\n                 from C:/mingw64/x86_64-w64-mingw32/include/d3dx9.h:31,\n                 from C:/mingw64/x86_64-w64-mingw32/include/d3dx9math.h:21,\n                 from ./ktafx.h:36,\n                 from &lt;command-line&gt;:0:\nC:\\Users\\admin\\kflash.cpp:59:25: error: no match for call to '(const kt_flash::DataU) (const char [1])'\n const float FLOAT_NAN = NAN.f;\n                         ^\nProcess terminated with status 1 (0 minute(s), 7 second(s))\n3 error(s), 3 warning(s) (0 minute(s), 7 second(s))\n</code></pre>\n", "AcceptedAnswerId": "29357570", "Title": "What does assigning something like {0x7fc00000} to a union mean?", "CreationDate": "2015-03-30T22:22:48.130", "Id": "29357404", "CommentCount": "5", "LastEditDate": "2015-03-30T22:36:52.883", "PostTypeId": "1", "LastEditorUserId": "4589819", "LastActivityDate": "2015-03-30T22:46:42.217", "Score": "1", "OwnerUserId": "4589819", "Tags": "<c++><c++03>", "AnswerCount": "2"}});