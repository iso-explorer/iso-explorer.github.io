post_cb({"31996600": {"Id": "31996600", "PostTypeId": "2", "Body": "<p>It sets failbit because the standard requires it. (I feel foolish now. I thought I might have been doing something wrong.)  Section 27.7.3.6.3.9 of the November 2014 Draft says:</p>\n<blockquote>\n<p id=\"so_31995594_31996600_0\"><strong>If the function inserts no characters, it calls setstate(failbit)</strong> (which may throw ios_base::failure (27.5.5.4)).</p>\n</blockquote>\n<p>Why the committee decided to make this behavior different from other sequence insertions (like char* and string) which do not consider insertion of nothing to be a failure is still a mystery. But I now know it is not a failure indicating misuse of the object.</p>\n", "LastActivityDate": "2015-08-13T19:13:36.610", "CommentCount": "0", "CreationDate": "2015-08-13T19:13:36.610", "ParentId": "31995594", "Score": "1", "OwnerUserId": "309334"}, "bq_ids": {"n4140": {"so_31995594_31996600_0": {"length": 7, "quality": 0.7777777777777778, "section_id": 2206}}, "n3337": {"so_31995594_31996600_0": {"length": 7, "quality": 0.7777777777777778, "section_id": 2194}}, "n4659": {"so_31995594_31996600_0": {"length": 7, "quality": 0.7777777777777778, "section_id": 2479}}}, "31995594": {"ViewCount": "48", "Body": "<p>I was using the <a href=\"https://stackoverflow.com/a/116220/309334\">simple file-slurp</a> and I decided to add some error checking. I was surprised that an empty file gives an error. This doesn't happen with every empty sequence either, \"\" works fine. I also verified that rdbuf() is returning a non-null pointer.</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\nint main(int, char**){\n    istringstream in(\"\"); // Succeeds if non-empty\n    stringstream sstr;\n    if (sstr &lt;&lt; in.rdbuf()) { // Succeeds if I replace in.rdbuf() with \"\"\n        cout &lt;&lt; \"Read Successful\\n\";\n    }else{\n        cout &lt;&lt; \"Read Failed\\n\";\n    }\n}\n</code></pre>\n", "AcceptedAnswerId": "31996600", "Title": "Why does stream insertion of an empty streambuf fail?", "CreationDate": "2015-08-13T18:15:48.110", "Id": "31995594", "CommentCount": "0", "LastEditDate": "2017-05-23T12:22:48.580", "PostTypeId": "1", "LastEditorUserId": "-1", "LastActivityDate": "2015-08-13T19:13:36.610", "Score": "0", "OwnerUserId": "309334", "Tags": "<c++><iostream>", "AnswerCount": "1"}});