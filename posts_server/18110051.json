post_cb({"18110051": {"CommentCount": "4", "ViewCount": "116", "PostTypeId": "1", "LastEditorUserId": "1381108", "CreationDate": "2013-08-07T17:36:51.937", "LastActivityDate": "2013-08-07T17:47:05.947", "Title": "C++ standard sort documentation issue", "LastEditDate": "2013-08-07T17:38:48.880", "Id": "18110051", "Score": "0", "Body": "<p>My copy of the C++ standard document documents the standard sort function.</p>\n<p>25.4.1.1 sort</p>\n<pre><code>template&lt;class RandomAccessIterator&gt;\nvoid sort(RandomAccessIterator first, RandomAccessIterator last);\n...\nEffects: Sorts the elements in the range [first,last).\n</code></pre>\n<blockquote>\n<p id=\"so_18110051_18110051_0\">Requires: RandomAccessIterator shall satisfy the requirements of\n  ValueSwappable (17.6.3.2). The type of *first shall satisfy the\n  requirements of MoveConstructible (Table 20) and of MoveAssignable</p>\n</blockquote>\n<p>OK - but shouldn't it also require that the elements referred to also be comparable?</p>\n<p>I would expect the \"Requires\" clause to include something like:</p>\n<p>\"type which results from dereferencing the <code>RandomAccessIterator</code> should satisfy the requirements of <code>LessThanComparable</code>.\"</p>\n<p>Or better yet</p>\n<p>\"<code>iterator_traits&lt;RandomAccessIterator&gt;::value_type</code> should satisfy the requirements of LessThanComparable.\"</p>\n<p>since 24.4.1 says in part \"it is required that if <code>Iterator</code> is the type of an iterator, the types ... <code>iterator_traits&lt;Iterator&gt;::value_type</code> be defined\"</p>\n<p>Why isn't such language included. Surely the sort function can't sort elements which can't be compared.</p>\n", "Tags": "<c++>", "OwnerUserId": "2491382", "AnswerCount": "1"}, "18110127": {"ParentId": "18110051", "PostTypeId": "2", "CommentCount": "0", "Body": "<ul>\n<li>OK - but shouldn't it also require that the elements referred to also be comparable?</li>\n</ul>\n<p>If you scrolled up above in the standard you would have found these requirements (under \u00a7 25.4) for the sorting algorithms:</p>\n<blockquote>\n<p id=\"so_18110051_18110127_0\">All the operations in 25.4 have two versions: one that takes a\n  function object of type Compare and one that uses an operator&lt;.</p>\n</blockquote>\n<p>Which means it's already enforced in the standard for the types to be required to use <code>operator&lt;</code> <em>or</em> a custom comparator. </p>\n<p>The custom comparator has the following requirements:</p>\n<blockquote>\n<p id=\"so_18110051_18110127_1\"><code>Compare</code> is a function object type (20.8). The return value of the\n  function call operation applied to an object of type <code>Compare</code>, when\n  contextually converted to <code>bool</code> (4), yields true if the \ufb01rst argument\n  of the call is less than the second, and false otherwise. <code>Compare</code> comp\n  is used throughout for algorithms assuming an ordering relation. It is\n  assumed that comp will not apply any non-constant function through the\n  dereferenced iterator.</p>\n</blockquote>\n", "OwnerUserId": "1381108", "LastEditorUserId": "1381108", "LastEditDate": "2013-08-07T17:47:05.947", "Id": "18110127", "Score": "4", "CreationDate": "2013-08-07T17:41:43.407", "LastActivityDate": "2013-08-07T17:47:05.947"}, "bq_ids": {"n4140": {"so_18110051_18110051_0": {"section_id": 1401, "quality": 0.7142857142857143, "length": 10}, "so_18110051_18110127_0": {"section_id": 1393, "quality": 0.9333333333333333, "length": 14}, "so_18110051_18110127_1": {"section_id": 1394, "quality": 0.9333333333333333, "length": 42}}, "n3337": {"so_18110051_18110051_0": {"section_id": 1395, "quality": 0.7142857142857143, "length": 10}, "so_18110051_18110127_0": {"section_id": 1387, "quality": 0.9333333333333333, "length": 14}, "so_18110051_18110127_1": {"section_id": 1388, "quality": 0.9333333333333333, "length": 42}}, "n4659": {"so_18110051_18110051_0": {"section_id": 1518, "quality": 0.7142857142857143, "length": 10}, "so_18110051_18110127_0": {"section_id": 1511, "quality": 0.9333333333333333, "length": 14}, "so_18110051_18110127_1": {"section_id": 1512, "quality": 0.9333333333333333, "length": 42}}}});