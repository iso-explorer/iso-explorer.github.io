post_cb({"26658776": {"CommentCount": "0", "ViewCount": "136", "PostTypeId": "1", "LastEditorUserId": "1594090", "CreationDate": "2014-10-30T16:49:06.347", "LastActivityDate": "2014-10-30T16:57:23.993", "Title": "Why can't I access a default argument in its initializer in gcc?", "AcceptedAnswerId": "26658974", "LastEditDate": "2014-10-30T16:52:54.780", "Id": "26658776", "Score": "8", "Body": "\n<p>This compiles in <a href=\"http://coliru.stacked-crooked.com/a/f882f16b94e18f60\">clang</a> but not in <a href=\"http://coliru.stacked-crooked.com/a/f36ac097578d8f05\">gcc</a>:</p>\n<pre class=\"lang-c++ prettyprint-override\"><code>void f(int x = decltype(x){});\n</code></pre>\n<p>The error in gcc says that <code>x</code> was not declared in this scope but according to 3.3.2/1 the variable <code>x</code> should be in scope:</p>\n<blockquote>\n<p id=\"so_26658776_26658776_0\">The point of declaration for a name is immediately after its complete declarator (Clause 8) and before its initializer (if any), except as noted below. [Example:</p>\n<pre class=\"lang-c++ prettyprint-override\"><code>int x = 12;\n{ int x = x; }\n</code></pre>\n<p id=\"so_26658776_26658776_1\">Here the second <code>x</code> is initialized with its own (indeterminate) value. \u2014 end example ]</p>\n</blockquote>\n<p>So is clang correct? Should <code>x</code> be accessible in its own initializer?</p>\n<p>PS: <code>int x = x</code> as a parameter fails in both compilers but I don't know why.</p>\n", "Tags": "<c++><c++11><language-lawyer>", "OwnerUserId": "1594090", "AnswerCount": "1"}, "26658974": {"ParentId": "26658776", "CommentCount": "3", "Body": "<p>GCC is correct; that's not valid.</p>\n<blockquote>\n<p id=\"so_26658776_26658974_0\">C++11 8.3.6/9 [dcl.fct.default] parameters of a function shall not be used in a default argument, even if they are not evaluated.</p>\n</blockquote>\n", "OwnerUserId": "204847", "PostTypeId": "2", "Id": "26658974", "Score": "10", "CreationDate": "2014-10-30T16:57:23.993", "LastActivityDate": "2014-10-30T16:57:23.993"}, "bq_ids": {"n4140": {"so_26658776_26658974_0": {"section_id": 3260, "quality": 0.7, "length": 7}, "so_26658776_26658776_1": {"section_id": 7049, "quality": 0.7777777777777778, "length": 7}, "so_26658776_26658776_0": {"section_id": 7049, "quality": 0.8235294117647058, "length": 14}}, "n3337": {"so_26658776_26658974_0": {"section_id": 3132, "quality": 0.7, "length": 7}, "so_26658776_26658776_1": {"section_id": 6794, "quality": 0.7777777777777778, "length": 7}, "so_26658776_26658776_0": {"section_id": 6794, "quality": 0.8235294117647058, "length": 14}}, "n4659": {"so_26658776_26658776_1": {"section_id": 8546, "quality": 0.7777777777777778, "length": 7}, "so_26658776_26658776_0": {"section_id": 8546, "quality": 0.8235294117647058, "length": 14}}}});