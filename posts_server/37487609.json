post_cb({"37487974": {"ParentId": "37487609", "CommentCount": "0", "Body": "<p>This is definitely a gcc bug. gcc has <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=65608\">lots of issues</a> with friendship and templates. This example almost exactly appears in the standard, under [class.friend], emphasis mine:</p>\n<blockquote>\n<p id=\"so_37487609_37487974_0\">Declaring a class to be a friend implies that the names of private and protected members from the class\n  granting friendship <strong>can be accessed in the <em>base-specifiers</em></strong> and member declarations of the befriended class.<br>\n<em>[ Example:</em></br></p>\n<pre><code>class A {\nclass B { };\n    friend class X;\n};\n\nstruct X : A::B { // OK: A::B accessible to friend\n    A::B mx;      // OK: A::B accessible to member of friend\n    class Y {\n        A::B my;  // OK: A::B accessible to nested member of friend\n    };\n};\n</code></pre>\n<p id=\"so_37487609_37487974_1\"><em>\u2014end example ]</em></p>\n</blockquote>\n", "OwnerUserId": "2069064", "PostTypeId": "2", "Id": "37487974", "Score": "5", "CreationDate": "2016-05-27T16:06:11.723", "LastActivityDate": "2016-05-27T16:06:11.723"}, "37487609": {"CommentCount": "2", "ViewCount": "133", "PostTypeId": "1", "LastEditorUserId": "2069064", "CreationDate": "2016-05-27T15:46:31.000", "LastActivityDate": "2016-05-27T16:06:35.817", "Title": "Why does GCC not allow inheriting from a private nested class when you are a friend?", "FavoriteCount": "1", "LastEditDate": "2016-05-27T16:06:35.817", "Id": "37487609", "Score": "8", "Body": "<p>Same question is asked: Why does GCC allow inheriting from a private nested class?\nFor non template classes, its allowed to inherit from private nested classes,\nif it is a friend, but not for template classes.\nIs it a bug?</p>\n<pre><code>template&lt;class Base&gt;\nclass InheritFromBaseMember : public Base::MemberPrivate // error\n{\n    using PrivateMember = typename Base::MemberPrivate; // works fine\n};\n\nclass MyBase{\n    friend class InheritFromBaseMember&lt;MyBase&gt;;\n\n    // another try to declare it friend\n    template&lt;class T&gt;\n    friend class InheritFromBaseMember;\n\n    friend class AnotherClass;\n\n    class MemberPrivate{};\n};\n\nclass AnotherClass : public MyBase::MemberPrivate{}; // works fine\n\nint main() {\n    InheritFromBaseMember&lt;MyBase&gt;{};\n}\n</code></pre>\n<p>Errormessage from g++ 5.3.0:</p>\n<pre><code>error: 'class MyBase::MemberPrivate' is private\n     class MemberPrivate{};\n           ^\nerror: within this context\n class InheritFromBaseMember : public Base::MemberPrivate // error\n       ^\n</code></pre>\n", "Tags": "<c++><templates><inheritance><nested><friend>", "OwnerUserId": "4202208", "AnswerCount": "1"}, "bq_ids": {"n4140": {"so_37487609_37487974_0": {"section_id": 6685, "quality": 0.9473684210526315, "length": 18}}, "n3337": {"so_37487609_37487974_0": {"section_id": 6440, "quality": 0.9473684210526315, "length": 18}}, "n4659": {"so_37487609_37487974_0": {"section_id": 8160, "quality": 0.9473684210526315, "length": 18}}}});