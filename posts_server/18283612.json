post_cb({"18283771": {"ParentId": "18283612", "CommentCount": "0", "Body": "<p>First off another data point: clang compiles both the original code and the modified version. I guess, that doesn't really help you much, though. From my intuitive understanding, the code should be correct but intuition can be tricky and I suspect it will take quite a while browsing the standard to tell you that both gcc and MSVC++ are wrong and it won't help you much either.</p>\n<p>You might want to try the following work-around, though:</p>\n<pre><code>auto g() -&gt; decltype(std::declval&lt;X const&gt;().f()) const { return f(); }\n</code></pre>\n<p><code>std::declval&lt;&gt;()</code> is declared in <code>&lt;utility&gt;</code>.</p>\n", "OwnerUserId": "1120273", "PostTypeId": "2", "Id": "18283771", "Score": "2", "CreationDate": "2013-08-17T00:05:34.953", "LastActivityDate": "2013-08-17T00:05:34.953"}, "18283612": {"CommentCount": "6", "ViewCount": "112", "CreationDate": "2013-08-16T23:45:20.273", "LastActivityDate": "2013-08-17T00:05:34.953", "Title": "trailing return type in template class (contradiction between GNU and Microsoft compilers)", "PostTypeId": "1", "Id": "18283612", "Score": "2", "Body": "<p>The following code compiles on msvc v120 (preview compiler)</p>\n<pre><code>template&lt;typename T&gt;\nstruct X\n{\n    int f() const { return 0; }\n    auto g() -&gt; decltype(f()) const { return f(); }\n};\n\nint main()\n{\n    X&lt;int&gt; x;\n    return 0;\n}\n</code></pre>\n<p>gcc 4.8.1 complains with the message</p>\n<blockquote>\n<p id=\"so_18283612_18283612_0\">cannot call member function 'int X::f() const without object</p>\n</blockquote>\n<p>Changing <code>g</code> to</p>\n<pre><code>auto g() -&gt; decltype(this-&gt;f()) const { return f(); }\n</code></pre>\n<p>solves the issue with gcc but now msvc outputs</p>\n<blockquote>\n<p id=\"so_18283612_18283612_1\">C2355: 'this' : can only be referenced inside non-static member\n  functions</p>\n</blockquote>\n<p>Any idea what am I doing wrong in either case?</p>\n", "Tags": "<c++><visual-c++><gcc><c++11>", "OwnerUserId": "1003615", "AnswerCount": "1"}, "bq_ids": {"n4140": {"so_18283612_18283612_0": {"section_id": 466, "quality": 0.5714285714285714, "length": 4}, "so_18283612_18283612_1": {"section_id": 12, "quality": 0.5714285714285714, "length": 4}}, "n3337": {"so_18283612_18283612_0": {"section_id": 457, "quality": 0.5714285714285714, "length": 4}, "so_18283612_18283612_1": {"section_id": 9, "quality": 0.5714285714285714, "length": 4}}, "n4659": {"so_18283612_18283612_0": {"section_id": 6103, "quality": 0.7142857142857143, "length": 5}, "so_18283612_18283612_1": {"section_id": 13, "quality": 0.5714285714285714, "length": 4}}}});