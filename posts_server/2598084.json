post_cb({"2598084": {"CommentCount": "2", "AcceptedAnswerId": "2598093", "CreationDate": "2010-04-08T06:54:02.607", "LastActivityDate": "2010-04-08T07:42:36.630", "PostTypeId": "1", "ViewCount": "2418", "FavoriteCount": "1", "Title": "Function with missing return value, behavior at runtime", "Id": "2598084", "Score": "9", "Body": "<p>As expected, the compiler (VisualStudio 2008) will give a warning </p>\n<blockquote>\n<p id=\"so_2598084_2598084_0\">warning C4715: 'doSomethingWith' : not\n  all control paths return a value</p>\n</blockquote>\n<p>when compiling the following code:</p>\n<pre><code>int doSomethingWith(int value)\n{\n    int returnValue = 3;\n    bool condition = false;\n\n    if(condition)\n        // returnValue += value; // DOH\n\n    return returnValue;\n}\n\nint main(int argc, char* argv[])\n{\n    int foo = 10;\n    int result = doSomethingWith(foo);\n    return 0;\n}\n</code></pre>\n<p>But the program runs just fine. The return value of function doSomethingWith() is 0.</p>\n<p>Is is just undefined behavior, or is there a certain rule how the result value is created/computed at runtime. What happens with non-POD datatypes as return value?</p>\n", "Tags": "<c++>", "OwnerUserId": "220636", "AnswerCount": "3"}, "2598093": {"ParentId": "2598084", "PostTypeId": "2", "CommentCount": "5", "Body": "<p>It is Undefined behaviour as specified in the ISO C++ standard section 6.6.3:</p>\n<blockquote>\n<p id=\"so_2598084_2598093_0\">Flowing off the end of a function is\n  equivalent to a return with no value;\n  this results in undefined behavior in\n  a value-returning function.</p>\n</blockquote>\n", "OwnerUserId": "72784", "LastEditorUserId": "72784", "LastEditDate": "2010-04-08T07:02:23.623", "Id": "2598093", "Score": "14", "CreationDate": "2010-04-08T06:56:23.137", "LastActivityDate": "2010-04-08T07:02:23.623"}, "2598133": {"ParentId": "2598084", "CommentCount": "1", "Body": "<p>For x86 processors the standard calling convention puts the return value to the EAX register. Practically it means that for most compilers if we reach the end of the function without returning the result of the last math operation will be returned. You can not rely on it and it is not portable.</p>\n<p><a href=\"http://en.wikipedia.org/wiki/X86_calling_conventions#cdecl\" rel=\"noreferrer\">http://en.wikipedia.org/wiki/X86_calling_conventions#cdecl</a></p>\n", "OwnerUserId": "50194", "PostTypeId": "2", "Id": "2598133", "Score": "6", "CreationDate": "2010-04-08T07:07:32.517", "LastActivityDate": "2010-04-08T07:07:32.517"}, "bq_ids": {"n4140": {"so_2598084_2598093_0": {"section_id": 3913, "quality": 1.0, "length": 12}}, "n3337": {"so_2598084_2598093_0": {"section_id": 3773, "quality": 1.0, "length": 12}}, "n4659": {"so_2598084_2598093_0": {"section_id": 4799, "quality": 0.75, "length": 9}}}, "2598101": {"ParentId": "2598084", "CommentCount": "0", "Body": "<p>Not returning a value from a value-returning function leads to undefined behavior.</p>\n", "OwnerUserId": "227665", "PostTypeId": "2", "Id": "2598101", "Score": "2", "CreationDate": "2010-04-08T06:58:32.827", "LastActivityDate": "2010-04-08T06:58:32.827"}});