post_cb({"12285060": {"CommentCount": "2", "ViewCount": "67", "PostTypeId": "1", "LastEditorUserId": "673730", "CreationDate": "2012-09-05T15:39:50.733", "LastActivityDate": "2012-09-05T15:59:34.050", "Title": "Strange behaviour of string length function w.r.t null character?", "AcceptedAnswerId": "12285088", "LastEditDate": "2012-09-05T15:40:35.650", "Id": "12285060", "Score": "1", "Body": "<p>I have this code say:  </p>\n<pre><code> std::string str(\"ashish\");  \n str.append(\"\\0\\0\");  \n printf(\"%d\", str.length());  \n</code></pre>\n<p>It is printing 6 but if I have this code  </p>\n<pre><code> std::string str(\"ashish\");  \n str.append(\"\\0\\0\",2);  \n printf(\"%d\", str.length());  \n</code></pre>\n<p>it is printing 8 ! Why?</p>\n", "Tags": "<c++><string>", "OwnerUserId": "374402", "AnswerCount": "2"}, "12285088": {"ParentId": "12285060", "PostTypeId": "2", "CommentCount": "0", "CreationDate": "2012-09-05T15:41:35.120", "Score": "4", "LastEditorUserId": "365496", "LastEditDate": "2012-09-05T15:59:34.050", "Id": "12285088", "OwnerUserId": "365496", "Body": "<p>It's because <code>str.append(\"\\0\\0\")</code> uses the null character to determine the end of the string. So \"\\0\\0\" is length zero. The other overload, <code>str.append(\"\\0\\0\",2)</code>, just takes the length you give it, so it appends two characters.</p>\n<p>From the standard:</p>\n<blockquote>\n<pre><code>  basic_string&amp;\n   append(const charT* s, size_type n);\n</code></pre>\n<p id=\"so_12285060_12285088_0\">7 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<em>Requires:</em> <code>s</code> points to an array of at least <code>n</code> elements of <code>charT</code>.</p>\n<p id=\"so_12285060_12285088_1\">8 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<em>Throws:</em> length_error if size() + n &gt; max_size().</p>\n<p id=\"so_12285060_12285088_2\">9 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<em>Effects:</em> The function replaces the string controlled by <code>*this</code> with a string of length <code>size() + n</code> whose first <code>size()</code> elements are a copy of the original string controlled by <code>*this</code> and whose remaining elements are a copy of the initial <code>n</code> elements of <code>s</code>.</p>\n<p id=\"so_12285060_12285088_3\">10 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<em>Returns:</em> <code>*this</code>.</p>\n<pre><code>  basic_string&amp; append(const charT* s);\n</code></pre>\n<p id=\"so_12285060_12285088_4\">11 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<em>Requires:</em> <code>s</code> points to an array of at least <code>traits::length(s) + 1</code> elements of <code>charT</code>.</p>\n<p id=\"so_12285060_12285088_5\">12 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<em>Effects:</em> Calls <code>append(s, traits::length(s))</code>.</p>\n<p id=\"so_12285060_12285088_6\">13 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<em>Returns:</em> <code>*this</code>.</p>\n<p id=\"so_12285060_12285088_7\">\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<em>\u2014 [string::append] 21.4.6.2 p7-13</em></p>\n</blockquote>\n", "LastActivityDate": "2012-09-05T15:59:34.050"}, "12285132": {"ParentId": "12285060", "CommentCount": "0", "Body": "<p>From the docs:</p>\n<blockquote>\n<p id=\"so_12285060_12285132_0\"><code>string&amp; append ( const char * s, size_t n );</code></p>\n<p id=\"so_12285060_12285132_1\">Appends a copy of the\n  string formed by the first n characters in the array of characters\n  pointed by s. </p>\n<p id=\"so_12285060_12285132_2\"><code>string&amp; append ( const char * s );</code> </p>\n<p id=\"so_12285060_12285132_3\">Appends a copy of the\n  string formed by the null-terminated character sequence (C string)\n  pointed by s. The length of this character sequence is determined by\n  the first ocurrence of a null character (as determined by\n  traits.length(s)).</p>\n</blockquote>\n<p>The second version (your first one) takes into account the null-terminator (which in your case is exactly the first character). The first one doesn't.</p>\n", "OwnerUserId": "673730", "PostTypeId": "2", "Id": "12285132", "Score": "3", "CreationDate": "2012-09-05T15:43:41.063", "LastActivityDate": "2012-09-05T15:43:41.063"}, "bq_ids": {"n4140": {"so_12285060_12285088_0": {"section_id": 1573, "quality": 0.8333333333333334, "length": 5}, "so_12285060_12285088_2": {"section_id": 1642, "quality": 0.9130434782608695, "length": 21}, "so_12285060_12285088_4": {"section_id": 1575, "quality": 0.8571428571428571, "length": 6}}, "n3337": {"so_12285060_12285088_0": {"section_id": 1637, "quality": 0.8333333333333334, "length": 5}, "so_12285060_12285088_2": {"section_id": 1639, "quality": 0.9130434782608695, "length": 21}, "so_12285060_12285088_4": {"section_id": 1641, "quality": 0.8571428571428571, "length": 6}}, "n4659": {"so_12285060_12285088_0": {"section_id": 1726, "quality": 0.8333333333333334, "length": 5}, "so_12285060_12285088_2": {"section_id": 1801, "quality": 0.9130434782608695, "length": 21}, "so_12285060_12285088_4": {"section_id": 1728, "quality": 0.8571428571428571, "length": 6}}}});