post_cb({"6615294": {"ParentId": "6615193", "CommentCount": "0", "Body": "<p>No, it won't:</p>\n<pre><code>diamond.cpp:24:7: error: request for member \u2018foo\u2019 is ambiguous\ndiamond.cpp:13:8: error: candidates are: virtual void C::foo()\ndiamond.cpp:8:8: error:                 virtual void B::foo()\n</code></pre>\n<p>This is called the <em>Diamond problem</em>, see <a href=\"http://en.wikipedia.org/wiki/Diamond_problem\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Diamond_problem</a></p>\n", "OwnerUserId": "810720", "PostTypeId": "2", "Id": "6615294", "Score": "3", "CreationDate": "2011-07-07T18:22:00.747", "LastActivityDate": "2011-07-07T18:22:00.747"}, "6615215": {"ParentId": "6615193", "PostTypeId": "2", "CommentCount": "1", "Body": "<p>It won't compile for three reasons none of which has anything to do with virtual inheritance(well, maybe the last one).</p>\n<ol>\n<li><p>You forgot the semicolons after class definitions</p></li>\n<li><p>Your inheritance is private</p></li>\n<li><p><code>D::foo()</code> is ambiguous when not overriden explicitly</p></li>\n</ol>\n<p>By the way, the definition of D itself is ill-formed, not just the fact that you try to use it. I mean if your <code>main()</code> function were empty, it still wouldn't compile.</p>\n<p>And \"Will this compile?\" has the obvious answer \"Why don't you try?\"</p>\n<p>Quote from the standard: 10.3.10</p>\n<blockquote>\n<p id=\"so_6615193_6615215_0\">The following example shows a function that does not have a unique\n  final overrider:</p>\n</blockquote>\n<pre><code> struct A {\n virtual void f();\n };\n struct VB1 : virtual A { // note virtual derivation\n void f();\n };\n struct VB2 : virtual A {\n void f();\n };\n struct Error : VB1, VB2 { // ill-formed\n };\n</code></pre>\n", "OwnerUserId": "469935", "LastEditorUserId": "469935", "LastEditDate": "2011-07-07T18:27:32.023", "Id": "6615215", "Score": "4", "CreationDate": "2011-07-07T18:14:44.030", "LastActivityDate": "2011-07-07T18:27:32.023"}, "6615193": {"CommentCount": "6", "AcceptedAnswerId": "6615298", "CreationDate": "2011-07-07T18:12:47.423", "LastActivityDate": "2011-07-07T18:27:32.023", "PostTypeId": "1", "ViewCount": "916", "FavoriteCount": "2", "Title": "Virtual methods on a virtual base class", "Id": "6615193", "Score": "8", "Body": "<p>Something that has been confusing me about virtual base class inheritance... Given the following classes:</p>\n<pre><code>class A\n{\n  virtual void foo() = 0;\n}\nclass B : virtual A\n{\n  void foo() { /* do X */ }\n}\nclass C : virtual A\n{\n  void foo() { /* do Y */ }\n}\nclass D : B, C\n{\n}\n</code></pre>\n<p>Will this compile? If so, what would be the result of the following code:</p>\n<pre><code>D d;\nA* a = &amp;d;\na-&gt;foo();\n</code></pre>\n", "Tags": "<c++><methods><virtual><multiple-inheritance>", "OwnerUserId": "79595", "AnswerCount": "4"}, "6615298": {"ParentId": "6615193", "CommentCount": "2", "Body": "<p>It should not compile, the function foo will be ambiguous. Since A::foo() is pure virtual function, the ambiguity has to be resolved.</p>\n", "OwnerUserId": "798879", "PostTypeId": "2", "Id": "6615298", "Score": "7", "CreationDate": "2011-07-07T18:22:25.537", "LastActivityDate": "2011-07-07T18:22:25.537"}, "6615264": {"ParentId": "6615193", "CommentCount": "0", "Body": "<p>It won't compile. GCC:</p>\n<pre><code>error: no unique final overrider for \u2018virtual void A::foo()\u2019 in \u2018D\u2019\n</code></pre>\n<p>You could have found that out yourself pretty fast.</p>\n<p>Same with icc:</p>\n<pre><code>error #361: override of virtual function \"A::foo\" is ambiguous\n</code></pre>\n", "OwnerUserId": "635608", "PostTypeId": "2", "Id": "6615264", "Score": "4", "CreationDate": "2011-07-07T18:19:37.410", "LastActivityDate": "2011-07-07T18:19:37.410"}, "bq_ids": {"n4140": {"so_6615193_6615215_0": {"section_id": 7014, "quality": 0.9, "length": 9}}, "n3337": {"so_6615193_6615215_0": {"section_id": 6760, "quality": 0.9, "length": 9}}, "n4659": {"so_6615193_6615215_0": {"section_id": 8511, "quality": 0.9, "length": 9}}}});