post_cb({"29883978": {"ParentId": "29883977", "PostTypeId": "2", "CommentCount": "0", "Body": "<p>The code is ill-formed. When looking up <code>A</code>, \u00a77.3.4/6 steps in:</p>\n<blockquote>\n<p id=\"so_29883977_29883978_0\">If name lookup finds a declaration for a name in two different\n  namespaces, and the declarations do not declare the same entity and do\n  not declare functions, the use of the name is ill-formed.</p>\n</blockquote>\n<p>Here, the namespaces are the global namespace and <code>N</code>, and the entities are the namespace <code>N::A</code> and the class <code>::A</code>.</p>\n", "OwnerUserId": "3647361", "LastEditorUserId": "3647361", "LastEditDate": "2015-04-26T21:58:56.520", "Id": "29883978", "Score": "6", "CreationDate": "2015-04-26T21:48:22.390", "LastActivityDate": "2015-04-26T21:58:56.520"}, "29883977": {"CommentCount": "2", "ViewCount": "996", "PostTypeId": "1", "LastEditorUserId": "3647361", "CreationDate": "2015-04-26T21:48:15.223", "LastActivityDate": "2015-04-26T22:01:18.517", "Title": "Ambiguous name lookup with using-directive", "AcceptedAnswerId": "29883978", "LastEditDate": "2015-04-26T22:01:18.517", "Id": "29883977", "Score": "8", "Body": "<p>It's not allowed to put a namespace and a class with the same name into one declarative region, i.e.</p>\n<pre><code>namespace A {}\nclass A{};\n</code></pre>\n<p><a href=\"http://coliru.stacked-crooked.com/a/5b837907b4d0609c\" rel=\"noreferrer\">is ill-formed</a> (see \u00a73.3.1/4). However, one can introduce the name of either one via a using-directive:</p>\n<pre><code>namespace N { namespace A {int i;} }\n\nstruct A {static int i;};\n\nusing namespace N;\n\nint i = A::i; // The global struct, or namespace N::A?\n</code></pre>\n<p>Is this code ill-formed? VC++ <a href=\"http://rextester.com/WACF61238\" rel=\"noreferrer\"><strong>thinks so</strong></a>, as well as <a href=\"http://coliru.stacked-crooked.com/a/bf8c136996f85060\" rel=\"noreferrer\"><strong>Clang</strong></a>: </p>\n<blockquote id=\"so_29883977_29883977_0\">\n<pre><code>main.cpp:7:9: error: reference to 'A' is ambiguous\nint i = A::i;\n        ^\nmain.cpp:3:8: note: candidate found by name lookup is 'A'\nstruct A {static int i;};\n       ^\nmain.cpp:1:25: note: candidate found by name lookup is 'N::A'\nnamespace N { namespace A {int i;} }\n                        ^\n</code></pre>\n</blockquote>\n<p>However, <a href=\"http://coliru.stacked-crooked.com/a/fd6f5f9387cb818a\" rel=\"noreferrer\"><strong>GCC accepts it</strong></a>. </p>\n<p>Who is right?</p>\n", "Tags": "<c++><language-lawyer><name-lookup><qualified-name>", "OwnerUserId": "3647361", "AnswerCount": "1"}, "bq_ids": {"n4140": {"so_29883977_29883978_0": {"section_id": 5514, "quality": 1.0, "length": 17}}, "n3337": {"so_29883977_29883978_0": {"section_id": 5300, "quality": 1.0, "length": 17}}, "n4659": {"so_29883977_29883978_0": {"section_id": 6949, "quality": 1.0, "length": 17}}}});