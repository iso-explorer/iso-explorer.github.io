post_cb({"5813499": {"CommentCount": "1", "ViewCount": "308", "CreationDate": "2011-04-28T04:05:26.707", "LastActivityDate": "2011-04-28T04:17:18.613", "Title": "typedef-name as base class: illegal but widely tolerated", "AcceptedAnswerId": "5813581", "PostTypeId": "1", "Id": "5813499", "Score": "4", "Body": "<p>The first paragraph of [class.derived] says of base class specifiers,</p>\n<blockquote>\n<p id=\"so_5813499_5813499_0\">If the name found is not a class-name, the program is ill-formed.</p>\n</blockquote>\n<p>However, a <a href=\"http://ideone.com/Yamoo\" rel=\"nofollow\">simple</a> test shows that Comeau and <code>g++ -ansi -pedantic</code> both accept a typedef-name as a base. A simple <code>grep -r '[^:]: mpl'</code> over the Boost headers shows that popular library often relies on such behavior.</p>\n<p>Has any compiler ever actually rejected a <code>typedef</code> of a class in a base specifier? GCC even checks that the base class type is not <code>const</code>, which refines the nonstandard functionality.</p>\n<p>Is there a workaround? The only thing I can think of is to replace the typedef with a C++11 alias template. A templated alias-declaration declares a template-name which may then become a class-name\u2026 I think. This may require a dummy parameter to the alias-declaration.</p>\n<p>Perhaps the Standard should be adjusted to match the unanimous behavior of the compilers. Is there a DR?</p>\n", "Tags": "<c++><templates><inheritance><typedef>", "OwnerUserId": "153285", "AnswerCount": "1"}, "bq_ids": {"n4140": {"so_5813499_5813499_0": {"section_id": 6975, "quality": 1.0, "length": 4}}, "n3337": {"so_5813499_5813499_0": {"section_id": 6721, "quality": 1.0, "length": 4}}, "n4659": {"so_5813499_5813499_0": {"section_id": 8474, "quality": 1.0, "length": 4}}}, "5813581": {"ParentId": "5813499", "CommentCount": "10", "Body": "<p>I believe this is in accordance with the standard. Specifically, \u00a79.1/5: \"A <em>typedef-name</em> (7.1.3) that names a class is a <em>class-name</em>, [...]\".</p>\n", "OwnerUserId": "179910", "PostTypeId": "2", "Id": "5813581", "Score": "6", "CreationDate": "2011-04-28T04:17:18.613", "LastActivityDate": "2011-04-28T04:17:18.613"}});