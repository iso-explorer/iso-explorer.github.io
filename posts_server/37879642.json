post_cb({"37882570": {"ParentId": "37879642", "CommentCount": "0", "Body": "<p>It's as simple as <a href=\"http://eel.is/c++draft/dcl.stc#1\" rel=\"nofollow\">[dcl.stc]/1</a> (which goes as far back as C++98):</p>\n<blockquote>\n<p id=\"so_37879642_37882570_0\">A <em>storage-class-specifier</em> other than <code>thread_local</code> shall not be specified in an explicit specialization (14.7.3) or an explicit instantiation (14.7.2) directive.</p>\n</blockquote>\n", "OwnerUserId": "3647361", "PostTypeId": "2", "Id": "37882570", "Score": "2", "CreationDate": "2016-06-17T13:16:09.743", "LastActivityDate": "2016-06-17T13:16:09.743"}, "bq_ids": {"n4140": {"so_37879642_37879642_3": {"section_id": 51, "quality": 0.5714285714285714, "length": 4}, "so_37879642_37882570_0": {"section_id": 5391, "quality": 0.6666666666666666, "length": 8}, "so_37879642_37879642_0": {"section_id": 51, "quality": 0.625, "length": 5}, "so_37879642_37879642_2": {"section_id": 51, "quality": 0.625, "length": 5}}, "n3337": {"so_37879642_37879642_0": {"section_id": 46, "quality": 0.625, "length": 5}, "so_37879642_37879642_3": {"section_id": 46, "quality": 0.5714285714285714, "length": 4}, "so_37879642_37879642_2": {"section_id": 46, "quality": 0.625, "length": 5}, "so_37879642_37882570_0": {"section_id": 5185, "quality": 0.6666666666666666, "length": 8}}, "n4659": {"so_37879642_37879642_3": {"section_id": 52, "quality": 0.5714285714285714, "length": 4}, "so_37879642_37879642_0": {"section_id": 52, "quality": 0.625, "length": 5}, "so_37879642_37879642_2": {"section_id": 52, "quality": 0.625, "length": 5}, "so_37879642_37882570_0": {"section_id": 6817, "quality": 0.8333333333333334, "length": 10}}}, "37879642": {"CommentCount": "3", "ViewCount": "211", "PostTypeId": "1", "LastEditorUserId": "3647361", "CreationDate": "2016-06-17T10:46:07.883", "LastActivityDate": "2016-06-17T13:17:05.340", "Title": "constexpr static template function: g++ error is a warning on clang", "AcceptedAnswerId": "37882570", "LastEditDate": "2016-06-17T13:17:05.340", "Id": "37879642", "Score": "7", "Body": "<p>Consider the following snippet:</p>\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;int I&gt;\nconstexpr int f() { return I * f&lt;I-1&gt;(); }\n\ntemplate&lt;&gt;\nconstexpr int f&lt;0&gt;() { return 1; }\n\n\nint main () {\n  std::cout &lt;&lt; f&lt;5&gt;();\n  return 0;\n}\n</code></pre>\n<p>This code compiles nicely with both g++ and clang. Very nice.\nNow add <code>static</code> to the template function specialization:</p>\n<pre><code>template&lt;&gt;\nconstexpr static int f&lt;0&gt;() { return 1; }\n</code></pre>\n<p>then g++ 6.1 reacts with an error:</p>\n<blockquote>\n<p id=\"so_37879642_37879642_0\">11 : error: explicit template specialization cannot have a storage class</p>\n</blockquote>\n<p>and clang 3.8 too:</p>\n<blockquote>\n<p id=\"so_37879642_37879642_1\">11 : error: explicit specialization has extraneous, inconsistent storage class 'static'</p>\n</blockquote>\n<p>They look like in agreement. Very nice again.\nNow, add <code>static</code> keyword also the template function general case:</p>\n<p>g++ 6.1:</p>\n<blockquote>\n<p id=\"so_37879642_37879642_2\">11 : error: explicit template specialization cannot have a storage class</p>\n</blockquote>\n<p>clang 3.8 compiles with a warning:</p>\n<blockquote>\n<p id=\"so_37879642_37879642_3\">11 : warning: explicit specialization cannot have a storage class</p>\n</blockquote>\n<p>and clang result returns the correct answer.</p>\n<p>Is this a bug in clang? If not, in which case does it make sense not to throw an error?</p>\n", "Tags": "<c++><templates><language-lawyer><function-templates><storage-class-specifier>", "OwnerUserId": "2870029", "AnswerCount": "1"}});