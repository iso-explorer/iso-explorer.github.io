post_cb({"13885151": {"CommentCount": "1", "ViewCount": "152", "PostTypeId": "1", "LastEditorUserId": "636019", "CreationDate": "2012-12-14T19:33:07.350", "LastActivityDate": "2012-12-14T21:00:30.523", "Title": "How does function wrapper initialization work in C++11?", "AcceptedAnswerId": "13885224", "LastEditDate": "2012-12-14T21:00:30.523", "Id": "13885151", "Score": "2", "Body": "<p>If I have this class</p>\n<pre><code>class TextBox : public Widget {\npublic:\n    void addKeyPressHandler(std::function&lt;void (std::string)&gt;);\nprivate:\n    std::function&lt;void (std::string)&gt; keyPressHandler;\n};\n</code></pre>\n<p>How do I know if the keyPressHandler has been set or not?  Can I initialize it to NULL and then test against that?</p>\n", "Tags": "<c++><c++11><std-function>", "OwnerUserId": "256062", "AnswerCount": "3"}, "13885324": {"ParentId": "13885151", "CommentCount": "0", "Body": "<p>You can either test it in a boolean context (as the other answers state)</p>\n<pre><code>if (keyPressHandler)\n    ...\n</code></pre>\n<p>or you can compare it against <code>nullptr</code></p>\n<pre><code>if (keyPressHandler != nullptr)\n    ...\n</code></pre>\n<p>Of course looking up the documentation for yourself would have been quicker than asking a question and waiting for an answer.  It's pretty obvious from the documentation Sean Cline linked to, which documents that <code>operator bool()</code> \"checks if a valid target is contained\"</p>\n", "OwnerUserId": "981959", "PostTypeId": "2", "Id": "13885324", "Score": "1", "CreationDate": "2012-12-14T19:49:06.360", "LastActivityDate": "2012-12-14T19:49:06.360"}, "13885237": {"ParentId": "13885151", "CommentCount": "0", "Body": "<p>You can use the <code>operator bool</code> member function</p>\n<blockquote>\n<p id=\"so_13885151_13885237_0\">20.8.11.2.3 function capacity [func.wrap.func.cap]</p>\n<p id=\"so_13885151_13885237_1\"><code>explicit operator bool() const noexcept;</code></p>\n<p id=\"so_13885151_13885237_2\">Returns: true if *this has a target, otherwise\n  false.</p>\n</blockquote>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\nint\nmain ()\n{\n        std::function&lt;void()&gt; f;\n\n        std::cout &lt;&lt; (bool) f &lt;&lt; std::endl;\n\n        f = [](){};\n        std::cout &lt;&lt; (bool) f &lt;&lt; std::endl;\n}\n</code></pre>\n", "OwnerUserId": "390807", "PostTypeId": "2", "Id": "13885237", "Score": "4", "CreationDate": "2012-12-14T19:41:29.533", "LastActivityDate": "2012-12-14T19:41:29.533"}, "bq_ids": {"n4140": {"so_13885151_13885237_1": {"section_id": 2613, "quality": 1.0, "length": 5}, "so_13885151_13885237_2": {"section_id": 4679, "quality": 0.8, "length": 4}}, "n3337": {"so_13885151_13885237_1": {"section_id": 2576, "quality": 1.0, "length": 5}, "so_13885151_13885237_2": {"section_id": 4488, "quality": 0.8, "length": 4}}, "n4659": {"so_13885151_13885237_2": {"section_id": 823, "quality": 0.8, "length": 4}, "so_13885151_13885237_1": {"section_id": 788, "quality": 1.0, "length": 5}}}, "13885224": {"ParentId": "13885151", "PostTypeId": "2", "CommentCount": "1", "Body": "<p><a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow\"><code>std::function</code></a> allows you to test whether it holds a callable target via its <code>operator bool()</code>.</p>\n<p>For example:</p>\n<pre><code>if (keyPressHandler)\n{\n    keyPressHandler(someString);\n}\nelse\n    // TODO: Consider queuing events here if you don't want to miss keystrokes.\n}\n</code></pre>\n<p>...will call the function only if it has a valid target. Meaning it has been assigned a function pointer, or anything else callable since it was initialized.</p>\n", "OwnerUserId": "1020072", "LastEditorUserId": "1020072", "LastEditDate": "2012-12-14T19:48:04.700", "Id": "13885224", "Score": "3", "CreationDate": "2012-12-14T19:40:16.083", "LastActivityDate": "2012-12-14T19:48:04.700"}});