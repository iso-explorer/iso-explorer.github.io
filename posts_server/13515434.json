post_cb({"13515434": {"CommentCount": "0", "AcceptedAnswerId": "13519968", "CreationDate": "2012-11-22T15:04:12.543", "LastActivityDate": "2017-02-14T17:40:59.377", "PostTypeId": "1", "ViewCount": "1837", "FavoriteCount": "1", "Title": "Does the C/C++ ternary operator actually have the same precedence as assignment operators?", "Id": "13515434", "Score": "7", "Body": "<p>Almost all C/C++ operator precedence tables I have consulted list the ternary conditional operator as having higher precedence than the assignment operators. There are a few tables, however, such as the one on <a href=\"http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence\">wikipedia</a>, and the one at <a href=\"http://cpp.operator-precedence.com/\">operator-precedence.com</a>, that place them on the same precedence level. Which is it, higher or same?</p>\n", "Tags": "<c++><c><ternary-operator><operator-precedence>", "OwnerUserId": "827280", "AnswerCount": "3"}, "13515505": {"ParentId": "13515434", "PostTypeId": "2", "CommentCount": "10", "CreationDate": "2012-11-22T15:08:45.703", "Score": "12", "LastEditorUserId": "743382", "LastEditDate": "2012-11-23T08:29:45.140", "Id": "13515505", "OwnerUserId": "743382", "Body": "<p>In the C++ grammar,</p>\n<pre>\nassignment-expression:\n    conditional-expression\n    logical-or-expression assignment-operator initializer-clause\n    throw-expression\n\nconditional-expression:\n    logical-or-expression\n    logical-or-expression ? expression : assignment-expression\n\ninitializer-clause:\n    assignment-expression\n    braced-init-list\n</pre>\n<p>could be combined to</p>\n<pre>\nassignment-expression:\n    logical-or-expression\n    logical-or-expression ? expression : assignment-expression\n    logical-or-expression assignment-operator assignment-expression\n    logical-or-expression assignment-operator initializer-clause\n    throw-expression\n</pre>\n<p>If only looking at <code>=</code> and <code>?:</code>, and if ignoring the inner expression between <code>?</code> and <code>:</code>, this clearly gives <code>?:</code> and <code>=</code> the exact same precedence.</p>\n<p>This is different from the C grammar, in which neither <code>?:</code>'s left nor its right operand can have an assignment operator as its topmost operator.</p>\n<pre>\nassignment-expression:\n    conditional-expression\n    unary-expression assignment-operator assignment-expression\n\nconditional-expression:\n    logical-OR-expression\n    logical-OR-expression ? expression : conditional-expression\n</pre>\n<p>So for C, it makes sense to give them different precedence levels.</p>\n<p>That said, precedence levels are only an approximation of what the standard actually says, there will be cases for any precedence levels you choose that show the levels to be misleading or just plain wrong. Depending on your interpretation, the inner expression of <code>?:</code> may be one of them, it is for me.</p>\n", "LastActivityDate": "2012-11-23T08:29:45.140"}, "13519968": {"ParentId": "13515434", "PostTypeId": "2", "CommentCount": "0", "CreationDate": "2012-11-22T21:05:37.393", "Score": "6", "LastEditorUserId": "827280", "LastEditDate": "2013-08-28T12:35:07.287", "Id": "13519968", "OwnerUserId": "827280", "Body": "<p>The answer for C++ is that <code>?:</code> and <code>=</code> have the same precedence. Yes, almost every C++ operator precedence table out there is wrong.</p>\n<p>In C it doesn't matter whether <code>?:</code> is higher than <code>=</code> or not, because in C the <code>?:</code> operator is not allowed to evaluate to an l-value, which is what it would have to do if precedence were to influence the behavior (given that they are already RTL associative). See the discussion under Luchian Crigore's answer for example.</p>\n<p>Perhaps this error is so widespread because early C++ operator precedence tables may have been copied and extended from C tables. And perhaps the error has persisted because the only counterexample - expressions of the form <code>a?b:c=d</code> - are rarely used. Perhaps.</p>\n", "LastActivityDate": "2013-08-28T12:35:07.287"}, "13515524": {"ParentId": "13515434", "PostTypeId": "2", "CommentCount": "5", "CreationDate": "2012-11-22T15:09:43.613", "Score": "7", "LastEditorUserId": "219162", "LastEditDate": "2017-02-14T17:40:59.377", "Id": "13515524", "OwnerUserId": "673730", "Body": "<p>You'll find that, in the standard:</p>\n<h3>5 Expressions [expr]</h3>\n<blockquote>\n<p id=\"so_13515434_13515524_0\">58) The precedence of operators is not directly specified, but it can be derived from the syntax. (note)</p>\n</blockquote>\n<p>This means precedence tables are inferred, not specified. As long as they behave the same, you can say that both are right. So, even if a precedence table places them as having the same precedence, or places the ternary above the assignment operator, in practice the same thing happens, because of the syntax.</p>\n<p>Note that <strong>associativity</strong> plays a bigger role here (this is also derived from the syntax).</p>\n<p>Even if you assume that they have the same precedence:</p>\n<pre><code>a = b ? c : d;\n</code></pre>\n<p>will be treated as <code>a = (b ? c : d)</code> because they are both <strong>right-to-left associative</strong>.</p>\n", "LastActivityDate": "2017-02-14T17:40:59.377"}, "bq_ids": {"n4140": {"so_13515434_13515524_0": {"section_id": 5934, "quality": 0.8, "length": 8}}, "n3337": {"so_13515434_13515524_0": {"section_id": 5706, "quality": 0.8, "length": 8}}, "n4659": {"so_13515434_13515524_0": {"section_id": 7418, "quality": 0.8, "length": 8}}}});