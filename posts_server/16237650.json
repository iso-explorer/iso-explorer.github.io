post_cb({"bq_ids": {"n4140": {"so_16237650_16237714_0": {"length": 12, "quality": 1.0, "section_id": 3913}}, "n3337": {"so_16237650_16237714_0": {"length": 12, "quality": 1.0, "section_id": 3773}}, "n4659": {"so_16237650_16237714_0": {"length": 9, "quality": 0.75, "section_id": 4799}}}, "16237650": {"ViewCount": "331", "Body": "<p>I came across very strange problem today. Lets concider the following code:</p>\n<pre><code>int llex(){\n    cout&lt;&lt;\"enter 1\"&lt;&lt;endl;\n    char32_t c = U'(';\n    cout&lt;&lt;(c==U'#')&lt;&lt;endl;\n    switch(c){\n    case U'#':\n        cout&lt;&lt;\"enter 2\"&lt;&lt;endl;\n        return 5;\n    default:\n        break;\n    }\n}\n\nint main( int argc, char** argv)\n{\n    cout&lt;&lt;\"enter 1\"&lt;&lt;endl;\n    char32_t c = U'(';\n    cout&lt;&lt;(c==U'#')&lt;&lt;endl;\n    switch(c){\n    case U'#':\n        cout&lt;&lt;\"enter 2\"&lt;&lt;endl;\n        return 5;\n    default:\n        break;\n    }\n\n    cout &lt;&lt; \"------------\" &lt;&lt; endl;\n    llex();\n}\n</code></pre>\n<p>And the output is:</p>\n<pre><code>enter 1\n0\n------------\nenter 1\n0\nenter 2\n</code></pre>\n<p>Please note that the code in main is IDENTICAL to the code in <code>llex</code> function. Why they output different results? (I'm using C++11 on clang).</p>\n", "AcceptedAnswerId": "16237714", "Title": "Switch not working in C++", "CreationDate": "2013-04-26T13:26:28.923", "Id": "16237650", "CommentCount": "9", "FavoriteCount": "1", "PostTypeId": "1", "LastEditDate": "2013-05-10T15:38:33.977", "LastEditorUserId": "889902", "LastActivityDate": "2013-05-10T15:38:33.977", "Score": "3", "OwnerUserId": "889902", "Tags": "<c++><unicode><c++11><switch-statement><string-literals>", "AnswerCount": "2"}, "16237714": {"Id": "16237714", "PostTypeId": "2", "Body": "<p>Your <code>llex()</code> function is supposed to always return a value, but it does not. This is <strong>undefined behavior</strong> if control flow does not hit the <code>return</code> statement. Per paragraph 6.6.3/2 of the C++11 standard:</p>\n<blockquote>\n<p id=\"so_16237650_16237714_0\">Flowing off the end of a function is equivalent to a return with no value; <strong>this results in undefined\n  behavior in a value-returning function</strong>.</p>\n</blockquote>\n<p>Unless you fix this, you cannot make any assumptions on your program, nor have expectations about it. </p>\n<p>For instance, I cannot reproduce the behavior in <a href=\"http://ideone.com/3viU1k\">this fixed live example</a>.</p>\n", "LastEditorUserId": "1932150", "LastActivityDate": "2013-04-26T13:31:33.783", "Score": "11", "CreationDate": "2013-04-26T13:29:23.287", "ParentId": "16237650", "CommentCount": "3", "OwnerUserId": "1932150", "LastEditDate": "2013-04-26T13:31:33.783"}, "16237775": {"Id": "16237775", "PostTypeId": "2", "Body": "<p>You are missing an end-of-the-function return statement and a closing curly braces for your switch in the function.</p>\n<pre><code>int llex(){\n    cout&lt;&lt;\"enter 1\"&lt;&lt;endl;\n    char32_t c = U'(';\n    cout&lt;&lt;(c==U'#')&lt;&lt;endl;\n    switch(c){\n    case U'#':\n        cout&lt;&lt;\"enter 2\"&lt;&lt;endl;\n        return 5;\n    default:\n        break;\n    }\n    return 0;\n}\n</code></pre>\n", "LastActivityDate": "2013-04-26T13:32:09.640", "CommentCount": "0", "CreationDate": "2013-04-26T13:32:09.640", "ParentId": "16237650", "Score": "1", "OwnerUserId": "1022285"}});