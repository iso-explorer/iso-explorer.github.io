post_cb({"bq_ids": {"n4140": {"so_15084007_15084813_0": {"length": 8, "quality": 0.8, "section_id": 2426}}, "n3337": {"so_15084007_15084813_0": {"length": 8, "quality": 0.8, "section_id": 2411}}, "n4659": {"so_15084007_15084813_0": {"length": 8, "quality": 0.8, "section_id": 2701}}}, "15084813": {"Id": "15084813", "PostTypeId": "2", "Body": "<p>The <code>filebuf</code> constructor to which these flags are passed<sup>\u2020</sup> has behaviours based on those flags defined in Table 132 in C++11:</p>\n<pre><code>+-----------------------------------+-------------------+\n|     ios_base flag combination     |  stdio equivalent |\n| binary  in    out    trunc    app |                   |\n+-----------------------------------+-------------------+\n|               +                   |  \"w\"              |\n|               +               +   |  \"a\"              |\n|                               +   |  \"a\"              |\n|               +       +           |  \"w\"              |\n|        +                          |  \"r\"              |\n|        +      +                   |  \"r+\"             |\n|        +      +       +           |  \"w+\"             |\n|        +      +               +   |  \"a+\"             |\n|        +                      +   |  \"a+\"             |\n+-----------------------------------+-------------------+\n|   +           +                   |  \"wb\"             |\n|   +           +               +   |  \"ab\"             |\n|   +                           +   |  \"ab\"             |\n|   +           +       +           |  \"wb\"             |\n|   +    +                          |  \"rb\"             |\n|   +    +      +                   |  \"r+b\"            |\n|   +    +      +       +           |  \"w+b\"            |\n|   +    +      +               +   |  \"a+b\"            |\n|   +    +                      +   |  \"a+b\"            |\n+-----------------------------------+-------------------+\n</code></pre>\n<p>As you can see, your flag combination is <em>not</em> found in that table.</p>\n<blockquote>\n<p id=\"so_15084007_15084813_0\"><code>[C++11: 27.9.1.4/2]:</code> <em>[..]</em> If <code>mode</code> is not some combination of flags shown in the table then the open fails.</p>\n</blockquote>\n<p>Those are the semantics.</p>\n<p><sup><sup>\u2020</sup> <code>[C++11: 27.9.1.7/2]</code> &amp; <code>[C++11: 27.9.1.11/2]</code> show us that the mode is passed from the stream object to the buffer object.</sup></p>\n", "LastEditorUserId": "560648", "LastActivityDate": "2013-02-26T08:54:47.977", "Score": "17", "CreationDate": "2013-02-26T08:49:03.543", "ParentId": "15084007", "CommentCount": "4", "OwnerUserId": "560648", "LastEditDate": "2013-02-26T08:54:47.977"}, "15084007": {"ViewCount": "4470", "Body": "<p>The following code was compiled with VC++ Nov 2012 CTP on Windows 7 x64.</p>\n<pre><code>#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main()\n{\n    ofstream fout(\"log.txt\", ios::app|ios::trunc);\n    if (!fout)\n    {\n        cout &lt;&lt; \"An error occurred!\" &lt;&lt; endl; // Always go here! Why?\n    }\n}\n</code></pre>\n<p><a href=\"http://en.cppreference.com/w/cpp/io/ios_base/openmode\" rel=\"noreferrer\">The cppreference.com website</a> doesn't say that <code>ios::app</code> cannot be combined with <code>ios::trunc</code>.</p>\n<p>What are the <strong>exact</strong> semantics of <code>ios::app</code> and <code>ios::trunc</code>?</p>\n", "AcceptedAnswerId": "15084813", "Title": "Why does ofstream(\"log.txt\", ios::app|ios::trunc); always fail?", "CreationDate": "2013-02-26T07:51:59.513", "Id": "15084007", "CommentCount": "16", "FavoriteCount": "6", "PostTypeId": "1", "LastEditDate": "2013-02-26T09:03:52.417", "LastEditorUserId": "560648", "LastActivityDate": "2013-02-26T09:03:52.417", "Score": "5", "OwnerUserId": "508343", "Tags": "<c++><iostream>", "AnswerCount": "2"}, "15084181": {"Id": "15084181", "PostTypeId": "2", "Body": "<ul>\n<li><strong>app</strong> (=append): set the stream's position indicator to the end of the stream before each output operation</li>\n<li><strong>trunc</strong> (=truncate) any current content is discarded, assuming a length of zero on opening.</li>\n</ul>\n<p>As you can see, it doesn't make sense to put both together.</p>\n", "LastActivityDate": "2013-02-26T08:03:46.943", "CommentCount": "1", "CreationDate": "2013-02-26T08:03:46.943", "ParentId": "15084007", "Score": "5", "OwnerUserId": "1213227"}});