post_cb({"3184939": {"CommentCount": "1", "ViewCount": "2386", "PostTypeId": "1", "LastEditorUserId": "316448", "CreationDate": "2010-07-06T09:14:18.560", "LastActivityDate": "2011-02-22T12:32:21.500", "Title": "why does creating a local type vector fail", "AcceptedAnswerId": "3185008", "LastEditDate": "2011-02-22T12:32:21.500", "Id": "3184939", "Score": "13", "Body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    class Int {\n        public:\n            Int(int _i) : i(i) {}\n        private:\n            int i;\n    };\n\n    std::vector&lt;Int&gt; VI;\n}\n</code></pre>\n<p>I try to compile the above code and got the following error message:</p>\n<pre><code>foo.cc: In function 'int main()':\nfoo.cc:13: error: 'main()::Int' uses local type 'main()::Int'\nfoo.cc:13: error:   trying to instantiate 'template&lt;class _Alloc&gt; class std::allocator'\nfoo.cc:13: error: template argument 2 is invalid\nfoo.cc:13: error: invalid type in declaration before ';' token\n</code></pre>\n<p>Could anyone of you tell me why I can't do things like this in C++? Thanks in advance.</p>\n", "Tags": "<c++>", "OwnerUserId": "157300", "AnswerCount": "1"}, "3185008": {"ParentId": "3184939", "CommentCount": "3", "Body": "<p>The standard explictly prohibits using local classes to instantiate templates in 14.3.1[temp.arg.type]/2.</p>\n<blockquote>\n<p id=\"so_3184939_3185008_0\">A local type, a type with no linkage, an unnamed type or a type compounded from any of these types shall not be used as a template-argument for a template type-parameter.</p>\n</blockquote>\n<p>This will be changed in C++0x.</p>\n", "OwnerUserId": "36565", "PostTypeId": "2", "Id": "3185008", "Score": "11", "CreationDate": "2010-07-06T09:26:39.560", "LastActivityDate": "2010-07-06T09:26:39.560"}, "bq_ids": {"n4140": {"so_3184939_3185008_0": {"section_id": 7141, "quality": 0.6666666666666666, "length": 8}}, "n3337": {"so_3184939_3185008_0": {"section_id": 6885, "quality": 0.6666666666666666, "length": 8}}, "n4659": {"so_3184939_3185008_0": {"section_id": 8642, "quality": 0.6666666666666666, "length": 8}}}});