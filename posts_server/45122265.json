post_cb({"bq_ids": {"n4140": {"so_45122265_45122265_2": {"length": 24, "quality": 0.96, "section_id": 5521}}, "n3337": {"so_45122265_45122265_2": {"length": 24, "quality": 0.96, "section_id": 5307}}, "n4659": {"so_45122265_45122265_2": {"length": 24, "quality": 0.96, "section_id": 6956}}}, "45122265": {"ViewCount": "311", "Body": "<p>When browsing through a draft of the standard (N4527), I found the following paragraph ([alg.c.library]):</p>\n<blockquote>\n<p id=\"so_45122265_45122265_0\">The function signature:</p>\n<pre><code>bsearch(const void *, const void *, size_t, size_t,\n    int (*)(const void *, const void *));\n</code></pre>\n<p id=\"so_45122265_45122265_1\">is replaced by the two declarations:</p>\n<pre><code>extern \"C\" void* bsearch(const void* key, const void* base,\n                         size_t nmemb, size_t size,\n                         int (*compar)(const void*, const void*));\nextern \"C++\" void* bsearch(const void* key, const void* base,\n                           size_t nmemb, size_t size,\n                           int (*compar)(const void*, const void*));\n</code></pre>\n</blockquote>\n<p>And the same stuff for <code>qsort</code>.</p>\n<p>I also found in [dcl.link]:</p>\n<blockquote>\n<p id=\"so_45122265_45122265_2\">If two declarations declare functions with the same name and parameter-type-list (8.3.5) to be members of the same namespace or declare objects with the same name to be members of the same namespace and the declarations give the names different language linkages, the program is ill-formed;</p>\n</blockquote>\n<p>What is the purpose of these two <code>extern</code> declaration of the same function? Why is this block not ill-formed?</p>\n", "Title": "What is the purpose of extern C AND C++ for a single function (bsearch / qsort)?", "CreationDate": "2017-07-15T20:00:14.460", "LastActivityDate": "2017-07-15T20:07:38.967", "CommentCount": "2", "FavoriteCount": "1", "PostTypeId": "1", "LastEditDate": "2017-07-15T20:07:38.967", "Tags": "<c++>", "Id": "45122265", "LastEditorUserId": "2666289", "Score": "15", "OwnerUserId": "2666289", "ClosedDate": "2017-07-15T20:49:35.183", "AnswerCount": "1"}, "45122288": {"Id": "45122288", "PostTypeId": "2", "Body": "<p>The parameter type lists are not the same. Really. I'm not kidding. The two <code>compar</code> arguments have different types: in the first declaration, because the function is <code>extern \"C\"</code>, the <code>compar</code> function is also <code>extern \"C\"</code>; in the second one, the <code>compar</code> function is <code>extern C++\"</code>. And that's why there are two declarations: so that you can call <code>bsearch</code> with functions with either language linkage.</p>\n", "LastActivityDate": "2017-07-15T20:04:25.840", "CommentCount": "3", "CreationDate": "2017-07-15T20:04:25.840", "ParentId": "45122265", "Score": "16", "OwnerUserId": "1593860"}});