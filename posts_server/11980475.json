post_cb({"11980475": {"LastEditDate": "2012-08-16T04:00:57.533", "Body": "<p>When compiling the code below with gcc, I get an error: <em>'i' cannot appear in a constant-expression.</em></p>\n<p>Why is this?</p>\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\ntemplate&lt;int p&gt;\nclass C\n{\npublic:\n    void test();\n};\n\ntemplate&lt;int p&gt;\nvoid C&lt;p&gt;::test()\n{\n    p = 0;\n}\n\nchar const *const p = \"hello\";\nint main()\n{\n    const int i = (int)p;\n    C&lt;i&gt; c;\n}\n</code></pre>\n", "LastEditorUserId": "777186", "Score": "0", "AcceptedAnswerId": "11980497", "CommentCount": "1", "OwnerUserId": "1567318", "AnswerCount": "1", "PostTypeId": "1", "Tags": "<c++><gcc><const><constant-expression>", "LastActivityDate": "2012-08-16T04:00:57.533", "Title": "Why can't this const argument match a non-type template parameter?", "Id": "11980475", "ViewCount": "100", "CreationDate": "2012-08-16T03:50:52.337"}, "bq_ids": {"n3337": {"so_11980475_11980497_0": {"quality": 0.7037037037037037, "length": 19, "section_id": 5946}}}, "11980497": {"PostTypeId": "2", "ParentId": "11980475", "Score": "2", "CreationDate": "2012-08-16T03:56:06.117", "Body": "<p>The variable <code>i</code> is not mutable at runtime because it is <code>const</code>, but it is not a \"constant expression\" because it is not evaluated at compile-time.</p>\n<p><code>(int)p;</code> is a <code>reinterpret_cast</code>. Integral constant expressions cannot have <code>reinterpret_cast</code>. It is explicitly forbidden (\u00a75.19/2):</p>\n<blockquote>\n<p id=\"so_11980475_11980497_0\">A <em>conditional-expression</em> is a <em>core constant expression</em> unless it\n  involves one of the following as a potentially evaluated subexpression\n  (\u00a73.2), but subexpressions of logical AND (\u00a75.14), logical OR (\u00a75.15),\n  and conditional (\u00a75.16) operations that are not evaluated are not\n  considered [<em>Note:</em> An overloaded operator invokes a function.\u2014<em>end\n  note</em> ]:</p>\n<p id=\"so_11980475_11980497_1\">\u2014 [...]</p>\n<p id=\"so_11980475_11980497_2\">\u2014 a <code>reinterpret_cast</code> (\u00a75.2.10);</p>\n<p id=\"so_11980475_11980497_3\">\u2014 [...]</p>\n</blockquote>\n", "CommentCount": "0", "Id": "11980497", "OwnerUserId": "46642", "LastActivityDate": "2012-08-16T03:56:06.117"}});