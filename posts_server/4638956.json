post_cb({"4638956": {"CommentCount": "2", "AcceptedAnswerId": "4638975", "PostTypeId": "1", "LastEditorUserId": "149482", "CreationDate": "2011-01-09T11:48:12.773", "LastActivityDate": "2011-01-09T13:09:34.490", "LastEditDate": "2011-01-09T13:09:34.490", "ViewCount": "2194", "FavoriteCount": "2", "Title": "Why is this default template parameter not allowed?", "Id": "4638956", "Score": "6", "Body": "<p>I have the following class:</p>\n<pre><code>template &lt;typename Type = void&gt;\nclass AlignedMemory {\npublic:\n    AlignedMemory(size_t alignment, size_t size)\n        :   memptr_(0) {\n        int iret(posix_memalign((void **)&amp;memptr_, alignment, size));\n        if (iret) throw system_error(\"posix_memalign\");\n    }\n    virtual ~AlignedMemory() {\n        free(memptr_);\n    }\n    operator Type *() const { return memptr_; }\n    Type *operator-&gt;() const { return memptr_; }\n    //operator Type &amp;() { return *memptr_; }\n    //Type &amp;operator[](size_t index) const;\nprivate:\n    Type *memptr_;\n};\n</code></pre>\n<p>And attempt to instantiate an automatic variable like this:</p>\n<pre><code>AlignedMemory blah(512, 512);\n</code></pre>\n<p>This gives the following error:</p>\n<blockquote>\n<p id=\"so_4638956_4638956_0\">src/cpfs/entry.cpp:438: error: missing template arguments before \u2018blah\u2019</p>\n</blockquote>\n<p>What am I doing wrong? Is <code>void</code> not an allowed default parameter?</p>\n", "Tags": "<c++><templates><g++><default-parameters>", "OwnerUserId": "149482", "AnswerCount": "2"}, "4638975": {"ParentId": "4638956", "CommentCount": "0", "Body": "<p>I think that you need to write:</p>\n<pre><code>AlignedMemory&lt;&gt; blah(512, 512);\n</code></pre>\n<p>See 14.3 [temp.arg] / 4:</p>\n<blockquote>\n<p id=\"so_4638956_4638975_0\">When default <em>template-arguments</em> are used, a <em>template-argument</em> list can be empty. In that case the empty <code>&lt;&gt;</code> brackets shall still be used as the <em>template-argument-list</em>.</p>\n</blockquote>\n", "OwnerUserId": "19563", "PostTypeId": "2", "Id": "4638975", "Score": "10", "CreationDate": "2011-01-09T11:54:19.087", "LastActivityDate": "2011-01-09T11:54:19.087"}, "4638980": {"ParentId": "4638956", "PostTypeId": "2", "CommentCount": "0", "Body": "<p>Your syntax is wrong:</p>\n<pre><code>AlignedMemory blah(512, 512); //wrong syntax\n</code></pre>\n<p>Correct syntax is this:</p>\n<pre><code>AlignedMemory&lt;&gt; blah(512, 512); //this uses \"void\" as default type!\n</code></pre>\n<hr>\n<p>The error message itself gives this hint. Look at it again:</p>\n<blockquote>\n<p id=\"so_4638956_4638980_0\">src/cpfs/entry.cpp:438: error: <strong>missing</strong> template arguments <strong>before</strong>\n  \u2018buf\u2019</p>\n</blockquote>\n<p>PS: I'm sure 'buf' is a typo. You wanted to write 'blah' - the name of your variable!</p>\n</hr>", "OwnerUserId": "415784", "LastEditorUserId": "415784", "LastEditDate": "2011-01-09T12:14:53.737", "Id": "4638980", "Score": "5", "CreationDate": "2011-01-09T11:55:18.910", "LastActivityDate": "2011-01-09T12:14:53.737"}, "bq_ids": {"n4140": {"so_4638956_4638975_0": {"section_id": 79, "quality": 1.0, "length": 12}}, "n3337": {"so_4638956_4638975_0": {"section_id": 74, "quality": 1.0, "length": 12}}, "n4659": {"so_4638956_4638975_0": {"section_id": 81, "quality": 1.0, "length": 12}}}});