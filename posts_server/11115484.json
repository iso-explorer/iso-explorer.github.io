post_cb({"11116164": {"ParentId": "11115484", "PostTypeId": "2", "CommentCount": "1", "Body": "<p>From C++11, \u00a73.4.5/4:</p>\n<blockquote id=\"so_11115484_11116164_0\">\nIf the id-expression in a class member access is a qualified-id of the\nform  \n<pre>\n    class-name-or-namespace-name::...\n</pre>\nthe class-name-or-namespace-name\nfollowing the . or -&gt; operator is first looked up in the class of the\nobject expression and the name, if found, is used. Otherwise it is\nlooked up in the context of the entire postfix-expression.\n</blockquote>\n<p>I don't think it can be clearer.  This finds <code>B::base</code>, so the output\nshould be <code>A::foo()</code>.</p>\n", "OwnerUserId": "649665", "LastEditorUserId": "147192", "LastEditDate": "2012-06-20T09:07:25.007", "Id": "11116164", "Score": "7", "CreationDate": "2012-06-20T09:04:34.853", "LastActivityDate": "2012-06-20T09:07:25.007"}, "11115484": {"CommentCount": "12", "AcceptedAnswerId": "11116164", "PostTypeId": "1", "LastEditorUserId": "596781", "CreationDate": "2012-06-20T08:21:02.773", "LastActivityDate": "2012-06-20T09:07:25.007", "LastEditDate": "2012-06-20T08:40:19.500", "ViewCount": "656", "FavoriteCount": "4", "Title": "C++ method call and type scope resolution ambiguity", "Id": "11115484", "Score": "18", "Body": "<p>I hope the title actually describes what I wanted to ask...</p>\n<p>I wrote a piece of code that compiles with gcc and works as I intended.  However, it does not compile with llvm and the code executes differently when compiled with icc!<br>\nHere is an example of the problem:</br></p>\n<pre><code>#include &lt;iostream&gt;\n\nusing std::cout; using std::endl;\n\nclass A {\npublic:\n  virtual void foo() { cout &lt;&lt; \"A::foo()\" &lt;&lt; endl; }\n};\n\nclass B : public A {\npublic:\n  typedef A  base;\n  virtual void foo() { cout &lt;&lt; \"B::foo()\" &lt;&lt; endl; }\n};\n\nint main() {\n  typedef B  base;\n  base* bp = new B();\n  bp-&gt;base::foo(); \n}\n</code></pre>\n<p>gcc output:  A::foo()<br>\nicc output:  B::foo()</br></p>\n<p>Could somebody explain what does the standard say about this case?  </p>\n", "Tags": "<c++><types><scope><ambiguity><method-call>", "OwnerUserId": "1468472", "AnswerCount": "2"}, "11115950": {"ParentId": "11115484", "PostTypeId": "2", "CommentCount": "1", "Body": "<p>I think this part of the standard is relevant:</p>\n<blockquote>\n<p id=\"so_11115484_11115950_0\">3.4.3.1 Class members [class.qual] </p>\n<p id=\"so_11115484_11115950_1\">1) If the nested-name-specifier of a qualified-id nominates a class, the name specified after the\n  nested-namespecifier is looked up in the scope of the class (10.2),\n  except for the cases listed below. The name shall represent one or\n  more members of that class or of one of its base classes (Clause 10).\n  [ Note: A class member can be referred to using a qualified-id at any\n  point in its potential scope (3.3.7). \u2014end note ] The exceptions to\n  the name lookup rule above are the following: </p>\n<p id=\"so_11115484_11115950_2\">\u2014 a destructor name is\n  looked up as specified in 3.4.3; </p>\n<p id=\"so_11115484_11115950_3\">\u2014 a conversion-type-id of a\n  conversion-function-id is looked up in the same manner as a\n  conversion-type-id in a class member access (see 3.4.5); </p>\n<p id=\"so_11115484_11115950_4\">\u2014 the names\n  in a template-argument of a template-id are looked up in the context\n  in which the entire postfix-expression occurs. </p>\n<p id=\"so_11115484_11115950_5\">\u2014 the lookup for a name\n  specified in a using-declaration (7.3.3) also finds class or\n  enumeration names hidden within the same scope (3.3.10).</p>\n</blockquote>\n<p><code>base::</code> in this case seems to \"nominate\" a class, so the look up is done in scope of the class. I don't see how any of the exception cases could apply, so it is the scope of the class, as such <code>base</code> is equivalent to <code>A</code>.</p>\n<p>(5.1.1-8 indicates that it is a qualified-id in that case and that 3.4.3.1 applies)</p>\n", "OwnerUserId": "833362", "LastEditorUserId": "833362", "LastEditDate": "2012-06-20T08:56:06.643", "Id": "11115950", "Score": "6", "CreationDate": "2012-06-20T08:50:18.643", "LastActivityDate": "2012-06-20T08:56:06.643"}, "bq_ids": {"n4140": {"so_11115484_11115950_1": {"section_id": 7113, "quality": 0.8571428571428571, "length": 42}, "so_11115484_11116164_0": {"section_id": 7129, "quality": 1.0, "length": 22}, "so_11115484_11115950_5": {"section_id": 7113, "quality": 0.8666666666666667, "length": 13}, "so_11115484_11115950_4": {"section_id": 7113, "quality": 1.0, "length": 8}, "so_11115484_11115950_2": {"section_id": 7113, "quality": 0.8, "length": 4}, "so_11115484_11115950_3": {"section_id": 7113, "quality": 0.9090909090909091, "length": 10}}, "n3337": {"so_11115484_11115950_1": {"section_id": 6857, "quality": 0.8571428571428571, "length": 42}, "so_11115484_11116164_0": {"section_id": 6873, "quality": 1.0, "length": 22}, "so_11115484_11115950_5": {"section_id": 6857, "quality": 0.8666666666666667, "length": 13}, "so_11115484_11115950_4": {"section_id": 6857, "quality": 1.0, "length": 8}, "so_11115484_11115950_2": {"section_id": 6857, "quality": 0.8, "length": 4}, "so_11115484_11115950_3": {"section_id": 6857, "quality": 0.9090909090909091, "length": 10}}, "n4659": {"so_11115484_11115950_4": {"section_id": 8614, "quality": 1.0, "length": 8}, "so_11115484_11115950_1": {"section_id": 8614, "quality": 0.8571428571428571, "length": 42}, "so_11115484_11116164_0": {"section_id": 8630, "quality": 0.9545454545454546, "length": 21}, "so_11115484_11115950_5": {"section_id": 8614, "quality": 0.8666666666666667, "length": 13}, "so_11115484_11115950_3": {"section_id": 8614, "quality": 0.9090909090909091, "length": 10}}}});