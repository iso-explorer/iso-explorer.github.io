post_cb({"bq_ids": {"n4140": {"so_42750701_42750701_0": {"length": 15, "quality": 0.9375, "section_id": 5986}}, "n4659": {"so_42750701_42750701_0": {"length": 15, "quality": 0.9375, "section_id": 7486}}}, "42750768": {"Id": "42750768", "PostTypeId": "2", "Body": "<p>You are correct, for the reason you cite. <code>S().arr[0]</code> is an xvalue as of <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1213\" rel=\"noreferrer\">DR 1213</a>, so you should be able to bind an rvalue reference to it.</p>\n<p>This is <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=79832\" rel=\"noreferrer\">gcc bug 79832</a>. Note that clang HEAD compiles this <a href=\"http://melpon.org/wandbox/permlink/vrAAZEWxoeQvXoax\" rel=\"noreferrer\">fine</a>. </p>\n", "Score": "5", "LastActivityDate": "2017-03-12T17:32:05.117", "CreationDate": "2017-03-12T17:32:05.117", "ParentId": "42750701", "CommentCount": "0", "OwnerUserId": "2069064"}, "42750701": {"ViewCount": "83", "LastEditDate": "2017-03-12T17:31:55.953", "AcceptedAnswerId": "42750768", "Title": "Value category of the subscript-expression on xvalue", "CreationDate": "2017-03-12T17:26:28.043", "LastActivityDate": "2017-03-12T17:32:31.460", "CommentCount": "10", "Body": "<p>From 5.2.1.1:</p>\n<blockquote>\n<p id=\"so_42750701_42750701_0\">The expression <code>E1[E2]</code> is identical (by definition) to <code>*((E1)+(E2))</code> [...] except that in the case of an array operand, the result is an lvalue if that operand is an lvalue and an xvalue otherwise.</p>\n</blockquote>\n<p>However, with the code below:</p>\n<pre><code>struct S\n{\n    int arr[5];\n};\n\nint main()\n{\n    int &amp;&amp;r = S().arr[0];\n}\n</code></pre>\n<p>both GCC and Clang complain about \"rvalue reference cannot bind to lvalue int\".</p>\n<p>What have I misunderstood? As I understand <code>S()</code> is rvalue, <code>S().arr</code> is xvalue, so <code>S().arr[0]</code> should be xvalue as well and should be able to bind to rvalue refs.</p>\n", "PostTypeId": "1", "LastEditorUserId": "1413395", "Id": "42750701", "AnswerCount": "1", "Score": "3", "OwnerUserId": "4751585", "Tags": "<c++><c++14><language-lawyer><rvalue-reference><xvalue>", "FavoriteCount": "0"}});