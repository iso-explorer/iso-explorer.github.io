post_cb({"29735103": {"ViewCount": "1782", "Body": "<p>Does anybody know why this code produces such an output? <code>-1 &gt;= 0</code>!!!</p>\n<pre><code>[mahmood@tiger ~]$ cat t.cpp\n#include &lt;iostream&gt;\n#include &lt;stdint.h&gt;\nint main()\n{\n  uint64_t i = 10;\n  uint64_t j = 10;\n  int64_t k = -1;\n  std::cout &lt;&lt; \"k=\" &lt;&lt; k &lt;&lt; \" i-j=\" &lt;&lt; i-j;\n  if (k &gt;= i-j)\n    std::cout &lt;&lt; \" --&gt; yes k&gt;=i-j\\n\";\n  return 0;\n}\n[mahmood@tiger ~]$ g++ t.cpp\n[mahmood@tiger ~]$ ./a.out\nk=-1 i-j=0 --&gt; yes k&gt;=i-j\n[mahmood@tiger ~]$\n</code></pre>\n<p>I know the types are different and a comparison need two similar types but at the end of the day, it is comparing <code>-1</code> and <code>0</code>. Isn't it?</p>\n", "AcceptedAnswerId": "29735125", "Title": "Comparing int64_t and uint64_t", "CreationDate": "2015-04-19T19:56:29.417", "Id": "29735103", "CommentCount": "0", "PostTypeId": "1", "ClosedDate": "2015-04-19T20:01:03.780", "LastActivityDate": "2015-04-19T19:58:44.587", "Score": "0", "OwnerUserId": "859227", "Tags": "<c++><comparison><int64><uint64>", "AnswerCount": "2"}, "bq_ids": {"n4140": {"so_29735103_29735125_1": {"length": 23, "quality": 1.0, "section_id": 5943}}, "n3337": {"so_29735103_29735125_1": {"length": 23, "quality": 1.0, "section_id": 5714}}, "n4659": {"so_29735103_29735125_1": {"length": 23, "quality": 1.0, "section_id": 7428}}}, "29735129": {"Id": "29735129", "PostTypeId": "2", "Body": "<p>No. It's likely comparing <code>0xffffffffffffffff</code> to <code>0</code>. The <code>signed</code> variable gets promoted to the <code>unsigned</code> type before the comparison is made. Look up 'arithmetic conversions' in the standard for more details.</p>\n", "LastActivityDate": "2015-04-19T19:58:44.587", "CommentCount": "1", "CreationDate": "2015-04-19T19:58:44.587", "ParentId": "29735103", "Score": "2", "OwnerUserId": "116908"}, "29735125": {"Id": "29735125", "PostTypeId": "2", "Body": "<pre><code>if (k &gt;= i-j)\n</code></pre>\n<p>both sides are converted to unsigned, so perhaps -1 is interpreted as 0xFFFFFFFFFFFFFFFF:</p>\n<pre><code>if (0xFFFFFFFFFFFFFFFF &gt;= 0)\n</code></pre>\n<p>According to the standard (emphasis mine):</p>\n<blockquote>\n<p id=\"so_29735103_29735125_0\"><strong>Expressions [expr]</strong></p>\n<p id=\"so_29735103_29735125_1\">Otherwise, if the operand that has unsigned integer type has rank greater than or equal to the rank of the type of the other operand, the operand with signed integer type shall be <em>converted to the type of the operand with unsigned integer type</em>.</p>\n</blockquote>\n", "LastActivityDate": "2015-04-19T19:58:32.520", "CommentCount": "0", "CreationDate": "2015-04-19T19:58:32.520", "ParentId": "29735103", "Score": "3", "OwnerUserId": "3246555"}});