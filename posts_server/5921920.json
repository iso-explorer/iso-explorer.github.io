post_cb({"5922051": {"ParentId": "5921920", "CommentCount": "5", "Body": "<p>It compiles in C++ because C++ needs to support dynamic initialization anyway, or you couldn't have local static or non-local objects with non-trivial constructors. </p>\n<p>So since C++ has this complexity anyway, supporting that initialization like you show isn't complicated to add anymore. </p>\n<p>In C that would be a big matter because C doesn't have any other reason to support initialization done at program startup (apart from trivial <a href=\"http://en.wikipedia.org/wiki/.bss\" rel=\"noreferrer\">zero initialization</a>). In C, initial values of file-scope or local static objects can always statically be put into the executable image. </p>\n", "Score": "10", "PostTypeId": "2", "Id": "5922051", "OwnerUserId": "34509", "CreationDate": "2011-05-07T15:32:04.263", "LastActivityDate": "2011-05-07T15:32:04.263"}, "5921920": {"CommentCount": "0", "AcceptedAnswerId": "5922051", "LastEditDate": "2017-05-23T10:33:58.197", "LastEditorUserId": "-1", "CreationDate": "2011-05-07T15:12:47.427", "LastActivityDate": "2013-02-14T19:40:30.287", "PostTypeId": "1", "ViewCount": "3974", "FavoriteCount": "1", "Title": "Difference between initialization of static variables in C and C++", "Id": "5921920", "Score": "20", "Body": "<p>I was going through the code at <a href=\"http://geeksforgeeks.org/?p=10302\" rel=\"nofollow noreferrer\">http://geeksforgeeks.org/?p=10302</a></p>\n<pre><code>#include&lt;stdio.h&gt;\nint initializer(void)\n{\n    return 50;\n}\n\nint main()\n{\n    static int i = initializer();\n    printf(\" value of i = %d\", i);\n    getchar();\n    return 0;\n}\n</code></pre>\n<p>This code will not compile in C because static variables need to be initialised before main() starts. That is fine. But this code will compile just fine in a C++ compiler.</p>\n<p>My question is why it compiles in a C++ compiler when static has the same usage in both languages. Of course compilers will be different for these languages but I am not able to pin point the exact reason. If it is specified in the standard, I would love to know that.</p>\n<p>I searched for this question on SO , found 3 similar links but in vain.\n<a href=\"https://stackoverflow.com/questions/943280/difference-between-static-in-c-and-static-in-c\">Link1</a>\n<a href=\"https://stackoverflow.com/questions/211237/c-static-variables-initialisation-order\">Link2</a>\n<a href=\"https://stackoverflow.com/questions/2528457/static-variables-in-c-and-c\">Link3</a></p>\n<p>Thanks for your help.</p>\n", "Tags": "<c++><c><static>", "OwnerUserId": "734154", "AnswerCount": "3"}, "5922039": {"ParentId": "5921920", "CommentCount": "0", "Body": "<p>Static variables in C need to be initialised with a value known at compile time. This requirement  has been removed in C++, and you can initialise them with expressions evaluated at run-time. </p>\n<p>The two languages differ in this, and many, many other respects. You can quite easily write C code which will be acceptable to a C++ compiler, but the reverse is not true.</p>\n", "Score": "3", "PostTypeId": "2", "Id": "5922039", "OwnerUserId": "2100815", "CreationDate": "2011-05-07T15:30:44.033", "LastActivityDate": "2011-05-07T15:30:44.033"}, "bq_ids": {"n3337": {"so_5921920_5922035_0": {"section_id": 5947, "quality": 0.6363636363636364, "length": 7}}, "n4659": {"so_5921920_5922035_0": {"section_id": 6789, "quality": 0.5454545454545454, "length": 6}}}, "5922035": {"ParentId": "5921920", "LastEditDate": "2011-05-07T15:35:17.710", "CommentCount": "6", "CreationDate": "2011-05-07T15:30:01.597", "Score": "7", "Id": "5922035", "PostTypeId": "2", "LastEditorUserId": "165520", "OwnerUserId": "165520", "Body": "<p>6.7.8/4 [C99]</p>\n<blockquote>\n<p id=\"so_5921920_5922035_0\">All the expressions in an initializer for an object that has static storage duration shall be\n  constant expressions or string literals.</p>\n</blockquote>\n<p>In <code>static int i = initializer();</code> the RHS is not a constant expression and so the code doesn't compile in C.</p>\n<p>In C++ there is no such restriction and the code is well-formed in C++.</p>\n", "LastActivityDate": "2011-05-07T15:35:17.710"}});