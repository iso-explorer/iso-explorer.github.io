post_cb({"16024951": {"CommentCount": "1", "ViewCount": "63", "OwnerDisplayName": "user34537", "CreationDate": "2013-04-15T21:24:32.507", "LastActivityDate": "2013-04-15T21:32:25.343", "PostTypeId": "1", "AcceptedAnswerId": "16025016", "Title": "template static var = undefined reference", "Id": "16024951", "Score": "1", "Body": "<p>This code runs fine in MSVC but according to gcc-4.7.2 C++11 the linker gets the problems below. Whats wrong with it</p>\n<p><a href=\"http://ideone.com/uJiCw0\" rel=\"nofollow\">Demo</a></p>\n<p>Error:</p>\n<pre><code>/home/r7Qecv/ccEZjv1w.o: In function `main':\nprog.cpp:(.text.startup+0xa): undefined reference to `Foo&lt;long&gt;::s'\nprog.cpp:(.text.startup+0x17): undefined reference to `Foo&lt;int&gt;::s'\nprog.cpp:(.text.startup+0x2c): undefined reference to `Foo&lt;long&gt;::s'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n<p>Code</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stack&gt;\n\nusing namespace std;\n\ntemplate&lt;class T&gt;\nclass Foo{\npublic:\n    T a;\n    static T s;\n};\ntemplate&lt;&gt;\nint Foo&lt;int&gt;::s;\ntemplate&lt;&gt;\nlong Foo&lt;long&gt;::s;\nint main(){\n\n    Foo&lt;int&gt; f;\n    Foo&lt;long&gt; f2;\n    f.a=4;\n    f.s=6;\n    f2.a=8;\n    std::cout&lt;&lt;f2.s;\n    f2.s=11;\n\n    return 0;\n}\n</code></pre>\n", "Tags": "<c++>", "AnswerCount": "2"}, "bq_ids": {"n4140": {"so_16024951_16025045_0": {"section_id": 275, "quality": 1.0, "length": 12}}, "n3337": {"so_16024951_16025045_0": {"section_id": 266, "quality": 1.0, "length": 12}}, "n4659": {"so_16024951_16025045_0": {"section_id": 282, "quality": 1.0, "length": 12}}}, "16025016": {"ParentId": "16024951", "PostTypeId": "2", "CommentCount": "0", "CreationDate": "2013-04-15T21:29:56.443", "OwnerUserId": "1756636", "CommunityOwnedDate": "2013-04-15T21:29:56.443", "Id": "16025016", "Score": "4", "Body": "<p>You haven't instantiated your static members, you only declared them. </p>\n<p>Do this (or similar):</p>\n<pre><code>template&lt;&gt;\nint Foo&lt;int&gt;::s = 0;\ntemplate&lt;&gt;\nlong Foo&lt;long&gt;::s = 0;\n</code></pre>\n", "LastActivityDate": "2013-04-15T21:29:56.443"}, "16025045": {"ParentId": "16024951", "CommentCount": "0", "Body": "<p>The answer is, you need to initialize the static members for it to be a definition:</p>\n<p>14.7.3p13</p>\n<blockquote>\n<p id=\"so_16024951_16025045_0\">An explicit specialization of a static data member of a template is a\n  definition if the declaration includes an initializer; otherwise, it\n  is a declaration.</p>\n</blockquote>\n", "OwnerUserId": "906773", "PostTypeId": "2", "Id": "16025045", "Score": "4", "CreationDate": "2013-04-15T21:32:25.343", "LastActivityDate": "2013-04-15T21:32:25.343"}});