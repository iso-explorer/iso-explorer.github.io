post_cb({"13094103": {"ParentId": "13094090", "CommentCount": "3", "Body": "<p>Yes, it's valid. </p>\n<p>It declares an integer named <code>main</code>.</p>\n", "OwnerUserId": "1275169", "PostTypeId": "2", "Id": "13094103", "Score": "1", "CreationDate": "2012-10-26T20:39:08.080", "LastActivityDate": "2012-10-26T20:39:08.080"}, "13094171": {"ParentId": "13094090", "PostTypeId": "2", "CommentCount": "18", "Body": "<blockquote>\n<p id=\"so_13094090_13094171_0\">Why this code compile successful in C and will give you an error in C++?</p>\n</blockquote>\n<p>Because of C++ name mangling. Basically, in all practical implementations, the linker looks for a <strong>symbol</strong> named <code>main</code> (or variants of it, I've seen <code>_main</code> on Apple's platforms) - in C, that can be either the <code>main()</code> function <em>or an extern storage variable named</em> <code>main</code> - the point is that usually C implementations (compilers, toolchains) don't differentiate between variables and functions at the linker level, that's why providing one symbol, be it either a variable or a function, named <code>main()</code> <strong>may seem to be enough</strong>. In fact, in a hosted environment, as per the Standard, the resulting program (executable) won't be conforming, because there, it is required that the <code>main()</code> <strong>function</strong> be implemented.</p>\n<p>In C++, usually name mangling is used (in order to achieve features of C++ such as function overloading), and that means that the compiler names the resulting symbol in the executable file differently depending on its type, on the fact if it's a function, a variable, <em>a function with a different signature</em>, and other circumstances. So the linker basically won't find the symbol corresponding to the expected <code>int main(int, char *[])</code> function and will issue an error message.</p>\n<blockquote>\n<p id=\"so_13094090_13094171_1\">Is it standard-conforming? </p>\n</blockquote>\n<p>Not defining the <code>main()</code> function isn't (see the first part). As far as I can tell, having a variable named <code>main</code> along with the main function is valid C++, but it is <em>certainly bad practice.</em></p>\n<blockquote>\n<p id=\"so_13094090_13094171_2\">Can you quote the Standard?</p>\n</blockquote>\n<p>Yes please (emphasis mine):</p>\n<blockquote>\n<p id=\"so_13094090_13094171_3\">C++ 98, paragraph 3.6.1:</p>\n<p id=\"so_13094090_13094171_4\">A program <strong>shall contain</strong> a global function called <code>main()</code>, which is the designated start of the program. It is <em>implementation-defined</em> whether a program in a <em>freestanding environment</em> is required to define a <code>main()</code> function.</p>\n<p id=\"so_13094090_13094171_5\">C99, paragraph 5.1.2.2.1</p>\n<p id=\"so_13094090_13094171_6\">5.1.2.2.1 Program startup</p>\n<p id=\"so_13094090_13094171_7\">1 The function called at program startup is named main. The implementation declares no\n  prototype for this function. I</p>\n</blockquote>\n", "Id": "13094171", "LastEditDate": "2012-10-26T21:09:53.617", "OwnerDisplayName": "user529758", "Score": "9", "CreationDate": "2012-10-26T20:44:04.243", "LastActivityDate": "2012-10-26T21:09:53.617", "LastEditorDisplayName": "user529758"}, "13094403": {"ParentId": "13094090", "CommentCount": "0", "Body": "<p>I think , I found one . It's not a solution but point to remember\nIf you use </p>\n<p><code>gcc -Wall -Werror &lt;file.c&gt;</code></p>\n<p>You will get warning is treated as errors:</p>\n<pre><code>main is usually a function name\n</code></pre>\n<p>So its best to compile with <code>-Wall</code> so that you can see all the warnings as well</p>\n", "OwnerUserId": "270060", "PostTypeId": "2", "Id": "13094403", "Score": "1", "CreationDate": "2012-10-26T21:04:22.323", "LastActivityDate": "2012-10-26T21:04:22.323"}, "13094127": {"ParentId": "13094090", "PostTypeId": "2", "CommentCount": "6", "Body": "<p>From <a href=\"http://www-d0.fnal.gov/~dladams/cxx_standard.pd\" rel=\"nofollow\">ISO/IEC 14882:1998(E)</a> (aka C++98), <em>3.6.1 Main function</em>:</p>\n<blockquote>\n<p id=\"so_13094090_13094127_0\">An implementation shall not predefine the main function. This\n  function shall not be overloaded. It shall 2   have a return type of\n  type int, but otherwise its type is implementation-defined. All\n  implementations   shall allow both of the following definitions of\n  main:\n          <code>int main() { /* ... */ }</code>   and\n                     <code>int main(int argc, char* argv[]) { /* ... */ }</code>   In the latter form argc shall be the number of arguments passed to the\n  program from the environment in   which the program is run. If argc is\n  nonzero these arguments shall be supplied in argv[0] through<br>\n  argv[argc-1] as pointers to the initial characters of null-terminated\n  multibyte strings (NTMBSs)   (17.3.2.1.3.2) and argv[0] shall be the\n  pointer to the initial character of a NTMBS that represents the   name\n  used to invoke the program or \"\". The value of argc shall be\n  nonnegative. The value of   argv[argc] shall be 0. [Note: it is\n  recommended that any further (optional) parameters be added after<br>\n  argv. ]</br></br></p>\n</blockquote>\n<hr>\n<blockquote>\n<p id=\"so_13094090_13094127_1\">The function main shall not be used (3.2) within a program. The\n  linkage (3.5) of main is 3   implementation-defined. A program that\n  declares main to be inline or static is ill-formed. The   name main is\n  not otherwise reserved. [Example: member functions, classes, and\n  enumerations can be   called main, as can entities in other\n  namespaces. ]</p>\n</blockquote>\n<hr>\n<p><code>int main;</code> does not comply with the above (\"All implementations shall allow both of the following definitions of main\", \"The function main shall not be used (3.2) within a program\").</p>\n</hr></hr>", "OwnerUserId": "489590", "LastEditorUserId": "489590", "LastEditDate": "2012-10-26T20:46:36.550", "Id": "13094127", "Score": "4", "CreationDate": "2012-10-26T20:40:49.127", "LastActivityDate": "2012-10-26T20:46:36.550"}, "13094090": {"CommentCount": "1", "AcceptedAnswerId": "13094171", "PostTypeId": "1", "LastEditorDisplayName": "user529758", "CreationDate": "2012-10-26T20:37:20.327", "LastActivityDate": "2012-10-26T21:09:53.617", "LastEditDate": "2012-10-26T20:49:57.923", "ViewCount": "327", "FavoriteCount": "1", "Title": "function main without definition in C and C++", "Id": "13094090", "Score": "5", "Body": "<p>Why this code compile successful in C and will give you an error in C++?</p>\n<pre><code>int main;\n</code></pre>\n<p>Is it standard-conforming in a hosted environment? Can you quote the standard?</p>\n<p>I've tested it with gcc.</p>\n", "Tags": "<c++><c>", "OwnerUserId": "1608835", "AnswerCount": "4"}, "bq_ids": {"n4140": {"so_13094090_13094127_0": {"section_id": 7146, "quality": 0.7792207792207793, "length": 60}, "so_13094090_13094127_1": {"section_id": 7147, "quality": 0.8333333333333334, "length": 25}, "so_13094090_13094171_4": {"section_id": 7145, "quality": 0.9333333333333333, "length": 14}}, "n3337": {"so_13094090_13094127_0": {"section_id": 6890, "quality": 0.8051948051948052, "length": 62}, "so_13094090_13094127_1": {"section_id": 6891, "quality": 0.8333333333333334, "length": 25}, "so_13094090_13094171_4": {"section_id": 6889, "quality": 0.9333333333333333, "length": 14}}, "n4659": {"so_13094090_13094127_0": {"section_id": 8647, "quality": 0.7792207792207793, "length": 60}, "so_13094090_13094127_1": {"section_id": 8648, "quality": 0.8, "length": 24}, "so_13094090_13094171_4": {"section_id": 8646, "quality": 0.8, "length": 12}}}});