post_cb({"47018465": {"CommentCount": "4", "ViewCount": "49", "PostTypeId": "1", "LastEditorUserId": "8856921", "CreationDate": "2017-10-30T15:03:41.047", "LastActivityDate": "2017-10-30T16:24:58.403", "Title": "gcc 4.9.2 compilation error: AssetLinkData", "AcceptedAnswerId": "47018614", "LastEditDate": "2017-10-30T16:11:22.963", "Id": "47018465", "Score": "0", "Body": "<p>Trying to compile the program included below, I get the following error. What should be modified in the program for successful compilation?\nLooks like GCC 4.9.2 can't implement some noexcept move constructors as \"=default\". </p>\n<p>The line causing the trouble is:\n    <code>AssetLinkData::AssetLinkData(AssetLinkData&amp;&amp; other) noexcept = default;</code></p>\n<hr>\n<blockquote>\n<p id=\"so_47018465_47018465_0\"><strong>COMPILATION ERROR:</strong> FAILED: obj/browser/asset_link_data.o  g++ -MMD -MF (I removed many more flags)</p>\n<p id=\"so_47018465_47018465_1\">asset_link_data.cc: error: function\n  'password_manager::AssetLinkData::AssetLinkData(password_manager::AssetLinkData&amp;&amp;)'\n  defaulted on its redeclaration with an exception-specification that\n  differs from the implicit declaration\n  'password_manager::AssetLinkData::AssetLinkData(password_manager::AssetLinkData&amp;&amp;)'\n  AssetLinkData::AssetLinkData(AssetLinkData&amp;&amp; other) noexcept =\n  default;</p>\n</blockquote>\n<hr>\n<p><strong>SOURCE CODE:</strong></p>\n<pre><code>#include \"asset_link_data.h\"\n\n#include &lt;algorithm&gt;\n\n#include &lt;utility&gt;\n\n#include \"base/json/json_reader.h\"\n\n#include \"base/json/json_value_converter.h\"\n\n#include \"base/values.h\"\n\nnamespace password_manager { namespace {\n\nconstexpr char kGetLoginsRelation[] =\n    \"delegate_permission/common.get_login_creds\"; constexpr char kWebNamespace[] = \"web\";\n\n}  // namespace\n\nAssetLinkData::AssetLinkData() = default;\n\nAssetLinkData::AssetLinkData(AssetLinkData&amp;&amp; other) noexcept = default;\n\nAssetLinkData::~AssetLinkData() = default; AssetLinkData&amp; AssetLinkData::operator=(AssetLinkData&amp;&amp; other) = default;  \n}  // namespace password_manager\n</code></pre>\n<p>below Im adding the contents of asset_link_data.h:</p>\n<pre><code>#ifndef COMPONENTS_PASSWORD_MANAGER_CORE_BROWSER_SITE_AFFILIATION_ASSET_LINK_DATA_H_\n#define COMPONENTS_PASSWORD_MANAGER_CORE_BROWSER_SITE_AFFILIATION_ASSET_LINK_DATA_H_\n\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n#include \"base/macros.h\"\n#include \"url/gurl.h\"\n\nnamespace password_manager {\n\n// The class parses an asset link file. The spec for the format is\n// https://github.com/google/digitalassetlinks/blob/master/well-known/details.md\n// The class cares only about two types of statements:\n// - includes. Those are just a reference to a file to be loaded and parsed.\n// - \"get_login_creds\" permission to a web page. That means that the target is\n//   allowed to get the credentials saved for the source.\n// Only HTTPS URLs are taken into account.\nclass AssetLinkData {\n public:\n  AssetLinkData();\n  AssetLinkData(AssetLinkData&amp;&amp; other) noexcept;\n  ~AssetLinkData();\n\n  AssetLinkData&amp; operator=(AssetLinkData&amp;&amp; other);\n\n  bool Parse(const std::string&amp; data);\n\n  const std::vector&lt;GURL&gt;&amp; includes() const { return includes_; }\n  const std::vector&lt;GURL&gt;&amp; targets() const { return targets_; }\n\n private:\n  std::vector&lt;GURL&gt; includes_;\n  std::vector&lt;GURL&gt; targets_;\n\n  DISALLOW_COPY_AND_ASSIGN(AssetLinkData);\n};\n\n}  // namespace password_manager\n#endif  // COMPONENTS_PASSWORD_MANAGER_CORE_BROWSER_SITE_AFFILIATION_ASSET_LINK_DATA_H_\n</code></pre>\n</hr></hr>", "Tags": "<c++><gcc>", "OwnerUserId": "8856921", "AnswerCount": "1"}, "bq_ids": {"n4140": {"so_47018465_47018614_0": {"section_id": 3271, "quality": 0.5714285714285714, "length": 4}}, "n3337": {"so_47018465_47018614_0": {"section_id": 3143, "quality": 0.5714285714285714, "length": 4}}, "n4659": {"so_47018465_47018614_0": {"section_id": 4029, "quality": 0.5714285714285714, "length": 4}}}, "47018614": {"ParentId": "47018465", "PostTypeId": "2", "CommentCount": "5", "Body": "<p>The error message is pretty clear:</p>\n<blockquote>\n<p id=\"so_47018465_47018614_0\">defaulted on its redeclaration with an exception-specification that differs from the implicit declaration</p>\n</blockquote>\n<p>You have asked for the compiler to go ahead and define the constructor the way it was going to anyway, but you have <em>also</em> asked for the constructor to be <code>noexcept</code> ... and the default created constructor is not <code>noexcept</code></p>\n<p>To fix this, you either need to remove the <code>noexcept</code> specifier:</p>\n<pre><code>AssetLinkData::AssetLinkData(AssetLinkData&amp;&amp; other) = default;\n</code></pre>\n<p>or, if you want a no-except specifier, you need to crank it out by hand the old-fashioned way:</p>\n<pre><code>AssetLinkData::AssetLinkData(AssetLinkData&amp;&amp; other) noexcept\n: includes_(std::move(other.includes_))\n, targets_ (std::move(other.targets_ ))\n{}\n</code></pre>\n", "OwnerUserId": "771073", "LastEditorUserId": "771073", "LastEditDate": "2017-10-30T16:24:58.403", "Id": "47018614", "Score": "1", "CreationDate": "2017-10-30T15:11:20.860", "LastActivityDate": "2017-10-30T16:24:58.403"}});