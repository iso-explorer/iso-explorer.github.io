post_cb({"8718857": {"ParentId": "8718643", "PostTypeId": "2", "CommentCount": "4", "Body": "<p>You can't access a local class out of its enclosing scope even if you friend things becuase <code>The name of a local class is local to its enclosing scope</code> - \u00a79.8/1.</p>\n<hr>\n<p>However if you just want to get it to compile, explicitly tell it it look in global scope...</p>\n<pre><code>friend void ::bar();\n</code></pre>\n<p>*This fixes it in VS but not in GCC for some reason</p>\n<p>\u00a711.3/11 (thanks jrok)</p>\n<blockquote>\n<p id=\"so_8718643_8718857_0\">If a friend declaration appears in a local class (9.8) and the name specified is an unqualified name, a prior\n  declaration is looked up without considering scopes that are outside the innermost enclosing non-class scope.</p>\n</blockquote>\n</hr>", "OwnerUserId": "369872", "LastEditorUserId": "369872", "LastEditDate": "2012-01-03T22:06:50.943", "Id": "8718857", "Score": "2", "CreationDate": "2012-01-03T21:26:47.937", "LastActivityDate": "2012-01-03T22:06:50.943"}, "8718643": {"CommentCount": "3", "ViewCount": "303", "PostTypeId": "1", "LastEditorUserId": "90527", "CreationDate": "2012-01-03T21:09:57.637", "LastActivityDate": "2012-01-03T22:06:50.943", "Title": "Name lookup of friend function in local class", "LastEditDate": "2012-01-03T21:54:58.737", "Id": "8718643", "Score": "2", "Body": "<p>Compiling the following:</p>\n<pre><code>void bar() { /* ... */ }\n\nvoid foo()\n{\n    struct MyStruct\n    {\n        friend void bar();\n    };\n}\n\nint main()\n{\n    //..\n}\n</code></pre>\n<p>results in the error:</p>\n<blockquote>\n<p id=\"so_8718643_8718643_0\">error: friend declaration 'void bar()' in local class without prior declaration</p>\n</blockquote>\n<p>Why does name lookup fail? How can I fix it?</p>\n", "Tags": "<c++><name-lookup>", "OwnerUserId": "1086635", "AnswerCount": "1"}, "bq_ids": {"n4140": {"so_8718643_8718857_0": {"section_id": 6694, "quality": 1.0, "length": 19}, "so_8718643_8718643_0": {"section_id": 6694, "quality": 0.6666666666666666, "length": 6}}, "n3337": {"so_8718643_8718857_0": {"section_id": 6449, "quality": 1.0, "length": 19}, "so_8718643_8718643_0": {"section_id": 6449, "quality": 0.6666666666666666, "length": 6}}, "n4659": {"so_8718643_8718857_0": {"section_id": 8169, "quality": 1.0, "length": 19}, "so_8718643_8718643_0": {"section_id": 8169, "quality": 0.6666666666666666, "length": 6}}}});