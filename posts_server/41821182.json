post_cb({"41822734": {"ParentId": "41821182", "CommentCount": "0", "Body": "<p>This is an example of perfectly valid C code, that is not valid C++. Implicit type conversion of <code>void*</code> to any pointer type (and back) is explicitly allowed by the C standard.</p>\n<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.2.3p1\" rel=\"nofollow noreferrer\"><strong>\u00a76.3.2.3 \u00b6 2</strong></a>:</p>\n<blockquote>\n<p id=\"so_41821182_41822734_0\">A pointer to void may be converted to or from a pointer to any object type. A pointer to any object type may be converted to a pointer to void and back again; the result shall compare equal to the original pointer.</p>\n</blockquote>\n<p>But C++ only allows it in the direction of <code>void*</code>:</p>\n<p><a href=\"http://eel.is/c++draft/conv.ptr#2\" rel=\"nofollow noreferrer\"><strong>\u00a74.11 \u00b6 2</strong></a>:</p>\n<blockquote>\n<p id=\"so_41821182_41822734_1\">A prvalue of type \u201cpointer to cv T\u201d, where T is an object type, can be converted to a prvalue of type \u201cpointer to cv void\u201d. The pointer value ([basic.compound]) is unchanged by this conversion.</p>\n</blockquote>\n<p>The other direction is possible only with a cast.</p>\n", "OwnerUserId": "817643", "PostTypeId": "2", "Id": "41822734", "Score": "1", "CreationDate": "2017-01-24T07:48:44.737", "LastActivityDate": "2017-01-24T07:48:44.737"}, "41821182": {"CommentCount": "6", "ViewCount": "91", "PostTypeId": "1", "LastEditorUserId": "-1", "CreationDate": "2017-01-24T06:11:18.980", "LastActivityDate": "2017-01-24T07:48:44.737", "Title": "C function conversion to c++", "AcceptedAnswerId": "41821308", "LastEditDate": "2017-05-23T10:29:17.767", "Id": "41821182", "Score": "0", "Body": "<p>I am experiencing a problem with C language while I am trying to adapt a callback written in C to C++. Compiler shows the following error:</p>\n<pre><code>error C2664: 'fread' : cannot convert parameter 4 from 'void *' to 'FILE*'\n1&gt;Conversion from 'void*' to pointer to non-'void' requires an explicit cast\n</code></pre>\n<p>I found that this<code>size_t retcode = fread(ptr, size, nmemb, stream)</code>\nneeds a <a href=\"https://stackoverflow.com/questions/11475624/conversion-from-void-to-pointer-to-non-void-requires-an-explicit-cast-line\">cast</a>. I've tried, but nothing works. Here is the code:</p>\n<pre><code>static size_t read_callback(void *ptr, size_t size, size_t nmemb, void *stream)\n{\n    curl_off_t nread;\n    size_t retcode = fread(ptr, size, nmemb, stream);\n    nread = (curl_off_t)retcode;\n    fprintf(stderr, \"*** We read %\" CURL_FORMAT_CURL_OFF_T\n            \" bytes from file\\n\", nread);\n    return retcode;\n}\n</code></pre>\n", "Tags": "<c++><c><libcurl>", "OwnerUserId": "7457694", "AnswerCount": "2"}, "bq_ids": {"n4140": {"so_41821182_41822734_0": {"section_id": 6039, "quality": 0.6190476190476191, "length": 13}, "so_41821182_41822734_1": {"section_id": 40, "quality": 0.7777777777777778, "length": 14}}, "n3337": {"so_41821182_41822734_0": {"section_id": 5807, "quality": 0.6190476190476191, "length": 13}, "so_41821182_41822734_1": {"section_id": 37, "quality": 0.7777777777777778, "length": 14}}, "n4659": {"so_41821182_41822734_0": {"section_id": 7548, "quality": 0.5238095238095238, "length": 11}, "so_41821182_41822734_1": {"section_id": 40, "quality": 0.8888888888888888, "length": 16}}}, "41821308": {"ParentId": "41821182", "CommentCount": "0", "Body": "<pre><code>fread(ptr, size, nmemb, static_cast&lt;FILE*&gt;(stream))\n</code></pre>\n", "OwnerUserId": "4323", "PostTypeId": "2", "Id": "41821308", "Score": "2", "CreationDate": "2017-01-24T06:20:06.347", "LastActivityDate": "2017-01-24T06:20:06.347"}});