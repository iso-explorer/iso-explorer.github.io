post_cb({"43354670": {"Id": "43354670", "PostTypeId": "2", "Body": "<p>Yes, this is guaranteed to work.</p>\n<p>[12.2/4-5]</p>\n<blockquote>\n<p id=\"so_43354360_43354670_0\">There are two contexts in which temporaries are destroyed at a different point than the end of the full-expression. ...</p>\n<p id=\"so_43354360_43354670_1\">The second context is when a reference is bound to a temporary.  The temporary to which the reference is bound or the temporary that is the complete object of a subobject to which the reference is bound persists for the lifetime of the reference except:</p>\n<ul>\n<li><p id=\"so_43354360_43354670_2\">A temporary object bound to a reference parameter in a function call persists until the completion of the full-expression containing the call.</p></li>\n<li><p id=\"so_43354360_43354670_3\">The lifetime of a temporary bound to the returned value in a function return statement is not extended; the temporary is destroyed at the end of the full-expression in the return statement.</p></li>\n<li><p id=\"so_43354360_43354670_4\">A temporary bound to a reference in a <em>new-initializer</em> persists until the completion of the full-expression containing the <em>new-initializer</em>.</p></li>\n</ul>\n</blockquote>\n<p>No constructor or <code>operator=</code> is called to initialize <code>a</code>, and <code>a</code> is not <code>const</code> if it doesn't need to be.</p>\n", "LastActivityDate": "2017-04-11T19:30:31.353", "CommentCount": "0", "CreationDate": "2017-04-11T19:30:31.353", "ParentId": "43354360", "Score": "1", "OwnerUserId": "459640"}, "bq_ids": {"n4140": {"so_43354360_43354683_0": {"length": 37, "quality": 0.6607142857142857, "section_id": 382}, "so_43354360_43354670_0": {"length": 10, "quality": 1.0, "section_id": 381}, "so_43354360_43354670_4": {"length": 10, "quality": 1.0, "section_id": 382}, "so_43354360_43354670_3": {"length": 15, "quality": 0.9375, "section_id": 382}, "so_43354360_43354670_2": {"length": 13, "quality": 1.0, "section_id": 382}, "so_43354360_43354670_1": {"length": 19, "quality": 0.9047619047619048, "section_id": 382}}, "n3337": {"so_43354360_43354683_0": {"length": 37, "quality": 0.6607142857142857, "section_id": 373}, "so_43354360_43354670_0": {"length": 10, "quality": 1.0, "section_id": 372}, "so_43354360_43354670_1": {"length": 19, "quality": 0.9047619047619048, "section_id": 373}, "so_43354360_43354670_3": {"length": 15, "quality": 0.9375, "section_id": 373}, "so_43354360_43354670_2": {"length": 13, "quality": 1.0, "section_id": 373}, "so_43354360_43354670_4": {"length": 10, "quality": 1.0, "section_id": 373}}, "n4659": {"so_43354360_43354683_0": {"length": 39, "quality": 0.6964285714285714, "section_id": 397}, "so_43354360_43354670_0": {"length": 9, "quality": 0.9, "section_id": 396}, "so_43354360_43354670_4": {"length": 10, "quality": 1.0, "section_id": 397}, "so_43354360_43354670_3": {"length": 15, "quality": 0.9375, "section_id": 397}, "so_43354360_43354670_2": {"length": 13, "quality": 1.0, "section_id": 397}, "so_43354360_43354670_1": {"length": 18, "quality": 0.8571428571428571, "section_id": 397}}}, "43354683": {"Id": "43354683", "PostTypeId": "2", "Body": "<p>The rule is in [class.temporary]:</p>\n<blockquote>\n<p id=\"so_43354360_43354683_0\">There are three contexts in which temporaries are destroyed at a different point than the end of the full-expression. [...] The third context is when a reference is bound to a temporary.116 The temporary to which the reference is\n  bound or the temporary that is the complete object of a subobject to which the reference is bound <strong>persists for the lifetime of the reference</strong> except:<br>\n  \u2014 A temporary object bound to a reference parameter in a function call (5.2.2) [...]<br>\n  \u2014 The lifetime of a temporary bound to the returned value in a function return statement (6.6.3) is [...]<br>\n  \u2014 A temporary bound to a reference in a new-initializer (5.3.4) persists until [...]</br></br></br></p>\n</blockquote>\n<p>In this example:</p>\n<pre><code>auto &amp;&amp; a = a_function_returning_a_temp_rvalue();\n</code></pre>\n<p>I'm assuming the function returns something of type <code>T</code> (as opposed to <code>T&amp;</code> or <code>T&amp;&amp;</code>). In this case, we do have a temporary bound to a reference, and none of those exceptions apply. Hence, the lifetime of that temporary is extended for the lifetime of <code>a</code>. </p>\n", "LastActivityDate": "2017-04-11T19:31:20.193", "CommentCount": "0", "CreationDate": "2017-04-11T19:31:20.193", "ParentId": "43354360", "Score": "2", "OwnerUserId": "2069064"}, "43354360": {"ViewCount": "51", "Body": "<p>Suppose you have this code (in c++14) :</p>\n<pre><code>auto &amp;&amp; a = a_function_returning_a_temp_rvalue();\n</code></pre>\n<p>Where is stored the returned value, when is its destructor called, is <code>a</code> <code>const</code> (considering the function doesn't return a <code>const</code> ), how is it specified in the standard ?\n(is it even legal)</p>\n<p>Also, do you confirm, the temporary is really bound to <code>a</code>, and no <code>operator=</code> neither constructors will be called ?</p>\n<p>It compiles on g++ and avoid typing long template classes, but before using it, I would like to check if it's clearly stated in c++14</p>\n", "AcceptedAnswerId": "43354670", "Title": "Lifetime of temporary rvalue referenced object", "CreationDate": "2017-04-11T19:10:26.287", "Id": "43354360", "CommentCount": "2", "LastEditDate": "2017-04-11T19:31:28.247", "PostTypeId": "1", "LastEditorUserId": "2069064", "LastActivityDate": "2017-04-11T19:31:28.247", "Score": "0", "OwnerUserId": "1745291", "Tags": "<c++><c++14><language-lawyer>", "AnswerCount": "2"}});