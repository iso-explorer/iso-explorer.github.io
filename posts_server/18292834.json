post_cb({"18293358": {"ParentId": "18292834", "CommentCount": "0", "Body": "<p>You just tried to copy some code without understanding what was going on.</p>\n<p>It looks like you saw a code like this :</p>\n<pre><code>#include &lt;QtGui&gt;\n#include &lt;QWidget&gt;\n\nclass MyWidget : public QWidget\n{\n    Q_OBJECT\npublic:\n\nprotected:\n    void paintEvent(QPaintEvent *event)\n    {\n        //create a QPainter and pass a pointer to the device.\n        //A paint device can be a QWidget, a QPixmap or a QImage\n        QPainter painter(this);   // &lt;- Look at this !!\n        //               ^^^^ Allowed    \n\n        // ...\n    }\n\nsignals:\n\npublic slots:\n\n};\n\nint main( int argc, char **argv )\n{\n    QApplication app( argc, argv );\n\n    MyWidget myWidget;\n    myWidget.show();\n\n    return app.exec();\n}\n</code></pre>\n<p>Here you can see that in the function paintEvent of the <code>class</code> <code>MyWidget</code> we use the <code>this</code> pointer. We can because we use it in a non-static member of the class. Here <code>this</code> is of type <code>MyWidget*</code>.</p>\n<p>Look at the standard :</p>\n<blockquote>\n<p id=\"so_18292834_18293358_0\"><strong>9.3.2 The this pointer [class.this]</strong></p>\n<p id=\"so_18292834_18293358_1\">In the <strong>body of a non-static member function</strong>, the keyword <code>this</code> is a prvalue expression whose value is the address of the object for which the function is called. The type of this in a member function of a class X is X*.</p>\n</blockquote>\n<p>So you cannot use the <code>this</code> pointer inside the <code>main</code> function, this is no sense.</p>\n<p>And other thing, like it is said in the comment inside the code, you just have to pass a pointer to a device to the <code>QPainter</code> constructor. It can be a <code>QWidget</code>, a <code>QPixmap</code> or a <code>QImage</code>.</p>\n<p>Maybe you should read this for a beginning : <a href=\"http://www.cplusplus.com/doc/tutorial/classes/\" rel=\"nofollow\">http://www.cplusplus.com/doc/tutorial/classes/</a></p>\n", "OwnerUserId": "1394283", "PostTypeId": "2", "Id": "18293358", "Score": "1", "CreationDate": "2013-08-17T21:06:11.210", "LastActivityDate": "2013-08-17T21:06:11.210"}, "18292834": {"CommentCount": "3", "ViewCount": "4902", "PostTypeId": "1", "LastEditorUserId": "5047627", "CreationDate": "2013-08-17T20:04:29.503", "LastActivityDate": "2015-08-10T06:54:18.420", "Title": "Invalid use of 'this' in non-member", "FavoriteCount": "0", "LastEditDate": "2015-08-10T06:54:18.420", "Id": "18292834", "Score": "-7", "Body": "<p>I have a problem - discussed a lot previously, but all solutions I saw doesn't work here. \nWhat is wrong in this code?</p>\n<p><code>main.cpp:8:19: error: invalid use of \u2018this\u2019 in non-member function</code></p>\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QPainter&gt;\n#include &lt;math.h&gt;\nclass QPainter;\n\nint main(int argc, char *argv[]){\n  QApplication app(argc,argv);\n\n  QPainter painter(this);\n  painter.setPen(QPen(Qt::black,3));\n\n  int n=8;\n  for (int i=0;i&lt;n;++i){\n    qreal fAngle=2*3.14*i/n;\n    qreal x = 50 + cos(fAngle)*40;\n    qreal y = 50 + sin(fAngle)*40;\n    painter.drawPoint(QPointF(x,y));\n  }\n\n\n  return app.exec();    \n}\n</code></pre>\n", "Tags": "<c++><this><qpainter>", "OwnerUserId": "2692713", "AnswerCount": "4"}, "18293197": {"ParentId": "18292834", "CommentCount": "0", "Body": "<p>In the function \"main\" you are using the reserved keyword \"this\" which means \"address of the current object\". main is a function and not a member of any class or object that would have a \"this\" variable. I know nothing about qt but 5 seconds with google tells me that \"QPainter\" wants the address of a QPaintDevice.</p>\n<p><a href=\"http://qt-project.org/doc/qt-5.0/qtgui/qpainter.html#QPainter\" rel=\"nofollow\">http://qt-project.org/doc/qt-5.0/qtgui/qpainter.html#QPainter</a></p>\n", "OwnerUserId": "257645", "PostTypeId": "2", "Id": "18293197", "Score": "4", "CreationDate": "2013-08-17T20:46:52.430", "LastActivityDate": "2013-08-17T20:46:52.430"}, "18292875": {"ParentId": "18292834", "CommentCount": "0", "Body": "<p>If you are talking about QPainter painter(this); you are using the this pointer in main. The this pointer is for member functions of an object. Your main function doesn't have a this pointer to use.</p>\n", "OwnerUserId": "2691215", "PostTypeId": "2", "Id": "18292875", "Score": "2", "CreationDate": "2013-08-17T20:09:26.160", "LastActivityDate": "2013-08-17T20:09:26.160"}, "bq_ids": {"n4140": {"so_18292834_18293358_1": {"section_id": 5895, "quality": 0.9444444444444444, "length": 17}}, "n3337": {"so_18292834_18293358_1": {"section_id": 5666, "quality": 0.9444444444444444, "length": 17}}, "n4659": {"so_18292834_18293358_1": {"section_id": 7378, "quality": 0.9444444444444444, "length": 17}}}, "18292954": {"ParentId": "18292834", "CommentCount": "0", "Body": "<p>In Qt you need to create a window (inheriting from <code>QWidget</code>) before you can see anything on the screen. You then create a <code>QPainter</code> object inside the <code>paintEvent</code> method of your window and there you will have the proper <code>this</code> to pass to <code>QPainter</code> constructor.</p>\n<p>You're highly encouraged to follow some tutorial. Qt is fantastic, but it's huge and it's not a library, but a framework (like most other GUIs).</p>\n<p>Your code must be structured in a quite specific way.</p>\n", "OwnerUserId": "320726", "PostTypeId": "2", "Id": "18292954", "Score": "1", "CreationDate": "2013-08-17T20:18:31.650", "LastActivityDate": "2013-08-17T20:18:31.650"}});