post_cb({"36320008": {"CommentCount": "0", "ViewCount": "2184", "PostTypeId": "1", "LastEditorUserId": "596781", "CreationDate": "2016-03-30T21:22:26.163", "LastActivityDate": "2016-03-30T21:56:18.297", "Title": "What's the default value for a std::atomic?", "AcceptedAnswerId": "36320050", "LastEditDate": "2016-03-30T21:56:18.297", "Id": "36320008", "Score": "4", "Body": "<p>I find that in practice, with a variety of C++11/C++14 compilers, a <code>std::atomic</code> has an undefined initial value just as it would if it were a \"raw\" type. That is, we expect that for the expression</p>\n<pre><code>int a;\n</code></pre>\n<p><code>a</code> may have any value. It also turns out to be true that for the expression</p>\n<pre><code>std::atomic&lt; int &gt; b;\n</code></pre>\n<p><code>b</code> may also have any value. To say it another way,</p>\n<pre><code>std::atomic&lt; int &gt; b;         // b is undefined\n</code></pre>\n<p>is not equivalent to</p>\n<pre><code>std::atomic&lt; int &gt; b{ 0 };    // b == 0\n</code></pre>\n<p>or to</p>\n<pre><code>std::atomic&lt; int &gt; b{};       // b == 0\n</code></pre>\n<p>because in the latter two cases <code>b</code> is initialized to a known value.</p>\n<p>My question is simple: where in the C++11 or C++14 spec is this behavior documented?</p>\n", "Tags": "<c++><c++11><initialization><c++14><atomic>", "OwnerUserId": "358475", "AnswerCount": "2"}, "36320050": {"ParentId": "36320008", "CommentCount": "0", "Body": "<p>[atomics.types.generic]/5 says this about integral specializations:</p>\n<blockquote>\n<p id=\"so_36320008_36320050_0\">The atomic integral specializations and the specialization atomic shall have standard layout. They shall each have a <strong>trivial default constructor</strong> and a trivial destructor. They shall each support aggregate\n  initialization syntax.</p>\n</blockquote>\n<p>Moreover, the primary template synopsis at the beginning of the same section normatively specifies the default constructor as:</p>\n<blockquote id=\"so_36320008_36320050_1\">\n<pre><code>atomic() noexcept = default;\n</code></pre>\n</blockquote>\n<p>The effects are defined in [atomic.types.operations]/4 as:</p>\n<blockquote>\n<p id=\"so_36320008_36320050_2\"><em>Effects</em>: leaves the atomic object in an uninitialized state.</p>\n</blockquote>\n", "OwnerUserId": "596781", "PostTypeId": "2", "Id": "36320050", "Score": "6", "CreationDate": "2016-03-30T21:26:42.977", "LastActivityDate": "2016-03-30T21:26:42.977"}, "bq_ids": {"n4140": {"so_36320008_36320050_0": {"section_id": 1169, "quality": 0.9090909090909091, "length": 20}, "so_36320008_36320067_1": {"section_id": 1183, "quality": 0.6153846153846154, "length": 8}, "so_36320008_36320050_2": {"section_id": 1183, "quality": 0.8333333333333334, "length": 5}}, "n3337": {"so_36320008_36320067_1": {"section_id": 1181, "quality": 0.6153846153846154, "length": 8}, "so_36320008_36320050_2": {"section_id": 1181, "quality": 0.8333333333333334, "length": 5}, "so_36320008_36320050_0": {"section_id": 1167, "quality": 0.9090909090909091, "length": 20}}, "n4659": {"so_36320008_36320067_1": {"section_id": 1264, "quality": 0.5384615384615384, "length": 7}, "so_36320008_36320050_2": {"section_id": 1264, "quality": 0.6666666666666666, "length": 4}}}, "36320067": {"ParentId": "36320008", "CommentCount": "1", "Body": "<p>\u00a7 29.6.5 [atomics.types.operations.req] \u00b6 4 of N 4140 (the final draft for C++14) says:</p>\n<blockquote>\n<p id=\"so_36320008_36320067_0\"><code>A ::A () noexcept = default;</code></p>\n<p id=\"so_36320008_36320067_1\"><em>Effects:</em> leaves the atomic object in an uninitialized state. [ <em>Note:</em> These semantics ensure compatibility with C. \u2014 <em>end note</em> ]</p>\n</blockquote>\n<p>Note that this doesn't mean that the object wraps an unspecified value that you can read but not depend on its value. Rather, it means that reading the value out of the object before assigning to it results in undefined behavior.</p>\n", "OwnerUserId": "1392132", "PostTypeId": "2", "Id": "36320067", "Score": "4", "CreationDate": "2016-03-30T21:28:05.377", "LastActivityDate": "2016-03-30T21:28:05.377"}});