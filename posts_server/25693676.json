post_cb({"25693792": {"ParentId": "25693676", "PostTypeId": "2", "CommentCount": "3", "Body": "<p>I <em>think</em> this runs into \u00a77.1.6.4 [dcl.spec.auto]/p11:</p>\n<blockquote>\n<p id=\"so_25693676_25693792_0\">If the type of an entity with an undeduced placeholder type is needed\n  to determine the type of an expression, the program is ill-formed.</p>\n</blockquote>\n<p>You need the type of <code>terminal</code> to determine the type of the <em>id-expression</em> <code>terminal</code> in  <code>return terminal(func(term));</code> (edited, hat tip @Richard Smith), but at the point of that expression you can't deduce the type of <code>terminal</code> yet.</p>\n", "OwnerUserId": "2756719", "LastEditorUserId": "2756719", "LastEditDate": "2014-09-05T21:53:30.990", "Id": "25693792", "Score": "15", "CreationDate": "2014-09-05T20:49:43.870", "LastActivityDate": "2014-09-05T21:53:30.990"}, "bq_ids": {"n4140": {"so_25693676_25693792_0": {"section_id": 5455, "quality": 1.0, "length": 10}}, "n3337": {"so_25693676_25693792_0": {"section_id": 3191, "quality": 0.6, "length": 6}}, "n4659": {"so_25693676_25693792_0": {"section_id": 6881, "quality": 1.0, "length": 10}}}, "25693676": {"CommentCount": "12", "AcceptedAnswerId": "25693792", "PostTypeId": "1", "LastEditorUserId": "34509", "CreationDate": "2014-09-05T20:39:01.960", "LastActivityDate": "2014-09-08T17:43:17.027", "LastEditDate": "2014-09-08T17:43:17.027", "ViewCount": "1159", "FavoriteCount": "3", "Title": "\"auto\" variable used in lambda in its own initializer", "Id": "25693676", "Score": "33", "Body": "<p>Today I found this code</p>\n<pre><code>#include &lt;cstdio&gt;\n\nauto terminal = [](auto term)           \n{                                       \n    return [=] (auto func)             \n    {                                   \n        return terminal(func(term));\n    };\n};\n</code></pre>\n<p>Surprisingly, <a href=\"http://coliru.stacked-crooked.com/a/fac935303911dceb\" rel=\"noreferrer\">GCC accepts it</a>. Clang rejects it because it uses <code>terminal</code> in its own intializer and is declared <code>auto</code>. </p>\n<p>I was expecting the error that clang gave, but is it actually ill-formed? Or must the code be accepted?</p>\n", "Tags": "<c++><lambda><auto><c++14>", "OwnerUserId": "34509", "AnswerCount": "1"}});