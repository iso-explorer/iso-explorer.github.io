post_cb({"25544460": {"CommentCount": "0", "ViewCount": "115", "CreationDate": "2014-08-28T08:42:41.403", "LastActivityDate": "2014-08-28T08:50:46.123", "Title": "Return private static member of a class", "AcceptedAnswerId": "25544511", "PostTypeId": "1", "Id": "25544460", "Score": "3", "Body": "<p>I'm trying to follow <a href=\"http://www.agiledeveloper.com/articles/UTCPP.pdf\" rel=\"nofollow\">this</a> example on the net that leads me on the following code:</p>\n<p>EquipmentCollection.h (header file)</p>\n<pre><code>#ifndef EQUIMENTCOLLECTION_H_\n#define EQUIMENTCOLLECTION_H_\n\n#include \"Equipment.h\"\n#include &lt;vector&gt;\n\nclass EquipmentCollection : public Equipment {\npublic:\n    static void add( Equipment* );\n    static vector&lt;Equipment*&gt;&amp; get();\n    ~EquipmentCollection();\nprivate:\n    static vector&lt;Equipment*&gt;* equipmentList;\n};\n\n#endif /* EQUIMENTCOLLECTION_H_ */\n</code></pre>\n<p>EquipmentCollection.cpp ( source file )</p>\n<pre><code>#include \"EquipmentCollection.h\"\n\nvoid EquipmentCollection::add( Equipment* equipment ) {\n    if( equipmentList == NULL ) {\n        equipmentList = new vector&lt;Equipment*&gt;();\n    }\n\n    equipmentList-&gt;push_back( equipment );\n}\n\nvector&lt;Equipment*&gt;&amp; EquipmentCollection::get() {\n    return *equipmentList;\n}\n\nEquipmentCollection::~EquipmentCollection() {\n    delete( equipmentList );\n}\n</code></pre>\n<p>My error is <code>return *equipmentList;</code> on the source file which gives me <code>undefined reference to \"EquipmentCollection::equipmentList\"</code> error. I don't know why it gives me that error.</p>\n", "Tags": "<c++><static-members><private-members>", "OwnerUserId": "2785929", "AnswerCount": "1"}, "25544511": {"ParentId": "25544460", "PostTypeId": "2", "CommentCount": "4", "Body": "<p>You have not initialized your static member. You should add in your CPP file, the following code:</p>\n<pre><code>vector&lt;Equipment*&gt;* EquipmentCollection::equipmentList = nullptr;\n</code></pre>\n<p>Also your code has other problems:</p>\n<ul>\n<li>You don't create any instance of <code>EquipmentCollection</code>, so your destructor will never be called and equipment will never be freed.</li>\n<li><code>EquipmentCollection::get</code> will have an <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a> if no <code>::add</code> was called before, because of (8.3.2/4 \"References\"):</li>\n</ul>\n<blockquote>\n<p id=\"so_25544460_25544511_0\">Note: in particular, a null reference cannot exist in a well-defined\n  program, because the only way to create such a reference would be to\n  bind it to the \u201cobject\u201d obtained by dereferencing a null pointer,\n  which causes undefined behavior.</p>\n</blockquote>\n", "OwnerUserId": "1076305", "LastEditorUserId": "1076305", "LastEditDate": "2014-08-28T08:50:46.123", "Id": "25544511", "Score": "4", "CreationDate": "2014-08-28T08:45:33.390", "LastActivityDate": "2014-08-28T08:50:46.123"}, "bq_ids": {"n4140": {"so_25544460_25544511_0": {"section_id": 3222, "quality": 0.9090909090909091, "length": 20}}, "n3337": {"so_25544460_25544511_0": {"section_id": 3096, "quality": 0.9545454545454546, "length": 21}}, "n4659": {"so_25544460_25544511_0": {"section_id": 3979, "quality": 0.9090909090909091, "length": 20}}}});