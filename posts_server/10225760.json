post_cb({"bq_ids": {"n4140": {"so_10225760_10225760_2": {"length": 5, "quality": 0.5555555555555556, "section_id": 4689}}, "n3337": {"so_10225760_10225760_2": {"length": 5, "quality": 0.5555555555555556, "section_id": 4498}}}, "10225760": {"ViewCount": "358", "Body": "<p>I'm trying to use Boost::Interprocess but I have some compiler errors when trying to compile with <strong>gcc 4.1.2</strong>. I narrowed the code down and managed to reproduce the problem without boost. The code is:</p>\n<pre><code>#include &lt;iostream&gt;\nstatic const std::size_t offset_type_alignment = 0;\n\ntemplate&lt;class T, class U&gt;\nstruct pointer_to_other;\n\ntemplate&lt;class T, class U, template&lt;class&gt; class Sp&gt;\nstruct pointer_to_other&lt; Sp&lt;T&gt;, U &gt;\n/*144*/{\n   typedef Sp&lt;U&gt; type;\n};\n\ntemplate &lt;class PointedType, class DifferenceType, class OffsetType, std::size_t OffsetAlignment&gt;\nclass offset_ptr\n{\n};\ntemplate &lt;class T, class DifferenceType = std::ptrdiff_t, class OffsetType = std::size_t, std::size_t Alignment = offset_type_alignment&gt;\nclass offset_ptr;\n\n\ntemplate&lt;class T, class T2, class T3, std::size_t A, class U&gt;\n/*158*/struct pointer_to_other&lt;offset_ptr&lt;T, T2, T3, A&gt;, U &gt;\n{\n   typedef offset_ptr&lt;U, T2, T3, A&gt; type;\n};\n\n\ntemplate&lt;class VoidPointer&gt;\nclass message_queue_t\n{\n   typedef VoidPointer                                                 void_pointer;\n/*167*/   typedef typename pointer_to_other&lt;void_pointer, char&gt;::type         char_ptr;\n};\n\nint main()\n{\n/*177*/       message_queue_t&lt; offset_ptr&lt;void, std::ptrdiff_t, std::size_t, offset_type_alignment&gt; &gt; test;\n}\n</code></pre>\n<p>The errors I get:</p>\n<blockquote>\n<p id=\"so_10225760_10225760_0\">.cc: In instantiation of\n  message_queue_t &gt;</p>\n<p id=\"so_10225760_10225760_1\">.cc:177:   instantiated from here</p>\n<p id=\"so_10225760_10225760_2\">.cc:167: error: ambiguous class template\n  instantiation for struct pointer_to_other, char&gt; </p>\n<p id=\"so_10225760_10225760_3\">.cc:144: error:\n  candidates are: struct pointer_to_other, U&gt;</p>\n<p id=\"so_10225760_10225760_4\">.cc:158: error:                 struct\n  pointer_to_other, U&gt;</p>\n<p id=\"so_10225760_10225760_5\">.cc:167: error: invalid use of undefined type\n  \u00e2struct pointer_to_other, char&gt;</p>\n<p id=\"so_10225760_10225760_6\">.cc:140: error: declaration of \u00e2struct\n  pointer_to_other,\n  char&gt;\u00e2</p>\n</blockquote>\n<p>In MSVS, this compiles fine. <a href=\"http://ideone.com/0lRJP\" rel=\"nofollow\">Ideone</a> also compiles fine, but it uses <strong>gcc 4.3.4</strong>.</p>\n<p><strong>Important</strong></p>\n<ul>\n<li>changing the compiler is out of the question</li>\n<li>I know Boost::Interprocess wasn't tested with this version of gcc</li>\n</ul>\n<p>What I'm looking for is a workaround. Any ideas?</p>\n<p>PS - the templates are part of boost, but reduced, so I can't really change them. Is there any way I could change:</p>\n<pre><code> message_queue_t&lt; offset_ptr&lt;void, std::ptrdiff_t, std::size_t, offset_type_alignment&gt; &gt; test;\n</code></pre>\n<p>in order to make it work?</p>\n", "AcceptedAnswerId": "10737599", "Title": "Boost interprocess fails on gcc 4.1.2", "CreationDate": "2012-04-19T10:01:59.810", "Id": "10225760", "CommentCount": "0", "PostTypeId": "1", "LastActivityDate": "2012-05-24T12:34:00.283", "Score": "1", "OwnerUserId": "673730", "Tags": "<c++><templates><gcc>", "AnswerCount": "1"}, "10737599": {"PostTypeId": "2", "Body": "<p>This is a compiler limitation. It's simply not supported. </p>\n", "LastActivityDate": "2012-05-24T12:34:00.283", "Id": "10737599", "CommentCount": "3", "CreationDate": "2012-05-24T12:34:00.283", "ParentId": "10225760", "Score": "1", "OwnerUserId": "673730"}});