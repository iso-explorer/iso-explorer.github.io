post_cb({"5666321": {"CreationDate": "2011-04-14T16:18:47.493", "ViewCount": "9272", "FavoriteCount": "6", "Id": "5666321", "AcceptedAnswerId": "5666342", "Score": "25", "Title": "What is assignment via curly braces called? and can it be controlled?", "CommentCount": "1", "Body": "<p>What is this called?</p>\n<pre><code>Vec3 foo = {1,2,3};\n</code></pre>\n<p>Can it be controlled via an operator or some such? As in can I specify how this should act?</p>\n<p>For instance if I had some complicated class could I use this to assign variables? (Just an exercise in curiosity).</p>\n", "Tags": "<c++>", "OwnerDisplayName": "user245019", "LastActivityDate": "2011-04-14T16:50:20.260", "PostTypeId": "1", "AnswerCount": "1"}, "5666342": {"LastActivityDate": "2011-04-14T16:50:20.260", "CommentCount": "10", "Body": "<p>That is not assignment. That is initialization.</p>\n<p>Such initialization is allowed for aggregate only, that includes POD class. POD means Plain Old Data type.</p>\n<p>Example,</p>\n<pre><code>//this struct is an aggregate (POD class)\nstruct point3D\n{\n   int x;\n   int y;\n   int z;\n};\n\n//since point3D is an aggregate, so we can initialize it as\npoint3D p = {1,2,3};\n</code></pre>\n<p>See the above compiles fine : <a href=\"http://ideone.com/IXcSA\" rel=\"noreferrer\">http://ideone.com/IXcSA</a></p>\n<p>But again consider this:</p>\n<pre><code>//this struct is NOT an aggregate (non-POD class)\nstruct vector3D\n{\n   int x;\n   int y;\n   int z;\n   vector3D(int, int, int){} //user-defined constructor!\n};\n\n//since vector3D is NOT an aggregate, so we CANNOT initialize it as\nvector3D p = {1,2,3}; //error\n</code></pre>\n<p>The above does NOT compile. It gives this error:</p>\n<blockquote>\n<p id=\"so_5666321_5666342_0\">prog.cpp:15: error: braces around initializer for non-aggregate type \u2018vector3D\u2019</p>\n</blockquote>\n<p>See yourself : <a href=\"http://ideone.com/zO58c\" rel=\"noreferrer\">http://ideone.com/zO58c</a></p>\n<p>What is the difference between <code>point3D</code> and <code>vector3D</code>? Just the <code>vector3D</code> has user-defined constructor, and that makes it non-POD. Hence it cannot be initialized using curly braces!</p>\n<hr>\n<h1>What is an aggregate?</h1>\n<p>The Standard says in section \u00a78.5.1/1,</p>\n<blockquote>\n<p id=\"so_5666321_5666342_1\">An aggregate is <strong>an array or a class</strong>\n  (clause 9) with <strong>no user-declared\n  constructors</strong> (12.1), <strong>no private or\n  protected non-static data members</strong>\n  (clause 11), <strong>no base classes</strong> (clause\n  10), and <strong>no virtual functions</strong> (10.3).</p>\n</blockquote>\n<p>And then it says in \u00a78.5.1/2 that,</p>\n<blockquote>\n<p id=\"so_5666321_5666342_2\">When an aggregate is initialized the\n  initializer can contain an\n  initializer-clause consisting of a\n  brace-enclosed, comma-separated list of\n  initializer-clauses for the members of\n  the aggregate, written in increasing\n  subscript or member order. If the\n  aggregate contains subaggregates, this\n  rule applies recursively to the\n  members of the subaggregate.</p>\n</blockquote>\n<pre><code>[Example:\n\nstruct A \n{\n   int x;\n   struct B \n   {\n      int i;\n      int j;\n   } b;\n} a = { 1, { 2, 3 } };\n\ninitializes a.x with 1, a.b.i with 2, a.b.j with 3. ]\n</code></pre>\n</hr>", "CreationDate": "2011-04-14T16:20:47.927", "LastEditDate": "2011-04-14T16:50:20.260", "ParentId": "5666321", "Id": "5666342", "LastEditorUserId": "415784", "PostTypeId": "2", "Score": "38", "OwnerUserId": "415784"}, "bq_ids": {"n4140": {"so_5666321_5666342_1": {"length": 12, "quality": 0.631578947368421, "section_id": 3298}}, "n3337": {"so_5666321_5666342_1": {"length": 12, "quality": 0.631578947368421, "section_id": 3168}}}});