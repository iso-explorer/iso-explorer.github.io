post_cb({"4381020": {"ParentId": "4380934", "CommentCount": "0", "CreationDate": "2010-12-07T20:02:25.597", "OwnerUserId": "14065", "PostTypeId": "2", "Id": "4381020", "Score": "0", "Body": "<p>The iterator only becomes invalidated if the vector has to reallocate more memory.</p>\n<p>To prevent the reallocation of memory pre-allocate all the memory you need with reserve() (assuming you know this size when you allocate the vector).</p>\n<p>The easier solution keep an indirect reference to the member (an index in the array).</p>\n", "LastActivityDate": "2010-12-07T20:02:25.597"}, "4380934": {"CommentCount": "1", "ViewCount": "814", "CreationDate": "2010-12-07T19:50:08.597", "LastActivityDate": "2010-12-07T21:19:40.160", "Title": "How to keep an iterator dereferenceable when its vector is added to?", "PostTypeId": "1", "Id": "4380934", "Score": "1", "Body": "<p>Let's say I have this code:</p>\n<pre><code>std::vector&lt;Object*&gt; objects;\nstd::vector&lt;Object*&gt;::iterator iter;\nfor (iter = objects.begin(); iter != objects.end(); iter++) {\n    if (condition)\n        objects.push_back(new Object());\n}\n</code></pre>\n<p>However, when push_back occurs, <code>iter</code> becomes undereferenceable. Without resetting <code>iter</code>, how do I keep it dereferenceable? If I have to reset it, is there an easy way to do it so iter goes back to where it was before?</p>\n", "Tags": "<c++><vector><iterator><push-back>", "OwnerUserId": "534160", "AnswerCount": "6"}, "4380958": {"ParentId": "4380934", "CommentCount": "0", "CreationDate": "2010-12-07T19:52:35.153", "OwnerUserId": "298661", "PostTypeId": "2", "Id": "4380958", "Score": "0", "Body": "<p>You will have to result to an old fashioned for loop with numerical indices. Either that, or reserve() the vector before the loop runs to guarantee it won't resize.</p>\n<p>Also, raw pointers? Srsly.</p>\n", "LastActivityDate": "2010-12-07T19:52:35.153"}, "4380957": {"ParentId": "4380934", "CommentCount": "0", "CreationDate": "2010-12-07T19:52:24.567", "OwnerUserId": "2101267", "PostTypeId": "2", "Id": "4380957", "Score": "5", "Body": "<p>I would recommend that you simply access it by index. This completely eliminates the issue.</p>\n", "LastActivityDate": "2010-12-07T19:52:24.567"}, "4381174": {"ParentId": "4380934", "CommentCount": "0", "CreationDate": "2010-12-07T20:20:46.243", "OwnerUserId": "529761", "PostTypeId": "2", "Id": "4381174", "Score": "1", "Body": "<p>If you absolutely must use iterators for this:</p>\n<pre><code>std::vector&lt;Object*&gt; objects;\nstd::vector&lt;Object*&gt; newObjects;\nstd::vector&lt;Object*&gt;::iterator iter;\nfor (iter = objects.begin(); iter != objects.end(); ++iter)\n{\n    if (condition)\n    {\n        newObjects.push_back(new Object());\n    }\n}\n\nstd::copy(newObjects.begin(), newObjects.end(), back_inserter&lt;vector&lt;Object*&gt; &gt;(objects));\n</code></pre>\n", "LastActivityDate": "2010-12-07T20:20:46.243"}, "4381276": {"ParentId": "4380934", "CommentCount": "2", "CreationDate": "2010-12-07T20:31:42.053", "OwnerUserId": "534124", "PostTypeId": "2", "Id": "4381276", "Score": "0", "Body": "<p>\u00a723.1/11:</p>\n<blockquote>\n<p id=\"so_4380934_4381276_0\">Unless otherwise specified (either\n  explicitly or by defining a function\n  in terms of other functions), invoking\n  a container member function or passing\n  a container as an argument to a\n  library function shall not invalidate\n  iterators to, or change the values of,\n  objects within that container.</p>\n</blockquote>\n<p>However, it is not explicitly specified, that std::vector::push_back invalidates any iterators.</p>\n", "LastActivityDate": "2010-12-07T20:31:42.053"}, "4381706": {"ParentId": "4380934", "CommentCount": "0", "CreationDate": "2010-12-07T21:19:40.160", "OwnerUserId": "59781", "PostTypeId": "2", "Id": "4381706", "Score": "0", "Body": "<p>As most of the other answers already say, you're probably better accessing the vector by index in this case.</p>\n<p>However, for completeness: <code>std::list</code> iterators don't have this \"problem\". So using <code>list</code> instead of <code>vector</code> is a possible solution.</p>\n", "LastActivityDate": "2010-12-07T21:19:40.160"}, "bq_ids": {"n4140": {"so_4380934_4381276_0": {"section_id": 713, "quality": 0.9615384615384616, "length": 25}}, "n3337": {"so_4380934_4381276_0": {"section_id": 702, "quality": 0.9615384615384616, "length": 25}}, "n4659": {"so_4380934_4381276_0": {"section_id": 742, "quality": 0.9615384615384616, "length": 25}}}});