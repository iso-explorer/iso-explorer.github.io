post_cb({"12764294": {"CommentCount": "0", "AcceptedAnswerId": "12764308", "PostTypeId": "1", "LastEditorUserId": "221061", "CreationDate": "2012-10-06T22:05:17.073", "LastActivityDate": "2012-10-06T22:13:55.123", "LastEditDate": "2012-10-06T22:06:26.510", "ViewCount": "552", "FavoriteCount": "1", "Title": "Lifetime of C++ class members", "Id": "12764294", "Score": "6", "Body": "<p>What is the lifetime of a C++ class member. For example, at which time will the <code>std::fstream</code> of a <code>Foo</code> object be released? When entering the destructor or when leaving the destructor? Is this defined in the C++ standard?</p>\n<pre><code>struct Foo\n{\n    std::fstream mystream;\n    ~Foo()\n    {\n        // wait for thread writing to mystream\n    }\n};\n</code></pre>\n", "Tags": "<c++><raii>", "OwnerUserId": "84349", "AnswerCount": "2"}, "12764352": {"ParentId": "12764294", "CommentCount": "0", "Body": "<p>It's the reverse of construction:</p>\n<blockquote>\n<p id=\"so_12764294_12764352_0\">construction: base classes, data members (<code>mystream</code> constructed here), constructor body</p>\n<p id=\"so_12764294_12764352_1\">destruction: destructor body, data members (<code>mystream</code> destroyed here), base classes</p>\n</blockquote>\n", "OwnerUserId": "906773", "PostTypeId": "2", "Id": "12764352", "Score": "2", "CreationDate": "2012-10-06T22:13:55.123", "LastActivityDate": "2012-10-06T22:13:55.123"}, "12764308": {"ParentId": "12764294", "CommentCount": "0", "Body": "<p>The <code>mystream</code> data member is destroyed during the destruction of the <code>Foo</code> object, <em>after</em> the body of <code>~Foo()</code> is executed.  C++11 \u00a712.4[class.dtor]/8 states:</p>\n<blockquote>\n<p id=\"so_12764294_12764308_0\">After executing the body of the destructor and destroying any automatic objects allocated within the body, a destructor for class <code>X</code> calls the destructors for <code>X</code>'s direct non-variant non-static data members, the destructors for <code>X</code>'s direct base classes and, if <code>X</code> is the type of the most derived class, its destructor calls the destructors for <code>X</code>'s virtual base classes.</p>\n</blockquote>\n<p><code>mystream</code> is a non-variant, non-static data member of <code>Foo</code> (a <em>variant</em> data member is a member of a union; <code>Foo</code> is not a union). </p>\n", "OwnerUserId": "151292", "PostTypeId": "2", "Id": "12764308", "Score": "11", "CreationDate": "2012-10-06T22:08:20.377", "LastActivityDate": "2012-10-06T22:08:20.377"}, "bq_ids": {"n4140": {"so_12764294_12764352_0": {"section_id": 438, "quality": 0.6, "length": 6}, "so_12764294_12764308_0": {"section_id": 404, "quality": 1.0, "length": 34}, "so_12764294_12764352_1": {"section_id": 404, "quality": 0.6, "length": 6}}, "n3337": {"so_12764294_12764352_0": {"section_id": 429, "quality": 0.6, "length": 6}, "so_12764294_12764308_0": {"section_id": 395, "quality": 1.0, "length": 34}, "so_12764294_12764352_1": {"section_id": 395, "quality": 0.6, "length": 6}}, "n4659": {"so_12764294_12764352_0": {"section_id": 458, "quality": 0.6, "length": 6}, "so_12764294_12764308_0": {"section_id": 422, "quality": 1.0, "length": 34}, "so_12764294_12764352_1": {"section_id": 422, "quality": 0.6, "length": 6}}}});