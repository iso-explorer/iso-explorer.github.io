post_cb({"32341278": {"CommentCount": "6", "ViewCount": "96", "CreationDate": "2015-09-01T21:35:50.533", "LastActivityDate": "2015-09-02T07:26:28.423", "Title": "Is there a way avoid having to instantiate a lot of templates in a lot of files?", "PostTypeId": "1", "Id": "32341278", "Score": "1", "Body": "<p>I'm writing cuda kernels that can make use of functors, that are passed as a parameter with templates. For example: </p>\n<pre><code>template&lt;typename Functor&gt; void myKernel(float arg1, float* arg2, Functor f) {\n  // Do stuff that will involve f\n}\n</code></pre>\n<p>These functors are defined in a header file that I include in each cpp file, and for each one I have to instantiate all the kernels with all the functors:</p>\n<pre><code>template&lt;&gt; myKernel&lt;Add&gt;(float, float*, Add)\ntemplate&lt;&gt; myKernel&lt;Sub&gt;(float, float*, Sub)\n</code></pre>\n<p>This is a lot of code duplication, and we have to remember to add a new line for each new functor.\nIs there a way to define all of this once?</p>\n", "Tags": "<c++><templates><cuda><instantiation>", "OwnerUserId": "3669048", "AnswerCount": "2"}, "32341496": {"ParentId": "32341278", "CommentCount": "0", "CreationDate": "2015-09-01T21:54:18.420", "OwnerUserId": "2140271", "PostTypeId": "2", "Id": "32341496", "Score": "0", "Body": "<p>Just add the instanciations in the header file, and you won't have to remember to specify them every time.</p>\n", "LastActivityDate": "2015-09-01T21:54:18.420"}, "bq_ids": {"n4140": {"so_32341278_32346991_0": {"section_id": 259, "quality": 1.0, "length": 17}}, "n3337": {"so_32341278_32346991_0": {"section_id": 250, "quality": 1.0, "length": 17}}, "n4659": {"so_32341278_32346991_0": {"section_id": 266, "quality": 1.0, "length": 17}}}, "32346991": {"ParentId": "32341278", "PostTypeId": "2", "CommentCount": "0", "CreationDate": "2015-09-02T07:26:28.423", "Score": "1", "LastEditorUserId": "-1", "LastEditDate": "2017-05-23T11:52:13.770", "Id": "32346991", "OwnerUserId": "2169853", "Body": "<p>Take a look at <a href=\"https://stackoverflow.com/questions/8130602/using-extern-template-c0x\"><code>extern template declarations.</code></a></p>\n<p>There are some subtle details about extern templates, especially 14.7.2.10: </p>\n<blockquote>\n<p id=\"so_32341278_32346991_0\">Except for inline functions and class template specializations,\n  explicit instantiation declarations have the effect of suppressing the\n  implicit instantiation of the entity to which they refer.</p>\n</blockquote>\n<p>This means that the following will only suppress the instantiation of the non-inline member function f in other translation units, but not for g:</p>\n<pre><code>template&lt;typename T&gt; class A {\npublic:\n     void g() {} // inline member function\n     void f();\n};\n\ntemplate&lt;typename T&gt; void A::f() {} // non-inline\n</code></pre>\n", "LastActivityDate": "2015-09-02T07:26:28.423"}});