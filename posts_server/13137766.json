post_cb({"13138095": {"ParentId": "13137766", "PostTypeId": "2", "CommentCount": "2", "CreationDate": "2012-10-30T11:31:53.717", "Score": "18", "LastEditorUserId": "361535", "LastEditDate": "2012-10-30T11:44:24.293", "Id": "13138095", "OwnerUserId": "361535", "Body": "<p><code>std::string::max_size()</code> calls <code>std::allocator::max_size()</code> under the hood.</p>\n<p>According to the standard, 20.9.6.1.10:</p>\n<blockquote>\n<p id=\"so_13137766_13138095_0\"><code>size_type max_size() const noexcept;</code> </p>\n<p id=\"so_13137766_13138095_1\">Returns: The largest value N for which the call allocate(N,0) might succeed.</p>\n</blockquote>\n<p>(See also: <a href=\"http://en.cppreference.com/w/cpp/memory/allocator/max_size\">allocator::max_size</a>)</p>\n<p>Theoretically, an allocator implementation could be able to work out the maximum size of a chunk of memory it could allocate via a syscall. This would help determine the largest possible size for a string, inside a specific process.</p>\n", "LastActivityDate": "2012-10-30T11:44:24.293"}, "13148317": {"ParentId": "13137766", "PostTypeId": "2", "CommentCount": "3", "CreationDate": "2012-10-30T22:12:16.960", "Score": "0", "LastEditorUserId": "75889", "LastEditDate": "2012-10-31T21:10:59.843", "Id": "13148317", "OwnerUserId": "75889", "Body": "<p>This should also work:</p>\n<pre><code>enum : std::string::size_type {\n    npos     = std::string::size_type(-1),\n    max_size = npos - 1\n};\n</code></pre>\n", "LastActivityDate": "2012-10-31T21:10:59.843"}, "13139088": {"ParentId": "13137766", "CommentCount": "2", "Body": "<p>One reason is that the <code>max_size</code> function isn't very useful at all, and the committee doesn't think it is worth the trouble to try to fix it. So it is just left the way it is, because it is part of the documented interface.</p>\n<p>See library defect report #197:</p>\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3440.html#197\" rel=\"noreferrer\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3440.html#197</a></p>\n<blockquote>\n<p id=\"so_13137766_13139088_0\">max_size() isn't useful for very many things, and the existing wording is sufficiently clear for the few cases that max_size() can be used for. None of the attempts to change the existing wording were an improvement.</p>\n</blockquote>\n", "OwnerUserId": "597607", "PostTypeId": "2", "Id": "13139088", "Score": "21", "CreationDate": "2012-10-30T12:34:23.423", "LastActivityDate": "2012-10-30T12:34:23.423"}, "13137963": {"ParentId": "13137766", "CommentCount": "2", "Body": "<p>The call to <code>max_size()</code> is delegated to the allocator used for the container.</p>\n<p>In theory, a very smart allocator could compute its <code>max_size</code> in runtime, e.g. depending on RAM available.</p>\n", "OwnerUserId": "1345960", "PostTypeId": "2", "Id": "13137963", "Score": "5", "CreationDate": "2012-10-30T11:23:50.997", "LastActivityDate": "2012-10-30T11:23:50.997"}, "bq_ids": {"n4140": {"so_13137766_13138095_1": {"section_id": 4245, "quality": 0.75, "length": 6}, "so_13137766_13138095_0": {"section_id": 1602, "quality": 1.0, "length": 4}}, "n3337": {"so_13137766_13138095_1": {"section_id": 4086, "quality": 0.75, "length": 6}, "so_13137766_13138095_0": {"section_id": 1598, "quality": 1.0, "length": 4}}, "n4659": {"so_13137766_13138095_1": {"section_id": 6403, "quality": 0.625, "length": 5}, "so_13137766_13138095_0": {"section_id": 1754, "quality": 1.0, "length": 4}}}, "13137766": {"CommentCount": "4", "AcceptedAnswerId": "13139088", "CreationDate": "2012-10-30T11:11:59.443", "LastActivityDate": "2012-10-31T21:10:59.843", "PostTypeId": "1", "ViewCount": "2416", "FavoriteCount": "1", "Title": "Why isn't std::string::max_size a compile-time constant?", "Id": "13137766", "Score": "31", "Body": "<p><code>std::string</code> provides a <code>max_size()</code> method to determine the maximum number of elements it can contain.</p>\n<p>However, to work out the maximum length of a string in general, the programmer has to create a (possibly empty) string object.</p>\n<p>If this class doesn't need any information from the programmer, why isn't <code>max_size()</code> available as a compile-time constant ? Is there some kind of runtime information necessary for a string to work out its maximum size ?</p>\n", "Tags": "<c++><string><compile-time-constant>", "OwnerUserId": "361535", "AnswerCount": "4"}});