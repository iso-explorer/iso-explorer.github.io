post_cb({"24558413": {"CommentCount": "5", "AcceptedAnswerId": "24558597", "PostTypeId": "1", "LastEditorUserId": "47453", "CreationDate": "2014-07-03T15:58:01.433", "LastActivityDate": "2015-03-06T20:25:28.023", "LastEditDate": "2014-07-03T16:07:21.740", "ViewCount": "4121", "FavoriteCount": "1", "Title": "Multiple definition of a const char*", "Id": "24558413", "Score": "1", "Body": "<p>I get the above message linker error for a global</p>\n<pre><code>const char* HOST_NAME = \"127.0.0.1\";\n</code></pre>\n<p>I don't think that I have compiled some files twice but here's my definition of the files anyway.</p>\n<h3>main.cpp</h3>\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstring&gt;\n#include &lt;string&gt;\n#include \"connection.hpp\"\n</code></pre>\n<h3>connection.cpp</h3>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstring&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include \"connection.hpp\"\n</code></pre>\n<h3>connection.hpp</h3>\n<pre><code>#ifndef __connection__\n#define __connection__\n#include &lt;unistd.h&gt;\n#include &lt;netinet/in.h&gt;\n\nconst int BUFFSIZE = sysconf(_SC_PAGESIZE);             //Define page size\nconst char* HOST_NAME = \"127.0.0.1\";                    //Local host\n//Definition of a class\n#endif\n</code></pre>\n<p>Any help?</p>\n", "Tags": "<c++><linker-errors><multiple-definition-error>", "OwnerUserId": "1803891", "AnswerCount": "3"}, "24558597": {"ParentId": "24558413", "PostTypeId": "2", "CommentCount": "2", "CreationDate": "2014-07-03T16:07:05.263", "Score": "15", "LastEditorUserId": "2382136", "LastEditDate": "2015-03-06T20:25:28.023", "Id": "24558597", "OwnerUserId": "2382136", "Body": "<p>You use wrong declaration for your string constant. You need to make your string a constant, since constants may be defined in several compilation units. This is why compiler does not report the same error for <code>BUFFISZE</code>: <code>BUFFSIZE</code> is const, so it may be defined several times in different compilation units. But <code>HOST_NAME</code> is not const, so it is reported. <code>HOST_NAME</code> will be const if you change its declaration to </p>\n<pre><code>const char* const HOST_NAME = \"127.0.0.1\"; \n</code></pre>\n<p>Then the error should disappear.</p>\n<hr>\n<blockquote>\n<p id=\"so_24558413_24558597_0\"><code>[C++11: 3.5/3]:</code> <strong>A name having namespace scope</strong> (3.3.6) <strong>has internal linkage if it is the name of</strong></p>\n<ul>\n<li>a variable, function or function template that is explicitly declared <code>static</code>; or,</li>\n<li><strong>a variable that is explicitly declared <code>const</code></strong> or <code>constexpr</code> and neither explicitly declared <code>extern</code> nor previously declared to have external linkage; or</li>\n<li>a data member of an anonymous union.</li>\n</ul>\n</blockquote>\n<p>This effectively makes the constant \"local\" to each translation unit in which it is defined, removing the opportunity for conflict.</p>\n</hr>", "LastActivityDate": "2015-03-06T20:25:28.023"}, "24558503": {"ParentId": "24558413", "PostTypeId": "2", "CommentCount": "5", "CreationDate": "2014-07-03T16:02:29.837", "Score": "3", "LastEditorUserId": "1459779", "LastEditDate": "2014-07-03T16:10:59.397", "Id": "24558503", "OwnerUserId": "2878256", "Body": "<p>You have included \"connection.hpp\" to both connection.cpp and main.cpp. Therefore it (<code>const char* HOST_NAME = \"127.0.0.1\";</code>) is defined in 2 cpp files.</p>\n", "LastActivityDate": "2014-07-03T16:10:59.397"}, "24558618": {"ParentId": "24558413", "PostTypeId": "2", "CommentCount": "0", "Body": "<blockquote>\n<p id=\"so_24558413_24558618_0\">don't think that I have compiled some files twice </p>\n</blockquote>\n<p>Nevertheless that's exactly what happened. You have compiled <code>connection.hpp</code> several times, each time you have <code># include</code>d it into some translation unit.</p>\n<p>Either add <code>static</code> to the declaration, or add <code>extern</code> to it, delete the <code>= somestring</code> portion, and provide a definition in exactly one source file.</p>\n", "OwnerUserId": "775806", "CommunityOwnedDate": "2014-07-03T16:07:47.827", "Id": "24558618", "Score": "2", "CreationDate": "2014-07-03T16:07:47.827", "LastActivityDate": "2014-07-03T16:07:47.827"}, "bq_ids": {"n4140": {"so_24558413_24558597_0": {"section_id": 7136, "quality": 0.7, "length": 7}}, "n3337": {"so_24558413_24558597_0": {"section_id": 6880, "quality": 0.7, "length": 7}}, "n4659": {"so_24558413_24558597_0": {"section_id": 8637, "quality": 0.7, "length": 7}}}});