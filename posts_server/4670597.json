post_cb({"bq_ids": {"n4140": {"so_4670597_4670625_0": {"length": 12, "quality": 0.9230769230769231, "section_id": 532}}, "n3337": {"so_4670597_4670625_0": {"length": 12, "quality": 0.9230769230769231, "section_id": 523}}, "n4659": {"so_4670597_4670625_0": {"length": 12, "quality": 0.9230769230769231, "section_id": 553}}}, "4670597": {"ViewCount": "609", "Body": "<blockquote>\n<p id=\"so_4670597_4670597_0\"><strong>Possible Duplicate:</strong><br>\n<a href=\"https://stackoverflow.com/questions/1262063/c-preprocessor-macro-expansion-to-another-preprocessor-directive\">c++ preprocessor macro expansion to another preprocessor directive</a> </br></p>\n</blockquote>\n<p>My question is very simple: I want to use \"#\" in the macro expansion, for example, to define a marco 'M(X)':</p>\n<pre><code>#define M(X) #ifdef FOO \\ \n              X=1 \\\n             #else \\ \n              X=2\n</code></pre>\n<p>I tried to use '\\' to escape the '#', but the '\\' is interpreted as the newline for macro expansion, and not as the escape character. \nSo how to use '#' in the macro expansion?</p>\n<p>Thanks folks!</p>\n", "Title": "define macro expanded to literal #", "CreationDate": "2011-01-12T15:35:41.840", "Id": "4670597", "CommentCount": "1", "LastEditDate": "2017-05-23T11:55:28.840", "PostTypeId": "1", "LastEditorUserId": "-1", "LastActivityDate": "2011-01-12T15:42:47.010", "Tags": "<c++><c>", "Score": "0", "OwnerUserId": "555951", "ClosedDate": "2011-01-12T16:07:21.940", "AnswerCount": "3"}, "4670695": {"Id": "4670695", "PostTypeId": "2", "Body": "<p>As @Evan points out, macro expansion is done in a single pass, so your example will not work. However, here is an alternative that does what you want, albeit in a few more lines.</p>\n<pre><code>#ifdef FOO\n#define FOOVAL 1\n#else\n#define FOOVAL 2\n#endif\n\n#define M(X) X=FOOVAL\n</code></pre>\n", "LastActivityDate": "2011-01-12T15:42:47.010", "CommentCount": "0", "CreationDate": "2011-01-12T15:42:47.010", "ParentId": "4670597", "Score": "1", "OwnerUserId": "335756"}, "4670625": {"Id": "4670625", "PostTypeId": "2", "Body": "<p>Sorry, but you cannot have a macro emit another macro because the pre-processor is single pass. Also from the c99 standard:</p>\n<p>(6.10.3.4 paragraph 3):</p>\n<blockquote>\n<p id=\"so_4670597_4670625_0\">3 The resulting completely\n  macro-replaced preprocessing token\n  sequence is not processed as a\n  preprocessing directive even if it\n  resembles one, ...</p>\n</blockquote>\n<p>c++ has something similar as well.</p>\n", "LastActivityDate": "2011-01-12T15:37:41.367", "CommentCount": "1", "CreationDate": "2011-01-12T15:37:41.367", "ParentId": "4670597", "Score": "6", "OwnerUserId": "13430"}, "4670656": {"Id": "4670656", "PostTypeId": "2", "Body": "<p>You could do the opposite:</p>\n<pre><code>#ifdef FOO\n    #define M(X) X=1\n#else\n    #define M(X) X=2\n#endif\n</code></pre>\n", "LastActivityDate": "2011-01-12T15:39:13.740", "CommentCount": "2", "CreationDate": "2011-01-12T15:39:13.740", "ParentId": "4670597", "Score": "6", "OwnerUserId": "300805"}});