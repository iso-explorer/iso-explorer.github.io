post_cb({"bq_ids": {"n4140": {"so_27252466_27252746_1": {"length": 21, "quality": 0.7777777777777778, "section_id": 7118}, "so_27252466_27252466_0": {"length": 21, "quality": 0.9545454545454546, "section_id": 5480}, "so_27252466_27252746_0": {"length": 25, "quality": 0.6944444444444444, "section_id": 7117}}, "n3337": {"so_27252466_27252746_1": {"length": 21, "quality": 0.7777777777777778, "section_id": 6862}, "so_27252466_27252466_0": {"length": 21, "quality": 0.9545454545454546, "section_id": 5266}, "so_27252466_27252746_0": {"length": 25, "quality": 0.6944444444444444, "section_id": 6861}}, "n4659": {"so_27252466_27252746_1": {"length": 21, "quality": 0.7777777777777778, "section_id": 8619}, "so_27252466_27252466_0": {"length": 21, "quality": 0.9545454545454546, "section_id": 6914}, "so_27252466_27252746_0": {"length": 25, "quality": 0.6944444444444444, "section_id": 8618}}}, "27252746": {"Id": "27252746", "PostTypeId": "2", "Body": "<p>It looks like this was a <a href=\"http://clang.llvm.org/cxx_dr_status.html#812\" rel=\"nofollow\">pre clang 3.5 bug</a> and there are two defect reports on this <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#812\" rel=\"nofollow\">812</a> and <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#861\" rel=\"nofollow\">861</a>. The resolution is in 861 and adds the following to <code>3.4.3.2</code> <em>[namespace.qual]</em> (<em>emphasis mine going forward</em>):</p>\n<blockquote>\n<p id=\"so_27252466_27252746_0\">For a namespace X and name m, the namespace-qualified lookup set S(X,m) is defined as follows: Let S'(X,m) be the set of all declarations of m in X and the inline namespace set of X (7.3.1 [namespace.def]). If S'(X,m) is not empty, S(X,m) is S'(X,m); otherwise, S(X,m) is the union of S(Ni,m) for all non-inline namespaces Ni nominated by using-directives in X and its inline namespace set.</p>\n</blockquote>\n<p>and the also relevant additions:</p>\n<blockquote>\n<p id=\"so_27252466_27252746_1\">if S(X,m) is the empty set, the program is ill-formed. Otherwise, if S(X,m) has exactly one member, or if the context of the reference is a using-declaration (7.3.3 [namespace.udecl]), S(X,m) is the required set of declarations of m. <strong>Otherwise if the use of m is not one that allows a unique declaration to be chosen from S(X,m), the program is ill-formed.</strong></p>\n</blockquote>\n<p>It looks like the change was added pre C++11, this text is present in <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf\" rel=\"nofollow\">N3337</a>.</p>\n", "LastEditorUserId": "1708801", "LastActivityDate": "2015-01-09T16:42:21.170", "Score": "5", "CreationDate": "2014-12-02T15:16:03.653", "ParentId": "27252466", "CommentCount": "0", "OwnerUserId": "1708801", "LastEditDate": "2015-01-09T16:42:21.170"}, "27252466": {"ViewCount": "127", "Body": "<p>I'm wondering if this is allowed:</p>\n<pre><code>namespace A {\n  inline namespace B {\n    int a;\n  }\n  int a;\n}\n\nvoid foo() {\n  A::a = 0; // clang 3.4 compiles, but gcc doesn't\n}\n</code></pre>\n<p>Standard says, that</p>\n<blockquote>\n<p id=\"so_27252466_27252466_0\">Finally, looking up a name in the enclosing namespace via explicit\n  qualification (3.4.3.2) will include members of the inline namespace\n  brought in by the using-directive even if there are declarations of\n  that name in the enclosing namespace.</p>\n</blockquote>\n<p>But I can't get it.</p>\n", "AcceptedAnswerId": "27252746", "Title": "Inline namespaces and ambigous declarations", "CreationDate": "2014-12-02T15:02:14.470", "Id": "27252466", "CommentCount": "2", "LastEditDate": "2014-12-02T15:36:01.233", "PostTypeId": "1", "LastEditorUserId": "1708801", "LastActivityDate": "2015-01-09T16:42:21.170", "Score": "3", "OwnerUserId": "3120079", "Tags": "<c++><c++11><namespaces><language-lawyer>", "AnswerCount": "1"}});