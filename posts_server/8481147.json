post_cb({"8481147": {"ViewCount": "1197", "Body": "<p>Does the standard have anything to say about an exception that is caught by reference and what happens to attempts to modify it?</p>\n<p>Consider the following code:</p>\n<pre><code>class my_exception: public std::logic_error\n{\npublic:\n    std::vector&lt;std::string&gt; callstack;\n};\n\nvoid MyFunc()\n{\n    try\n    {\n        SomethingThatThrows();\n    }\n    catch (my_exception &amp; e)\n    {\n        e.callstack.push_back(\"MyFunc\");\n        throw;\n    }\n}\n</code></pre>\n<p>This is a contrived example, I'm not actually attempting something like this. I was just curious what would happen, based on the suggestion in another thread that exceptions should be caught by <em>const</em> reference.</p>\n", "AcceptedAnswerId": "8481171", "Title": "If you catch an exception by reference, can you modify it and rethrow?", "CreationDate": "2011-12-12T21:30:57.840", "Id": "8481147", "CommentCount": "2", "FavoriteCount": "5", "PostTypeId": "1", "LastActivityDate": "2011-12-12T21:40:37.070", "Score": "19", "OwnerUserId": "5987", "Tags": "<c++><exception><exception-handling>", "AnswerCount": "2"}, "bq_ids": {"n4140": {"so_8481147_8481171_0": {"length": 9, "quality": 0.6, "section_id": 3362}, "so_8481147_8481171_1": {"length": 15, "quality": 0.6818181818181818, "section_id": 3362}}, "n3337": {"so_8481147_8481171_0": {"length": 15, "quality": 1.0, "section_id": 3232}, "so_8481147_8481171_1": {"length": 22, "quality": 1.0, "section_id": 3232}}, "n4659": {"so_8481147_8481171_0": {"length": 9, "quality": 0.6, "section_id": 4128}, "so_8481147_8481171_1": {"length": 15, "quality": 0.6818181818181818, "section_id": 4128}}}, "8481164": {"Id": "8481164", "PostTypeId": "2", "Body": "<p>Yes, you can do this.</p>\n<p>When you rethrow the current exception using <code>throw;</code>, no copies are made:  the original temporary exception object is rethrown.  Thus, any changes you make to that object in the handler will be present in the exception object when you next catch it.</p>\n", "LastActivityDate": "2011-12-12T21:33:20.977", "CommentCount": "0", "CreationDate": "2011-12-12T21:33:20.977", "ParentId": "8481147", "Score": "10", "OwnerUserId": "151292"}, "8481171": {"Id": "8481171", "PostTypeId": "2", "Body": "<p>The exception will change.</p>\n<p>\u00a715.3[except.handle]/17:</p>\n<blockquote>\n<p id=\"so_8481147_8481171_0\">When the handler declares a non-constant object, any changes to that object will not affect the temporary\n   object that was initialized by execution of the throw-expression. </p>\n<p id=\"so_8481147_8481171_1\">When the handler declares a reference to\n  a non-constant object, any changes to the referenced object are changes to the temporary object initialized\n  when the throw-expression was executed and will have effect should that object be rethrown.</p>\n</blockquote>\n<p>So if <code>my_exception</code> is caught outside of <code>MyFunc</code>, we'll see the <code>\"MyFunc\"</code> entry in the callstack (e.g. <a href=\"http://ideone.com/5ytqN\" rel=\"noreferrer\">http://ideone.com/5ytqN</a>)</p>\n", "LastEditorUserId": "224671", "LastActivityDate": "2011-12-12T21:40:37.070", "Score": "20", "CreationDate": "2011-12-12T21:33:53.643", "ParentId": "8481147", "CommentCount": "0", "OwnerUserId": "224671", "LastEditDate": "2011-12-12T21:40:37.070"}});