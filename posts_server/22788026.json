post_cb({"22788417": {"ParentId": "22788026", "CommentCount": "0", "CreationDate": "2014-04-01T14:08:44.810", "OwnerUserId": "3483514", "PostTypeId": "2", "Id": "22788417", "Score": "4", "Body": "<p>It's probably best to start with what the error means. An \"lvalue\" is something that appears on the left side of an equals sign. What it means is that your argument to the \"address of\" operator (&amp;) must be something that you could assign to. In your case, this isn't syntactically correct:</p>\n<pre><code>(long)u32_Time = 0;\n</code></pre>\n<p>The reason for this restriction is that the &amp; operator returns the address of something that is stored somewhere. (long)u32_Time isn't stored somewhere, but u32_Time is.</p>\n<p>This might have worked ok on more tolerant compilers because it would allocate some space for the long representation of u32_Time and then give you a pointer to that, but I wouldn't count on that working (as can be seen in Linux Server release 6.1).</p>\n<p>To fix this, you can just create a new variable and take it's address instead:</p>\n<pre><code>long long_Time = (long)u32_Time;\nstrftime(AppTime, sizeof(AppTime),\"%Y/%m/%d %T\", localtime(&amp;long_Time));\n</code></pre>\n<p>However, that's still not perfect. localtime expects a time_t pointer, not a long pointer, and while they might be the same on your platform, you'd be better off with:</p>\n<pre><code>time_t time_t_Time = (time_t)u32_Time;\nstrftime(AppTime, sizeof(AppTime),\"%Y/%m/%d %T\", localtime(&amp;time_t_Time));\n</code></pre>\n", "LastActivityDate": "2014-04-01T14:08:44.810"}, "22788099": {"ParentId": "22788026", "PostTypeId": "2", "CommentCount": "0", "CreationDate": "2014-04-01T13:57:17.417", "Score": "11", "LastEditorUserId": "1838266", "LastEditDate": "2014-07-21T09:06:17.503", "Id": "22788099", "OwnerUserId": "1838266", "Body": "<p>The address-operator <code>&amp;</code> requires a variable to take the address from. The result of your cast <code>(long)u32_Time</code> is a temporary that does not necessarily reside in memory and therefore has no address that could be taken. So if that piece of code ever compiled somewhere it was a nonstandard compiler extension.</p>\n<p>The standard, \u00a75.3.1,3 demands:</p>\n<blockquote>\n<p id=\"so_22788026_22788099_0\">The result of the unary &amp; operator is a pointer to its operand. The operand shall be an lvalue [...]</p>\n</blockquote>\n<p><strong>How to fix this:</strong>\n<code>std::localtime</code> expects a pointer to a <code>std::time_t</code> so you best provide that. You did not provide any explanation or further code, so I can only guess that <code>u32_Time</code> is some 4 byte unsigned arithmetic type that is supposed to represent a time in some manner. How that is properly converted into a <code>std::time_t</code> depends on how your compiler implements the latter and how you got the value of the further. Simply applying a C-cast is <em>not</em> portable, and casting to <code>long</code> is even less portable.<br>\n<strong>If, and only if</strong> the <code>std::time_t</code> <em>on your current platform</em> is also a unsigned 32 bit type using the same representation as your <code>u32_Time</code>, it might suffice to use </br></p>\n<pre><code> localtime(reinterpret_cast&lt;std::time_t*&gt;(&amp;u32_Time));\n</code></pre>\n<p>More portable would be storing the value in the correct data type first:</p>\n<pre><code> std::time_t time = u32_Time;\n localtime(&amp;time);\n</code></pre>\n<p>That way you will get the necessary warnings and/or errors if <code>time_t</code> and the type of <code>u32_Time</code> are not compatible.</p>\n<p>I would strongly advice against using C-casts, because once you have to port this piece of code to another platform you will have no means to find that nasty cast easily.</p>\n", "LastActivityDate": "2014-07-21T09:06:17.503"}, "22788026": {"CommentCount": "2", "AcceptedAnswerId": "22788099", "PostTypeId": "1", "LastEditorUserId": "701092", "CreationDate": "2014-04-01T13:54:07.473", "LastActivityDate": "2014-07-21T09:06:17.503", "LastEditDate": "2014-04-01T13:56:28.953", "ViewCount": "15391", "FavoriteCount": "1", "Title": "error: lvalue required as unary & operand", "Id": "22788026", "Score": "4", "Body": "<p>While compiling (with Linux Server release 6.1)</p>\n<pre><code>strftime(AppTime, sizeof(AppTime),\"%Y/%m/%d %T\", localtime(&amp;((long)u32_Time)));\n</code></pre>\n<p>getting  error \"error: lvalue required as unary '&amp;' operand\"</p>\n<p>but the same code compiled successfully with Red Hat Enterprise Linux AS release 3. </p>\n<p>Why so? How to correct this?</p>\n", "Tags": "<c++><linux>", "OwnerUserId": "3107268", "AnswerCount": "2"}, "bq_ids": {"n4140": {"so_22788026_22788099_0": {"section_id": 6066, "quality": 0.8, "length": 8}}, "n3337": {"so_22788026_22788099_0": {"section_id": 5834, "quality": 0.8, "length": 8}}, "n4659": {"so_22788026_22788099_0": {"section_id": 7562, "quality": 0.8, "length": 8}}}});