post_cb({"bq_ids": {"n4140": {"so_20498142_20687366_1": {"length": 8, "quality": 0.5714285714285714, "section_id": 392}}, "n3337": {"so_20498142_20687366_1": {"length": 8, "quality": 0.5714285714285714, "section_id": 383}}, "n4659": {"so_20498142_20687366_1": {"length": 8, "quality": 0.5714285714285714, "section_id": 409}}}, "20997656": {"Id": "20997656", "PostTypeId": "2", "Body": "<p>Brought up in the VS forum:</p>\n<p><a href=\"http://social.msdn.microsoft.com/Forums/vstudio/en-US/af733e56-8045-4553-a9af-6555d02fc2f6/bug-in-vs-2013-support-for-explicit-conversion-operators?forum=visualstudiogeneral\" rel=\"nofollow\">http://social.msdn.microsoft.com/Forums/vstudio/en-US/af733e56-8045-4553-a9af-6555d02fc2f6/bug-in-vs-2013-support-for-explicit-conversion-operators?forum=visualstudiogeneral</a></p>\n<p>And reported it as a bug:</p>\n<p><a href=\"http://connect.microsoft.com/VisualStudio/feedback/details/811334/bug-in-vs-2013-support-for-explicit-conversion-operators\" rel=\"nofollow\">http://connect.microsoft.com/VisualStudio/feedback/details/811334/bug-in-vs-2013-support-for-explicit-conversion-operators</a></p>\n", "LastActivityDate": "2014-01-08T13:53:20.693", "CommentCount": "0", "CreationDate": "2014-01-08T13:53:20.693", "ParentId": "20498142", "Score": "2", "OwnerUserId": "3087318"}, "20687366": {"Id": "20687366", "PostTypeId": "2", "Body": "<p>This is definitely a bug in Visual C++. According to standard:</p>\n<blockquote>\n<p id=\"so_20498142_20687366_0\">12.3.2 Conversion functions [class.conv.fct]</p>\n<p id=\"so_20498142_20687366_1\">2 - A conversion function may be explicit (7.1.2), in which case it is\n  only considered as a user-defined conversion for direct-initialization\n  (8.5) in certain contexts (13.3.1.4, 13.3.1.5, 13.3.1.6).</p>\n</blockquote>\n<p>and there is no direct-initialization in your example.</p>\n<p>Other C++ compilers such as GCC and Clang report an error in this case.</p>\n", "LastActivityDate": "2013-12-19T16:55:49.303", "CommentCount": "0", "CreationDate": "2013-12-19T16:55:49.303", "ParentId": "20498142", "Score": "6", "OwnerUserId": "471164"}, "20498142": {"ViewCount": "1296", "Body": "<p>Consider the following program:</p>\n<pre><code>#include &lt;iostream&gt;\n\nclass A\n{\npublic:\n  A( ) { std::cout &lt;&lt; \"A()\\n\"; }\n\n  A( A&amp; ) = delete;\n\n  A( int i ) { std::cout &lt;&lt; \"A( \" &lt;&lt; i &lt;&lt; \" )\\n\"; }\n\n  explicit operator int( ) { std::cout &lt;&lt; \"operator int()\\n\"; return 42; }\n};\n\ntemplate&lt; typename T = A &gt; void f( T a = A() ) {}\n\nint main( void )\n{\n  f();\n  return 0;\n}\n</code></pre>\n<p>Visual Studio 2013 compiles this code and runs, with output</p>\n<pre><code>A()\noperator int()\nA( 42 )\n</code></pre>\n<p>Is this a compiler bug? It looks like the VS compiler doesn't heed the 'explicit' keyword in this context. From my understanding, VS 2013 wrongly uses operator int() in combination  with A(int) to sort-of 'copy-construct' A as the default parameter for f.</p>\n<p>Both adding</p>\n<pre><code>A a;\nA a1( a );\n</code></pre>\n<p>to main and declaring f as</p>\n<pre><code>void f( A a = A() ) {}\n</code></pre>\n<p>does not compile, VS complains that A(A&amp;) is deleted, which seems to be correct behavior. Only in the context of the function template default parameter the combination of operator int() and A(int) seem to work as a substitution for A( A&amp; ).</p>\n<p>g++ 4.7.3 does not compile the code and complains:</p>\n<pre><code>main.cpp: In function \u2018int main()\u2019:\nmain.cpp:21:7: error: no matching function for call to \u2018A::A(A)\u2019\nmain.cpp:21:7: note: candidates are:\nmain.cpp:10:3: note: A::A(int)\nmain.cpp:10:3: note:   no known conversion for argument 1 from \u2018A\u2019 to \u2018int\u2019\nmain.cpp:6:3: note: A::A()\nmain.cpp:6:3: note:   candidate expects 0 arguments, 1 provided\n</code></pre>\n<p>Removing 'explicit' makes g++ compile the code and the output is the same.</p>\n", "AcceptedAnswerId": "20687366", "Title": "Visual Studio 2013 'explicit' keyword bug?", "CreationDate": "2013-12-10T15:16:30.420", "Id": "20498142", "CommentCount": "13", "FavoriteCount": "4", "PostTypeId": "1", "LastEditDate": "2013-12-10T18:10:04.467", "LastEditorUserId": "3087318", "LastActivityDate": "2014-01-08T13:53:20.693", "Score": "22", "OwnerUserId": "3087318", "Tags": "<c++><visual-studio-2013><explicit-conversion>", "AnswerCount": "2"}});