post_cb({"16585713": {"CommentCount": "3", "AcceptedAnswerId": "16585840", "CreationDate": "2013-05-16T11:01:28.887", "LastActivityDate": "2013-05-16T11:33:38.243", "PostTypeId": "1", "ViewCount": "382", "FavoriteCount": "1", "Title": "C++11 Delete Class Type?", "Id": "16585713", "Score": "13", "Body": "<p>In C++11 N3485 5.3.5.1 it says:</p>\n<blockquote>\n<p id=\"so_16585713_16585713_0\">The operand [of <code>delete</code>] shall be a pointer to object type <strong>or a class type</strong>.  If of class type, the operand is contextually converted to a pointer to object type.</p>\n</blockquote>\n<p>What is an example of such usage (operand is of class type)?</p>\n", "Tags": "<c++><c++11>", "OwnerUserId": "1131467", "AnswerCount": "1"}, "16585840": {"ParentId": "16585713", "PostTypeId": "2", "CommentCount": "4", "Body": "<blockquote>\n<p id=\"so_16585713_16585840_0\">If of class type, the operand is contextually implicitly converted to\n  a pointer to object type.</p>\n</blockquote>\n<p>So, you can use <code>delete</code> on object, but when and only when this type has implicit conversion operator to pointer.</p>\n<pre><code>class A\n{\npublic:\n   class Inner {};\n   A()\n   {\n      inner = new Inner();\n   }\n   operator Inner*() { return inner; }\nprivate:\n   Inner* inner;\n};\n\nint main()\n{\n   A* a = new A();\n   delete *a;\n   delete a;\n}\n</code></pre>\n<p>However, it's not new feature of C++11, in C++03 standard there are almost same words\n<blockquote><p id=\"so_16585713_16585840_1\">\nThe operand shall have a pointer\ntype, or a class type having a single conversion function (12.3.2) to a pointer type.</p></blockquote></p>\n", "OwnerUserId": "1498580", "LastEditorUserId": "1498580", "LastEditDate": "2013-05-16T11:33:38.243", "Id": "16585840", "Score": "10", "CreationDate": "2013-05-16T11:08:26.977", "LastActivityDate": "2013-05-16T11:33:38.243"}, "bq_ids": {"n4140": {"so_16585713_16585713_0": {"section_id": 6105, "quality": 0.875, "length": 14}, "so_16585713_16585840_0": {"section_id": 6105, "quality": 1.0, "length": 9}}, "n3337": {"so_16585713_16585713_0": {"section_id": 5890, "quality": 0.6875, "length": 11}, "so_16585713_16585840_0": {"section_id": 5872, "quality": 0.7777777777777778, "length": 7}, "so_16585713_16585840_1": {"section_id": 5871, "quality": 0.8571428571428571, "length": 12}}, "n4659": {"so_16585713_16585713_0": {"section_id": 7602, "quality": 0.875, "length": 14}, "so_16585713_16585840_0": {"section_id": 7602, "quality": 1.0, "length": 9}, "so_16585713_16585840_1": {"section_id": 8732, "quality": 0.5714285714285714, "length": 8}}}});