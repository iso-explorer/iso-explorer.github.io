post_cb({"18978080": {"ParentId": "18978006", "PostTypeId": "2", "CommentCount": "0", "Body": "<p><code>alignas</code> cannot replace <code>#pragma pack</code>.</p>\n<p>GCC accepts the <code>alignas</code> declaration, but still keeps the member properly aligned: satisfying the strictest alignment requirement (in this case, the alignment of <code>long</code>) also satisfies the requirement you specified.</p>\n<p>However, GCC is too lenient as the standard actually explicitly forbids this in \u00a77.6.2, paragraph 5:</p>\n<blockquote>\n<p id=\"so_18978006_18978080_0\">The combined effect of all <em>alignment-specifiers</em> in a declaration shall not specify an alignment that is less strict than the alignment that would be required for the entity being declared if all <em>alignment-specifiers</em> were omitted (including those in other declarations).</p>\n</blockquote>\n", "OwnerUserId": "46642", "LastEditorUserId": "46642", "LastEditDate": "2013-09-24T09:53:07.223", "Id": "18978080", "Score": "10", "CreationDate": "2013-09-24T09:43:47.463", "LastActivityDate": "2013-09-24T09:53:07.223"}, "18978006": {"CommentCount": "1", "AcceptedAnswerId": "18978080", "CreationDate": "2013-09-24T09:40:23.087", "LastActivityDate": "2013-09-24T09:53:07.223", "PostTypeId": "1", "ViewCount": "1654", "FavoriteCount": "1", "Title": "How to use alignas to replace pragma pack?", "Id": "18978006", "Score": "8", "Body": "<p>I am trying to understand how alignas should be used, I wonder if it can be a replacement for pragma pack, I have tried hard to verify it but with no luck. Using gcc 4.8.1 (<a href=\"http://ideone.com/04mxpI\" rel=\"noreferrer\">http://ideone.com/04mxpI</a>) I always get 8 bytes for below STestAlignas, while with pragma pack it is 5 bytes. What I would like ot achive is to make sizeof(STestAlignas) return 5. I tried running this code on clang 3.3 (<a href=\"http://gcc.godbolt.org/\" rel=\"noreferrer\">http://gcc.godbolt.org/</a>) but I got error:</p>\n<p>!!error: requested alignment is less than minimum alignment of 8 for type 'long' - just below alignas usage.</p>\n<p>So maybe there is a minimum alignment value for alignas?</p>\n<p>below is my test code:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstddef&gt;\nusing namespace std;\n\n#pragma pack(1)\nstruct STestPragmaPack {\n  char c;\n  long d;\n} datasPP;\n#pragma pack()\n\nstruct STestAttributPacked {\n  char c;\n  long d;\n} __attribute__((packed)) datasAP;\n\nstruct STestAlignas {\n  char c;\n  alignas(char) long d;\n} datasA;\n\nint main() {\n    cout &lt;&lt; \"pragma pack = \" &lt;&lt; sizeof(datasPP) &lt;&lt; endl;\n    cout &lt;&lt; \"attribute packed = \" &lt;&lt; sizeof(datasAP) &lt;&lt; endl;\n    cout &lt;&lt; \"alignas = \" &lt;&lt; sizeof(datasA) &lt;&lt; endl;\n}\n</code></pre>\n<p>results for gcc 4.8.1:</p>\n<pre><code>pragma pack = 5\nattribute packed = 5\nalignas = 8\n</code></pre>\n", "Tags": "<c++><gcc><c++11><alignas>", "OwnerUserId": "471160", "AnswerCount": "1"}, "bq_ids": {"n4140": {"so_18978006_18978080_0": {"section_id": 5536, "quality": 0.96, "length": 24}}, "n3337": {"so_18978006_18978080_0": {"section_id": 5322, "quality": 0.96, "length": 24}}, "n4659": {"so_18978006_18978080_0": {"section_id": 6972, "quality": 0.8, "length": 20}}}});