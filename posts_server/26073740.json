post_cb({"bq_ids": {"n4140": {"so_26073740_26073740_0": {"length": 4, "quality": 0.6666666666666666, "section_id": 733}}, "n3337": {"so_26073740_26073740_0": {"length": 4, "quality": 0.6666666666666666, "section_id": 722}}, "n4659": {"so_26073740_26073740_0": {"length": 4, "quality": 0.6666666666666666, "section_id": 396}}}, "26073776": {"Id": "26073776", "PostTypeId": "2", "Body": "<p>Why? You're just passing a rvalue reference to your function, not creating a new object.</p>\n<pre><code>X x(10); // default constructor\nfoo(std::move(x)); // passing x as an rvalue\nfoo(X(5)); // creating an object (with the default constructor) which is passed as an rvalue\n</code></pre>\n<p>Try <code>X y(std::move(x))</code> and your move constructor should be called.</p>\n<p>The move constructor is only called when you create a new object using an rvalue reference.</p>\n", "LastActivityDate": "2014-09-27T10:38:26.440", "Score": "1", "CreationDate": "2014-09-27T10:38:26.440", "ParentId": "26073740", "CommentCount": "1", "OwnerUserId": "610351"}, "26073740": {"ViewCount": "152", "Body": "<p>I don't understand why the following does not work:</p>\n<pre><code>class X{\n    unsigned int sz;\npublic:\n    X(const unsigned int n = 0) : sz(n) {std::cout &lt;&lt; \"Default constructor called!\" &lt;&lt; std::endl;};\n    X(const X&amp; x) : sz(x.sz) {};\n    X(X&amp;&amp; x) : sz(x.sz) {std::cout &lt;&lt; \"Move constructor called!\" &lt;&lt; std::endl;};\n};\n\nvoid foo(X&amp;&amp; x){\n    std::cout &lt;&lt; x.size() &lt;&lt; std::endl;\n}\n\nint main(){\n    X x(10);\n    foo(std::move(x));\n    foo(X(5));\n    return 0;\n}\n</code></pre>\n<p>This program prints:</p>\n<blockquote>\n<p id=\"so_26073740_26073740_0\">Default constructor called!<br>\n  Default constructor called!</br></p>\n</blockquote>\n<p>I am aware that the move constructor is pointless in this example, since we're not stealing anything, but shouldn't the move constructor still be called in these cases?</p>\n<p>Edit: Using g++ 4.8.1 on windows.</p>\n", "AcceptedAnswerId": "26073776", "Title": "Move constructor not working?", "CreationDate": "2014-09-27T10:34:31.163", "Id": "26073740", "CommentCount": "0", "LastEditDate": "2014-09-27T10:40:19.823", "PostTypeId": "1", "LastEditorUserId": "610351", "LastActivityDate": "2014-09-27T10:40:19.823", "Score": "-1", "OwnerUserId": "3367091", "Tags": "<c++><c++11><move-semantics>", "AnswerCount": "1"}});