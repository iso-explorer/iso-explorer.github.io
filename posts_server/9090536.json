post_cb({"9090656": {"ParentId": "9090536", "PostTypeId": "2", "CommentCount": "1", "Body": "<p>See ISO C99 6.10.3.5 paragraph 2.</p>\n<blockquote>\n<p id=\"so_9090536_9090656_0\">A preprocessing directive of the form</p>\n<pre><code># undef identifier new-line\n</code></pre>\n<p id=\"so_9090536_9090656_1\">causes the specified identifier no longer to be defined as a macro name. It is ignored if\n  the specified identifier is not currently defined as a macro name.</p>\n</blockquote>\n<p>Even <a href=\"http://msdn.microsoft.com/en-us/library/aa273931\">Visual C++ 6</a> (which was notorious for bad standards compliance) allows this:</p>\n<blockquote>\n<p id=\"so_9090536_9090656_2\">You can also apply the <code>#undef</code> directive to an identifier that has no previous definition. This ensures that the identifier is undefined. Macro replacement is not performed within <code>#undef</code> statements.</p>\n</blockquote>\n", "OwnerUserId": "197788", "LastEditorUserId": "197788", "LastEditDate": "2012-02-01T04:34:30.203", "Id": "9090656", "Score": "20", "CreationDate": "2012-02-01T04:08:35.743", "LastActivityDate": "2012-02-01T04:34:30.203"}, "9091100": {"ParentId": "9090536", "PostTypeId": "2", "CommentCount": "4", "Body": "<p>I'm sure it's an artifact of history. <a href=\"https://stackoverflow.com/a/9090611/12711\">As mentioned in jdigital's answer</a>, the 2nd edition of K&amp;R says</p>\n<blockquote>\n<p id=\"so_9090536_9091100_0\">It is not erroneous to apply #undef to an unknown identifier.</p>\n</blockquote>\n<p>However, that sentence is not in the 1978 edition. I'm pretty sure pre-standard compilers would often throw an error if you tried to <code>#undef</code> an undefined macro.  </p>\n<p>Also, the <a href=\"http://www.lysator.liu.se/c/rat/c8.html#3-8-3-5\" rel=\"nofollow noreferrer\">ANSI C Rationale says</a>:</p>\n<blockquote>\n<p id=\"so_9090536_9091100_1\">It is explicitly permitted to #undef a macro that has no current definition.</p>\n</blockquote>\n<p>I'd imagine that if it was already universal practice, there would be no need to call it out in the rationale.</p>\n<p>All that said, it's not necessary in modern code, but it doesn't really hurt either.</p>\n", "OwnerUserId": "12711", "LastEditorUserId": "-1", "LastEditDate": "2017-05-23T12:34:34.957", "Id": "9091100", "Score": "9", "CreationDate": "2012-02-01T05:10:38.353", "LastActivityDate": "2012-02-01T05:10:38.353"}, "9090536": {"CommentCount": "5", "AcceptedAnswerId": "9090656", "CreationDate": "2012-02-01T03:56:21.697", "LastActivityDate": "2012-02-01T05:10:38.353", "PostTypeId": "1", "ViewCount": "5075", "FavoriteCount": "3", "Title": "When do we need #ifdef before #undef?", "Id": "9090536", "Score": "27", "Body": "<p>In many of the C and C++ files I have seen macros like this:</p>\n<pre><code>#ifdef X\n#undef X  // no statements in between\n#endif\n</code></pre>\n<p>I feel that, it's adequate to simply write:</p>\n<pre><code>#undef X\n</code></pre>\n<p>If the macro <code>X</code> wasn't defined, then the <code>#undef</code> should have no effect.</p>\n<p>Is it <em>ok</em> to put standalone <code>#undef</code>, if I want to only <em>undefine</em> a macro ? Does that make the coding practice bad in anyway ?</p>\n", "Tags": "<c++><c><coding-style><macros><undef>", "OwnerUserId": "514235", "AnswerCount": "3"}, "bq_ids": {"n4140": {"so_9090536_9090656_1": {"section_id": 534, "quality": 1.0, "length": 14}}, "n3337": {"so_9090536_9090656_1": {"section_id": 525, "quality": 1.0, "length": 14}}, "n4659": {"so_9090536_9090656_1": {"section_id": 555, "quality": 1.0, "length": 14}}}, "9090611": {"ParentId": "9090536", "PostTypeId": "2", "CommentCount": "2", "Body": "<p>Kernighan and Ritchie (2nd edition) agree with you.</p>\n<p>EDIT: quote from the source (section A12.3):</p>\n<blockquote>\n<p id=\"so_9090536_9090611_0\">A control line of the form</p>\n<p id=\"so_9090536_9090611_1\"><code># undef</code> <em>identifier</em></p>\n<p id=\"so_9090536_9090611_2\">causes the identifier's preprocessor definition to be forgotten.  If is not erroneous to apply <code>#undef</code> to an unknown identifier.</p>\n</blockquote>\n", "OwnerUserId": "37231", "LastEditorUserId": "37231", "LastEditDate": "2012-02-01T04:27:58.263", "Id": "9090611", "Score": "8", "CreationDate": "2012-02-01T04:03:31.807", "LastActivityDate": "2012-02-01T04:27:58.263"}});