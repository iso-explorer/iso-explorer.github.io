post_cb({"34128782": {"CommentCount": "7", "AcceptedAnswerId": "35823315", "CreationDate": "2015-12-07T07:55:21.797", "LastActivityDate": "2016-03-06T04:58:49.230", "Title": "What is the use of first template parameter in priority_queue", "ViewCount": "414", "PostTypeId": "1", "Id": "34128782", "Score": "9", "Body": "<p>For the std::priority_queue I assumed that the first template parameter specified the type and the second should be a container of that type. Example:</p>\n<pre><code>priority_queue&lt;int, vector&lt;int&gt;&gt; someQueue;\n</code></pre>\n<p>However, the following code compiles and seems to run fine:</p>\n<pre><code>class SomeClass\n{\n};\n\nint main()\n{\n    priority_queue &lt;SomeClass, vector&lt;int&gt;&gt; pq;\n    int x = 9;\n    pq.push(x);\n    int t = pq.top();\n    cout &lt;&lt; t &lt;&lt; endl;\n    pq.pop();\n    return 0;\n}\n</code></pre>\n<p>Is the above code invalid (i.e. giving UB)?</p>\n<p>If it is valid - what is the first template parameter (i.e. <code>someClass</code>) used for in the priority_queue.</p>\n", "Tags": "<c++>", "OwnerUserId": "4386427", "AnswerCount": "2"}, "34128925": {"ParentId": "34128782", "PostTypeId": "2", "CommentCount": "7", "Body": "<p>In the C++11 specification the section about <code>std::priority_queue</code> is \u00a723.6.4. In it the first template argument is simply the default type used for the container and nothing else.</p>\n<p>The actual value type is taken from the container.</p>\n<p>The class is declared as</p>\n<pre><code>template&lt;\n    class T,\n    class Container = std::vector&lt;T&gt;,\n    class Compare = std::less&lt;typename Container::value_type&gt;\n&gt; class priority_queue;\n</code></pre>\n<p><sub>[Taken from <a href=\"http://en.cppreference.com/w/cpp/container/priority_queue\" rel=\"nofollow\">this reference</a>]</sub></p>\n<p>That declaration show how, when and where the first template argument is used.</p>\n", "OwnerUserId": "440558", "LastEditorUserId": "440558", "LastEditDate": "2015-12-07T08:07:23.823", "Id": "34128925", "Score": "3", "CreationDate": "2015-12-07T08:05:48.660", "LastActivityDate": "2015-12-07T08:07:23.823"}, "bq_ids": {"n4659": {"so_34128782_35823315_0": {"section_id": 1184, "quality": 0.9, "length": 9}}}, "35823315": {"ParentId": "34128782", "CommentCount": "1", "Body": "<p>Freshly voted into the working paper in Jacksonville, via <a href=\"http://wg21.link/lwg2566\" rel=\"nofollow\">LWG issue 2566</a>:</p>\n<blockquote>\n<p id=\"so_34128782_35823315_0\">The first template parameter <code>T</code> of the container adaptors shall denote\n  the same type as <code>Container::value_type</code>.</p>\n</blockquote>\n<p>Writing <code>std::priority_queue&lt;SomeClass, std::vector&lt;int&gt;&gt;</code> accordingly results in undefined behavior.</p>\n", "OwnerUserId": "2756719", "PostTypeId": "2", "Id": "35823315", "Score": "3", "CreationDate": "2016-03-06T04:58:49.230", "LastActivityDate": "2016-03-06T04:58:49.230"}});