post_cb({"bq_ids": {"n4140": {"so_31493734_31493944_0": {"length": 45, "quality": 1.0, "section_id": 7139}}, "n3337": {"so_31493734_31493944_0": {"length": 45, "quality": 1.0, "section_id": 6883}}, "n4659": {"so_31493734_31493944_0": {"length": 45, "quality": 1.0, "section_id": 8640}}}, "31493734": {"ViewCount": "50", "Body": "<p>Is this program well-formed according to the c++ standard?</p>\n<pre><code>namespace X { int i = 1; }\n\nusing namespace X;\n\nint main() {\n    extern int i;\n    i = 2;\n}\n</code></pre>\n<p>I get different results with different compilers:</p>\n<ul>\n<li><p>GCC and Clang gives a linker error: Undefined reference to i.</p></li>\n<li><p>Visual c++ accepts the program.</p></li>\n</ul>\n", "AcceptedAnswerId": "31493944", "Title": "Local extern variable declaration with using-directive in the nearest enclosing scope", "CreationDate": "2015-07-18T17:35:14.610", "Id": "31493734", "CommentCount": "4", "LastEditDate": "2015-07-18T18:02:42.360", "PostTypeId": "1", "LastEditorUserId": "1272610", "LastActivityDate": "2015-07-18T18:02:42.360", "Score": "1", "OwnerUserId": "1272610", "Tags": "<c++><namespaces><language-lawyer><using-directives>", "AnswerCount": "1"}, "31493944": {"Id": "31493944", "PostTypeId": "2", "Body": "<p>[basic.link]/p6:</p>\n<blockquote>\n<p id=\"so_31493734_31493944_0\">If there is a visible declaration of an entity with linkage having the same name and type, <strong>ignoring entities declared outside the innermost enclosing namespace scope</strong>, the block scope declaration declares that same entity and receives the linkage of the previous declaration. If there is more than one such matching entity, the program is ill-formed. Otherwise, if no matching entity is found, the block scope entity receives external linkage.</p>\n</blockquote>\n<p><code>X::i</code> was declared outside the innermost enclosing namespace of the extern declaration (i.e the global namespace) so it is ignored. This means no declaration was found for <code>i</code> and therefore <code>extern int i</code> is a declaration of a new variable named <code>i</code> with external linkage.</p>\n<p>Your program will compile, but will not link if the block-scope <code>i</code> is odr-used.</p>\n", "LastActivityDate": "2015-07-18T17:57:31.167", "CommentCount": "4", "CreationDate": "2015-07-18T17:57:31.167", "ParentId": "31493734", "Score": "3", "OwnerUserId": "701092"}});