post_cb({"31101854": {"CommentCount": "0", "ViewCount": "68", "CreationDate": "2015-06-28T16:05:48.787", "LastActivityDate": "2015-06-28T17:13:56.337", "Title": "Order of destruction for stack/heap allocated arrays", "AcceptedAnswerId": "31102112", "PostTypeId": "1", "Id": "31101854", "Score": "1", "Body": "<p>Considering following code:</p>\n<pre><code>struct A{...};\n\nA a[100];\nA* pa = new A[100];\ndelete[] pa;\n</code></pre>\n<p>Is the order of destruction for the elements of <code>a</code>/<code>pa</code> defined by the standard or it is implementation defined (for the second case <code>operator delete[]</code> is not user defined).</p>\n", "Tags": "<c++>", "OwnerUserId": "336578", "AnswerCount": "1"}, "bq_ids": {"n4140": {"so_31101854_31102112_1": {"section_id": 423, "quality": 0.875, "length": 28}, "so_31101854_31102112_0": {"section_id": 6110, "quality": 0.9666666666666667, "length": 29}}, "n3337": {"so_31101854_31102112_1": {"section_id": 415, "quality": 0.875, "length": 28}, "so_31101854_31102112_0": {"section_id": 5876, "quality": 0.9666666666666667, "length": 29}}, "n4659": {"so_31101854_31102112_1": {"section_id": 441, "quality": 0.875, "length": 28}, "so_31101854_31102112_0": {"section_id": 7607, "quality": 0.9666666666666667, "length": 29}}}, "31102112": {"ParentId": "31101854", "PostTypeId": "2", "CommentCount": "0", "Body": "<p>The array elements will be destructed in reverse order of construction, with element <code>99</code> being the first destructed, then element <code>98</code>, <code>97</code>, <code>96</code>... etc. and element <code>0</code> being the last.</p>\n<p>See the <a href=\"https://isocpp.org/wiki/faq/dtors#order-dtors-for-arrays\" rel=\"nofollow\">isocpp</a> destructor FAQ.</p>\n<p>From 5.3.5.6 of the latest draft:</p>\n<blockquote>\n<p id=\"so_31101854_31102112_0\">If the value of the operand of the delete-expression is not a null pointer value, the delete-expression will\n  invoke the destructor (if any) for the object or the elements of the array being deleted. <strong>In the case of an\n  array, the elements will be destroyed in order of decreasing address (that is, in reverse order of the completion\n  of their constructor</strong>; see 12.6.2).</p>\n</blockquote>\n<p>There's also this from 12.6.3 (which is not specific to the <code>delete</code> keyword):</p>\n<blockquote>\n<p id=\"so_31101854_31102112_1\">When an array of class objects is initialized (either explicitly or implicitly) and the elements are initialized\n  by constructor, the constructor shall be called for each element of the array, following the subscript order;\n  see 8.3.4. [ <strong>Note: Destructors for the array elements are called in reverse order of their construction. \u2014 end\n  note</strong> ]</p>\n</blockquote>\n", "OwnerUserId": "3973558", "LastEditorUserId": "3973558", "LastEditDate": "2015-06-28T17:13:56.337", "Id": "31102112", "Score": "3", "CreationDate": "2015-06-28T16:32:39.607", "LastActivityDate": "2015-06-28T17:13:56.337"}});