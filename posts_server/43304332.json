post_cb({"43304332": {"CommentCount": "4", "ViewCount": "81", "CreationDate": "2017-04-09T07:50:36.450", "LastActivityDate": "2017-04-09T09:49:32.697", "Title": "C++ Multiple definitions even though only one definition is given", "AcceptedAnswerId": "43305321", "PostTypeId": "1", "Id": "43304332", "Score": "0", "Body": "<p>I'm trying to make a small unordered map that I can use to store keys and values permanently, as a sort of dictionary. The type <code>TengwarChar</code> is just an object with two values, a string and an enum, and later I'll add methods too. The header I use is as follows:</p>\n<pre><code>#ifndef TENGWARLIBRARY_H\n#define TENGWARLIBRARY_H\n\n#include \"tengwarchar.h\"\n#include &lt;unordered_map&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\n\ntypedef std::unordered_map&lt;std::string, TengwarChar&gt; CharMap;\n\nextern const CharMap numbers = {\n    {\"0\", TengwarChar(\"\u00f0\", SHORT)},\n    {\"1\", TengwarChar(\"\u00f1\", SHORT)},\n    {\"2\", TengwarChar(\"\u00f2\", SHORT)},\n    {\"3\", TengwarChar(\"\u00f3\", SHORT)},\n    {\"4\", TengwarChar(\"\u00f4\", SHORT)},\n    {\"5\", TengwarChar(\"\u00f5\", SHORT)},\n    {\"6\", TengwarChar(\"\u00f6\", SHORT)},\n    {\"7\", TengwarChar(\"\u00f7\", SHORT)},\n    {\"8\", TengwarChar(\"\u00f8\", SHORT)},\n    {\"9\", TengwarChar(\"\u00f9\", SHORT)}\n };\n\nstd::string translateFromEnglishToTengwar(std::string str);\nstd::string translateFromTengwarToEnglish(std::string str);\n\n#endif // TENGWARLIBRARY_H\n</code></pre>\n<p>Then, I have a simple testing cpp file that goes along with it:</p>\n<pre><code>#include \"tengwarlibrary.h\"\n\nstd::string translateFromEnglishToTengwar(std::string str)\n{\n    std::transform(str.begin(), str.end(), str.begin(), (int (*)(int))std::tolower);\n    return str;\n}\n\nstd::string translateFromTengwarToEnglish(std::string str)\n{\n    return \"Hello world.\";\n}\n</code></pre>\n<p>The problem is, I keep getting 'multiple definition of numbers[abi:cxx11]' errors, when invoke <code>translateFromTengwarToEnglish</code> in my main function, even though I'm fairly certain I have only defined it once, in my header file, using header guards too. In case it might help, here is my humble main cpp file:</p>\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n\n#include &lt;iostream&gt;\n\n#include \"utils/tengwarlibrary.h\"\n\nint main(int argc, char *argv[])\n{\n\n    std::string s = \"BlaH FElfeFEJI, IEORlfj\";\n    std::cout&lt;&lt;translateFromEnglishToTengwar(s)&lt;&lt;std::endl;\n\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n", "Tags": "<c++><compiler-errors><multiple-definition-error>", "OwnerUserId": "4288259", "AnswerCount": "1"}, "43305321": {"ParentId": "43304332", "CommentCount": "0", "Body": "<p>According to <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf\" rel=\"nofollow noreferrer\">C++ standard</a> \u00a73.1.2</p>\n<blockquote>\n<p id=\"so_43304332_43305321_0\">A declaration is a definition unless it declares a function without specifying the function\u2019s body, it contains the extern specifier or a linkage-specification and neither an\n  initializer nor a function-body ...</p>\n</blockquote>\n<p>Declaration of <code>numbers</code> in the header file <code>tengwarlibrary.h</code> is extern declaration with initializer. So it is also a definition.</p>\n<p>As you have included <code>tengwarlibrary.h</code> in two source files (one where <code>translateFromTengwarToEnglish()</code> is defined and where <code>main()</code> defined) both of them has the definition of <code>numbers</code>. Hence, the error.</p>\n<p>To solve this problem declare <code>number</code> with <code>extern</code> in header file and initialize it in a single source file.</p>\n", "OwnerUserId": "1992776", "PostTypeId": "2", "Id": "43305321", "Score": "2", "CreationDate": "2017-04-09T09:49:32.697", "LastActivityDate": "2017-04-09T09:49:32.697"}, "bq_ids": {"n4140": {"so_43304332_43305321_0": {"section_id": 7034, "quality": 0.9333333333333333, "length": 14}}, "n3337": {"so_43304332_43305321_0": {"section_id": 6780, "quality": 0.9333333333333333, "length": 14}}, "n4659": {"so_43304332_43305321_0": {"section_id": 8531, "quality": 0.9333333333333333, "length": 14}}}});