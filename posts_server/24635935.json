post_cb({"24635935": {"CommentCount": "2", "AcceptedAnswerId": "24636309", "ClosedDate": "2014-07-08T15:57:11.910", "CreationDate": "2014-07-08T15:33:46.323", "LastActivityDate": "2014-07-08T15:53:10.800", "PostTypeId": "1", "ViewCount": "307", "FavoriteCount": "1", "Title": "Use of 'using' keyword to make inherited constructor public", "Id": "24635935", "Score": "9", "Body": "<p>I am trying to test protected methods and constructors of my class. For this purpose, I tried to subclass it, and re-export its members as public with C++11 <code>using</code> keyword: </p>\n<pre><code>class Foo {\n  protected:\n   Foo(int i) {}\n   void run() {}\n};\n\nclass TestableFoo : public Foo {\n  public:\n   using Foo::Foo;\n   using Foo::run;\n};\n\nint main() {\n  TestableFoo foo(7);\n  foo.run();\n}\n</code></pre>\n<p>However, both g++ and clang++ fail to compile it, producing the following error:</p>\n<pre><code>test.cpp:13:15: error: \u2018TestableFoo::TestableFoo(int)\u2019 is protected\n    using Foo::Foo;\n               ^\ntest.cpp:18:16: error: within this context\n   TestableFoo foo(7);\n                    ^\n</code></pre>\n<p>TestableFoo constructor is still protected, even though <code>run</code> method becomes public (I confirmed it separately). Why is that so? I could understand either decision (inheriting vs. overwriting visibility), but why is there an inconsistency between methods and constructors?</p>\n", "Tags": "<c++><inheritance><testing><c++11><using>", "OwnerUserId": "627277", "AnswerCount": "2"}, "bq_ids": {"n4140": {"so_24635935_24636309_1": {"section_id": 485, "quality": 1.0, "length": 10}, "so_24635935_24636309_0": {"section_id": 482, "quality": 0.8518518518518519, "length": 23}, "so_24635935_24636348_0": {"section_id": 485, "quality": 1.0, "length": 6}}, "n3337": {"so_24635935_24636309_1": {"section_id": 476, "quality": 1.0, "length": 10}, "so_24635935_24636309_0": {"section_id": 473, "quality": 0.8518518518518519, "length": 23}, "so_24635935_24636348_0": {"section_id": 476, "quality": 1.0, "length": 6}}, "n4659": {"so_24635935_24636309_1": {"section_id": 382, "quality": 0.6, "length": 6}}}, "24636348": {"ParentId": "24635935", "CommentCount": "0", "Body": "<p>This behaviour is conform with what the standard says (ISO/IEC 14822:2011 12.9, \u00a74) :</p>\n<blockquote>\n<p id=\"so_24635935_24636348_0\">A constructor so declared has the same access as the corresponding constructor in X.</p>\n</blockquote>\n<p>where <code>X</code> is the base class from which the constructors are inherited.</p>\n<p>To get the desired behaviour, you can use :</p>\n<pre><code>class TestableFoo : public Foo {\n  public :\n    TestableFoo(int i) : Foo(i) { }\n    using Foo::run;\n};\n</code></pre>\n", "OwnerUserId": "822669", "PostTypeId": "2", "Id": "24636348", "Score": "1", "CreationDate": "2014-07-08T15:53:10.800", "LastActivityDate": "2014-07-08T15:53:10.800"}, "24636309": {"ParentId": "24635935", "CommentCount": "0", "Body": "<p>The Standard explicitly states that inherited constructors retain their access levels:</p>\n<p><strong>12.9 Inheriting constructors [class.inhctor]</strong></p>\n<blockquote>\n<p id=\"so_24635935_24636309_0\">1 A using-declaration (7.3.3) that names a constructor implicitly\n  declares a set of inheriting constructors. The candidate set of\n  inherited constructors from the class <code>X</code> named in the using-declaration\n  consists of actual constructors and notional constructors that result\n  from the transformation of defaulted parameters as follows: </p>\n</blockquote>\n<p>[list of cases omitted]</p>\n<blockquote>\n<p id=\"so_24635935_24636309_1\">4 <strong>A constructor so declared has the same access as the corresponding\n  constructor in X</strong>. It is deleted if the corresponding constructor in <code>X</code>\n  is deleted (8.4).</p>\n</blockquote>\n<p>You can call it directly of course:</p>\n<pre><code>TestableFoo(int i) : Foo(i) { }\n</code></pre>\n", "OwnerUserId": "819272", "PostTypeId": "2", "Id": "24636309", "Score": "4", "CreationDate": "2014-07-08T15:51:07.767", "LastActivityDate": "2014-07-08T15:51:07.767"}});