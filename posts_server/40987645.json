post_cb({"40987645": {"CommentCount": "10", "ViewCount": "199", "CreationDate": "2016-12-06T04:03:51.000", "LastActivityDate": "2016-12-06T06:23:53.880", "Title": "Implicit array sizing and crash c++", "PostTypeId": "1", "Id": "40987645", "Score": "0", "Body": "<p>I tried to declare and initialize the array like this int a[]={},but the program crashed.</p>\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nvoid test(int b []){\n    for(int i=0;i&lt;9;i++)\n    b[i]=i+1;\n}\n\nint main()\n{\n    int a[]={};\n    test(a);\n    for(int i=0;i&lt;9;i++)\n    cout&lt;&lt;a[i]&lt;&lt;endl;\n}\n</code></pre>\n<p>The output on the console before it crashed is as follow:</p>\n<p>0\n2\n3\n4\n5\n6\n7\n8\n9</p>\n<p>But the program does what it suppose to be when I declared the array with size(int a[9]={}).Can someone tell me what's the reason behind?Thank you.</p>\n", "Tags": "<c++>", "OwnerUserId": "6938079", "AnswerCount": "2"}, "40989041": {"ParentId": "40987645", "CommentCount": "0", "Body": "<p>Do you mean to use dynamic allocation?\nThis means you declare an array but don't give it a fixed size. </p>\n<pre><code>int size = 10;\nint * arr = new int[size];\n</code></pre>\n<p>Now you can add things to arr[] like normal. If you need more space, you have to make another array of the new size, copy the values over, set the new array equal to the old one (arr = newArr), then IMPORTANT: do delete [] newArr;</p>\n<p>This is because arrays do not handle memory allocation by themselves like vectors do. You have to give it a number for the size, or declare it dynamically.</p>\n", "OwnerUserId": "7253981", "PostTypeId": "2", "Id": "40989041", "Score": "0", "CreationDate": "2016-12-06T06:23:53.880", "LastActivityDate": "2016-12-06T06:23:53.880"}, "bq_ids": {"n4140": {"so_40987645_40987705_0": {"section_id": 3301, "quality": 1.0, "length": 7}}, "n3337": {"so_40987645_40987705_0": {"section_id": 3171, "quality": 1.0, "length": 7}}, "n4659": {"so_40987645_40987705_0": {"section_id": 4067, "quality": 1.0, "length": 7}}}, "40987705": {"ParentId": "40987645", "CommentCount": "1", "Body": "<p>This code is ill-formed. See C++14 [dcl.init]/4:</p>\n<blockquote>\n<p id=\"so_40987645_40987705_0\">An empty initializer list <code>{}</code> shall not be used as the initializer-clause for an array of unknown bound.</p>\n</blockquote>\n<p>The compiler could reject the code, and if it doesn't then the behaviour of the program is completely undefined by the C++ standard.  Some compilers have a non-standard extension allowing zero-sized arrays.</p>\n", "OwnerUserId": "1505939", "PostTypeId": "2", "Id": "40987705", "Score": "5", "CreationDate": "2016-12-06T04:12:08.740", "LastActivityDate": "2016-12-06T04:12:08.740"}});