post_cb({"33978185": {"CommentCount": "4", "AcceptedAnswerId": "33978267", "PostTypeId": "1", "LastEditorUserId": "2430597", "CreationDate": "2015-11-29T00:51:54.500", "LastActivityDate": "2015-12-03T15:20:09.030", "LastEditDate": "2015-11-29T01:10:48.073", "ViewCount": "5903", "FavoriteCount": "1", "Title": "\"default constructor cannot be referenced\" in Visual Studio 2015", "Id": "33978185", "Score": "8", "Body": "<p>I am facing a really weird error message in Visual Studio 2015. The following stripped down code:   </p>\n<pre><code>struct A\n{\n    A(int val = 0)\n    :\n        x(val)\n    {}\n\n    int x = 0;\n};\n\nstruct B: A\n{\n    static int y;\n};\n\nint B::y = 1;\n\nstruct C: B\n{\n\n};\n\nint main()\n{\n    C c;\n    return 0;\n}\n</code></pre>\n<p>compiles without any problem on Clang. However Visual Studio 2015 IntelliSense gives the following error message:</p>\n<pre><code>the default constructor of \"C\" cannot be referenced -- it is a deleted function\n</code></pre>\n<p>Am I missing something in my code, or this is a bug in Visual Studio?</p>\n<hr>\n<p><strong>UPDATE</strong></p>\n<p>Based on the comments and answers here I have opened a <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/2070261\" rel=\"noreferrer\">bug report</a> on Microsoft Connect.</p>\n</hr>", "Tags": "<c++><c++11><visual-studio-2015>", "OwnerUserId": "2430597", "AnswerCount": "1"}, "bq_ids": {"n4140": {"so_33978185_33978267_0": {"section_id": 369, "quality": 0.9655172413793104, "length": 84}}, "n3337": {"so_33978185_33978267_0": {"section_id": 359, "quality": 0.8850574712643678, "length": 77}}, "n4659": {"so_33978185_33978267_0": {"section_id": 382, "quality": 0.9310344827586207, "length": 81}}}, "33978267": {"ParentId": "33978185", "PostTypeId": "2", "CommentCount": "3", "Body": "<p>This is an Intellisense bug. Both clang and gcc accept this code, also <a href=\"http://webcompiler.cloudapp.net/\" rel=\"noreferrer\">webcompiler an online Visual c++ compiler accepts this code</a>.</p>\n<p>The draft C++14 standard section <code>12.1</code> <em>[class.ctor]</em> says a defaulted default constructor for a class is deleted if:</p>\n<blockquote id=\"so_33978185_33978267_0\">\n<ul>\n<li>X is a union-like class that has a variant member with a non-trivial default constructor,</li>\n<li>any non-static data member with no brace-or-equal-initializer is of reference type,</li>\n<li>any non-variant non-static data member of const-qualified type (or array thereof) with no brace-orequal- initializer does not have a\n  user-provided default constructor,</li>\n<li>X is a union and all of its variant members are of const-qualified type (or array thereof),</li>\n<li>X is a non-union class and all members of any anonymous union member are of const-qualified type (or array thereof),</li>\n<li>any potentially constructed subobject, except for a non-static data member with a brace-or-equalinitializer, has class type M (or array\n  thereof) and either M has no default constructor or overload\n  resolution (13.3) as applied to M\u2019s default constructor results in an\n  ambiguity or in a function that is deleted or inaccessible from the\n  defaulted default constructor, or</li>\n<li>any potentially constructed subobject has a type with a destructor that is deleted or inaccessible from the defaulted default\n  constructor.</li>\n</ul>\n</blockquote>\n<p>none of which applies here.</p>\n<p><b>Update</b></p>\n<p>In the <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/2070261\" rel=\"noreferrer\">bug report filed by the OP</a> the response was:</p>\n<blockquote>\n<p id=\"so_33978185_33978267_1\">Thank you for reporting this issue. Fix should be available in the next update to Visual Studio 2015.</p>\n</blockquote>\n", "OwnerUserId": "1708801", "LastEditorUserId": "1708801", "LastEditDate": "2015-12-03T15:20:09.030", "Id": "33978267", "Score": "7", "CreationDate": "2015-11-29T01:06:17.317", "LastActivityDate": "2015-12-03T15:20:09.030"}});