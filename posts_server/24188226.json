post_cb({"24188973": {"Id": "24188973", "PostTypeId": "2", "Body": "<h3>Introduction</h3>\n<p>The problem with your code is that the Standard (<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf\" rel=\"nofollow\">n3337</a>) mandates that each expression associated with a <em>label</em> must be a <em>constant-expression</em>.</p>\n<blockquote>\n<p id=\"so_24188226_24188973_0\"><code>6.4.2p2</code> <strong>The <em>switch</em> statement</strong> <code>[stmt.switch]</code></p>\n<blockquote>\n<p id=\"so_24188226_24188973_4\">Any statement within the switch statement can be labeled with one or more case labels as follows:</p>\n<p id=\"so_24188226_24188973_5\">case constant-expression :</p>\n<p id=\"so_24188226_24188973_6\">where the <em>constant-expression</em> shall be a converted constant expression (5.19) of the promoted type of the switch condition.</p>\n</blockquote>\n</blockquote>\n<p>Since <code>y</code> is not declared in a <em>constant-expression</em> friendly matter, <code>y.get()</code> isn't usable when specifying the <em>needle</em> for a certain case-label. The <em>member-function</em> is <em>constexpr</em>, but the instance of <code>Test</code> isn't, which renders the usage of <code>Test::get</code> as a <em>non-constant expression</em>.</p>\n<hr>\n<h3>Solution</h3>\n<p>To solve this issue you will need to declare <code>y</code> with the <code>constexpr</code> specifier to enable its usage in the context you are looking for, and I'm guessing you already know how:</p>\n<pre><code>constexpr Test y (4);\n</code></pre>\n</hr>", "LastActivityDate": "2014-06-12T16:04:08.927", "Score": "1", "CreationDate": "2014-06-12T16:04:08.927", "ParentId": "24188226", "CommentCount": "0", "OwnerUserId": "1090079"}, "bq_ids": {"n4140": {"so_24188226_24188973_6": {"length": 8, "quality": 0.8, "section_id": 3890}, "so_24188226_24188973_4": {"length": 11, "quality": 0.9166666666666666, "section_id": 3890}, "so_24188226_24188973_1": {"length": 11, "quality": 0.9166666666666666, "section_id": 3890}, "so_24188226_24188973_3": {"length": 8, "quality": 0.8, "section_id": 3890}}, "n3337": {"so_24188226_24188973_3": {"length": 9, "quality": 0.9, "section_id": 3750}, "so_24188226_24188973_6": {"length": 9, "quality": 0.9, "section_id": 3750}, "so_24188226_24188973_1": {"length": 11, "quality": 0.9166666666666666, "section_id": 3750}, "so_24188226_24188973_4": {"length": 11, "quality": 0.9166666666666666, "section_id": 3750}}, "n4659": {"so_24188226_24188973_3": {"length": 8, "quality": 0.8, "section_id": 4776}, "so_24188226_24188973_6": {"length": 8, "quality": 0.8, "section_id": 4776}, "so_24188226_24188973_1": {"length": 11, "quality": 0.9166666666666666, "section_id": 4776}, "so_24188226_24188973_4": {"length": 11, "quality": 0.9166666666666666, "section_id": 4776}}}, "24188784": {"Id": "24188784", "PostTypeId": "2", "Body": "<p>Declare <code>y</code> as a constant expression:</p>\n<pre><code>constexpr Test y = Test(4);\n</code></pre>\n<p><a href=\"http://ideone.com/5QsT2A\" rel=\"nofollow\">Demo</a></p>\n<p><strong>Reason:</strong></p>\n<p>Although, <code>Test::get()</code> is declared <code>constexpr</code> object <code>y</code> is not.</p>\n", "LastEditorUserId": "241631", "LastActivityDate": "2014-06-12T16:54:59.383", "Score": "4", "CreationDate": "2014-06-12T15:53:59.130", "ParentId": "24188226", "CommentCount": "0", "LastEditDate": "2014-06-12T16:54:59.383", "OwnerUserId": "2352671"}, "24188226": {"ViewCount": "192", "Body": "<p>Why I can use constexp non-member function in switch, but when I use member function compiler is saying: \"the value of \u2018y\u2019 is not usable in a constant expression\"?</p>\n<pre><code>class Test {\npublic:\n    constexpr Test(int i) : i(i) { }\n    constexpr int get() {return i;};\nprivate:\n    int i;\n};\n\nconstexpr int test()\n{\n    return 1;\n}\n\nint main() {\n    int x = 0;\n\n    Test y = Test(4);\n\n    switch (x) {\n    case test(): // this is OK\n            break;\n    case y.get(): // not working\n        break;\n    }\n}\n</code></pre>\n", "AcceptedAnswerId": "24188784", "Title": "using constexp member function in switch", "CreationDate": "2014-06-12T15:25:41.740", "Id": "24188226", "CommentCount": "0", "FavoriteCount": "1", "PostTypeId": "1", "LastEditDate": "2014-06-12T20:41:32.033", "LastEditorUserId": "1090079", "LastActivityDate": "2014-06-12T20:41:32.033", "Score": "3", "OwnerUserId": "1557025", "Tags": "<c++><c++11><constexpr>", "AnswerCount": "2"}});