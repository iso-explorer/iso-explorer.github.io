post_cb({"47876130": {"ParentId": "47876022", "LastActivityDate": "2017-12-18T20:43:10.130", "OwnerUserId": "2069064", "Id": "47876130", "CreationDate": "2017-12-18T20:43:10.130", "Body": "<p>No, very explicitly. From <a href=\"http://eel.is/c++draft/variant#variant-1\" rel=\"noreferrer\">[variant.variant]</a>:</p>\n<blockquote>\n<p id=\"so_47876022_47876130_0\">Any instance of <code>variant</code> at any given time either holds a value of one of its alternative types, or it holds no value. When an instance of <code>variant</code> holds a value of alternative type <code>T</code>, it means that a value of type <code>T</code>, referred to as the variant object's <em>contained</em> value, is allocated within the storage of the <code>variant</code> object. <strong>Implementations are not permitted to use additional storage, such as dynamic memory, to allocate the contained value.</strong> The contained value shall be allocated in a region of the <code>variant</code> storage suitably aligned for all types in <code>Types...</code>. It is implementation-defined whether over-aligned types are supported.</p>\n</blockquote>\n", "PostTypeId": "2", "CommentCount": "6", "Score": "18"}, "47876022": {"Tags": "<c++><dynamic-memory-allocation><c++17><variant>", "ViewCount": "591", "LastEditDate": "2017-12-18T21:02:44.663", "AnswerCount": "2", "FavoriteCount": "2", "Title": "Is std::variant allowed to allocate memory for its members?", "CommentCount": "1", "LastEditorUserId": "430766", "AcceptedAnswerId": "47876130", "Score": "15", "CreationDate": "2017-12-18T20:36:01.367", "Id": "47876022", "LastActivityDate": "2017-12-18T21:02:44.663", "Body": "<p>I was wondering if an implementation of <code>std::variant</code> must necessarily be \"flat\" or whether it is allowed to dynamically allocate memory for its members, such that a sequence of variants would degenerate to a sequence of pointers, thereby destroying cache locality.</p>\n", "PostTypeId": "1", "OwnerUserId": "430766"}, "47876023": {"ParentId": "47876022", "LastActivityDate": "2017-12-18T20:36:01.367", "OwnerUserId": "430766", "Id": "47876023", "CreationDate": "2017-12-18T20:36:01.367", "Body": "<p>According to <a href=\"http://en.cppreference.com/w/cpp/utility/variant\" rel=\"noreferrer\">cppreference</a> <code>::std::variant</code> must not allocate dynamic memory.</p>\n<blockquote>\n<p id=\"so_47876022_47876023_0\">As with unions, if a variant holds a value of some object type T, <strong>the\n  object representation of T is allocated directly within the object\n  representation of the variant itself. Variant is not allowed to\n  allocate additional (dynamic) memory.</strong></p>\n</blockquote>\n", "PostTypeId": "2", "CommentCount": "7", "Score": "5"}, "bq_ids": {"n4659": {"so_47876022_47876130_0": {"length": 58, "section_id": 5177, "quality": 0.9354838709677419}}}});