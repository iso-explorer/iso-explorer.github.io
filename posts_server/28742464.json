post_cb({"28742464": {"ViewCount": "135", "Body": "<p>I'm trying to brush-up my programming skills. Below program's output is \n'<strong>I'm in else if 1</strong>'. \nI would like to know the reason behind, why the x value is not initialized to 2 instead it is showing 1. </p>\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n   if (false)\n   {\n      cout &lt;&lt; \"I'm in if \" &lt;&lt; endl;\n   }\n   else if (int x=2 &amp;&amp; true)\n   {\n      cout &lt;&lt; \"I'm in else if \" &lt;&lt; x &lt;&lt; endl;\n   }\n   else\n   {\n      int y = x;\n      cout &lt;&lt; y &lt;&lt; endl;\n   }\n\n   return 0;\n}\n</code></pre>\n", "AcceptedAnswerId": "28742510", "Title": "Can anyone explain why the x is displaying value 1 instead 2", "CreationDate": "2015-02-26T12:27:02.170", "Id": "28742464", "CommentCount": "6", "LastEditDate": "2015-02-26T12:50:56.237", "PostTypeId": "1", "LastEditorUserId": "2684539", "LastActivityDate": "2015-03-04T15:38:06.823", "Score": "3", "OwnerUserId": "4209573", "Tags": "<c++><operator-precedence>", "AnswerCount": "4"}, "bq_ids": {"n4140": {"so_28742464_28742521_2": {"length": 7, "quality": 1.0, "section_id": 3882}, "so_28742464_28742521_1": {"length": 7, "quality": 1.0, "section_id": 3882}}, "n3337": {"so_28742464_28742521_2": {"length": 7, "quality": 1.0, "section_id": 3742}, "so_28742464_28742521_1": {"length": 7, "quality": 1.0, "section_id": 3742}}, "n4659": {"so_28742464_28742521_2": {"length": 7, "quality": 1.0, "section_id": 4771}, "so_28742464_28742521_1": {"length": 7, "quality": 1.0, "section_id": 4771}}}, "28742510": {"Id": "28742510", "PostTypeId": "2", "Body": "<p>According to operator precedence,</p>\n<pre><code>if (int x=2 &amp;&amp; true)\n</code></pre>\n<p>is parsed as</p>\n<pre><code>if (int x = (2 &amp;&amp; true))\n</code></pre>\n<p>so <code>x = true</code> so <code>1</code>.</p>\n", "LastEditorUserId": "2684539", "LastActivityDate": "2015-02-26T12:36:08.193", "Score": "8", "CreationDate": "2015-02-26T12:29:31.487", "ParentId": "28742464", "CommentCount": "7", "OwnerUserId": "2684539", "LastEditDate": "2015-02-26T12:36:08.193"}, "28742521": {"Id": "28742521", "PostTypeId": "2", "Body": "<h3>Introduction</h3>\n<p>This boils down to the grammar involved when writing a <em>selection statment</em>, which is what <code>if</code> really is.</p>\n<p>By reading the relevant section of the standard we find the following:</p>\n<blockquote>\n<p id=\"so_28742464_28742521_0\"><code>6.4p1</code> <strong>Selection statements</strong> <code>[stmt.select]</code></p>\n<blockquote>\n<p id=\"so_28742464_28742521_2\">Selection statements choose one of several flows of control\n    </p>\n<pre><code>selection-statement:\n  if ( condition ) statement\n  if ( condition ) statement else statement\n  switch ( condition ) statement\n\ncondition:\n  expression\n  [...] decl-specifier-seq declarator = initializer-clause\n  [...] decl-specifier-seq declarator braced-init-list\n</code></pre>\n</blockquote>\n</blockquote>\n<hr>\n<h3>What does this mean?</h3>\n<p>When the compiler sees <code>if (int x=2 &amp;&amp; true)</code> it will parse <code>2 &amp;&amp; true</code> as the <em>initializer</em> for the name introduced by the declaration (<code>int x =</code>).</p>\n<p><br/></p>\n<p><sup><strong>Theoretical snippet</strong><br/></sup>\nYour snippet is, semantically, equivalent to the below - which undoubtedly explains why <code>x</code> is equal to <code>1</code>.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code> if (false) {\n    cout &lt;&lt; \"I'm in if \" &lt;&lt; endl;\n } else {\n   int x = 2 &amp;&amp; true;\n   if (x) {\n    cout &lt;&lt; \"I'm in else if \" &lt;&lt; x &lt;&lt; endl;\n   }\n }\n</code></pre>\n<p><br/></p>\n<p><sup><strong>Transforming <code>2 &amp;&amp; true</code> to an <code>int</code></strong></sup>\n</p>\n<pre><code>int x = (2 &amp;&amp; true)    =&gt;\nint x = (true &amp;&amp; true) =&gt;\nint x = true           =&gt;\nint x = 1\n</code></pre>\n</hr>", "LastEditorUserId": "1090079", "LastActivityDate": "2015-03-04T15:38:06.823", "Score": "4", "CreationDate": "2015-02-26T12:29:51.213", "ParentId": "28742464", "CommentCount": "0", "OwnerUserId": "1090079", "LastEditDate": "2015-03-04T15:38:06.823"}, "28744729": {"Id": "28744729", "PostTypeId": "2", "Body": "<p>The condition in an <code>if</code> statement can be an expression or declare something, they cannot be combined (an expression cannot declare anything). <code>int x = 2 &amp;&amp; true</code> declares <code>x</code> and initializes it to <code>2 &amp;&amp; true</code> which is <code>true</code> (or 1 when converted to <code>int</code>).</p>\n<p>To do what seems to be intended, <code>x</code> needs to be declared outside the <code>if</code>:</p>\n<pre><code>int x;\nif((x = 2) &amp;&amp; true) { ... }\n</code></pre>\n<p>Note the parens, logical AND has higher precedence than assignment.</p>\n", "LastActivityDate": "2015-02-26T14:15:28.033", "CommentCount": "1", "CreationDate": "2015-02-26T14:15:28.033", "ParentId": "28742464", "Score": "1", "OwnerUserId": "1741125"}, "28743526": {"Id": "28743526", "PostTypeId": "2", "Body": "<p>This part of code:</p>\n<pre><code>int x=2 &amp;&amp; true\n</code></pre>\n<p>works in the following way:</p>\n<ul>\n<li>&amp;&amp; (and) has higher priority than = (assignment)</li>\n<li>because of the &amp;&amp;, 2 is converted to a boolean value</li>\n<li>2 is truey, so 2 is true when it is converted to a boolean</li>\n<li>true &amp;&amp; true is true</li>\n<li>because we assign true to an int variable, it is converted to int</li>\n<li>true as int is 1</li>\n<li>as a result, x is initialized by 1</li>\n</ul>\n<p>Note, that &amp; is bitwise and and &amp;&amp; is boolean and</p>\n", "LastActivityDate": "2015-02-26T13:17:35.117", "CommentCount": "0", "CreationDate": "2015-02-26T13:17:35.117", "ParentId": "28742464", "Score": "0", "OwnerUserId": "436560"}});