post_cb({"bq_ids": {"n4140": {"so_37088979_37095588_0": {"length": 11, "quality": 0.9166666666666666, "section_id": 5520}}, "n3337": {"so_37088979_37095588_0": {"length": 11, "quality": 0.9166666666666666, "section_id": 5306}}, "n4659": {"so_37088979_37095588_0": {"length": 11, "quality": 0.9166666666666666, "section_id": 6955}}}, "37088979": {"ViewCount": "35", "Body": "<p>I use MinGw (i686-4.9.2-win32) and trying to export the class from dll (which is made in visual studio)\nBut I get an error <code>undefined reference to _imp___ZN11ConsoleTestC1E'</code></p>\n<p>BUT function <code>foo()</code> from the same library exported without error..</p>\n<p>Here my code</p>\n<p>testdll.h</p>\n<pre><code>#ifdef CONSOLETEST_EXPORT\n#define CONSOLETEST_API __declspec(dllexport)\n#else\n#define CONSOLETEST_API __declspec(dllimport)\n#endif\n\nextern \"C\" class CONSOLETEST_API ConsoleTest{\npublic:\n     ConsoleTest();\n};\nextern \"C\" void CONSOLETEST_API foo();\n</code></pre>\n<p>testdll.cpp</p>\n<pre><code>#include \"testdll.h\"\nConsoleTest::ConsoleTest(){}\nvoid  foo(){}\n</code></pre>\n<p>And in main.cpp:</p>\n<pre><code> #include \"testdll.h\"\n int main()\n {\n  foo();\n  ConsoleTest* cc = new ConsoleTest();\n }\n</code></pre>\n<p>PS: I tried to create a .a library from .dll :</p>\n<pre><code>pexports testdll.dll | sed \"s/^_//\" &gt; testdll.def\ndlltool -U -d testdll.def -l testdll.a\n</code></pre>\n<p>...but it did not help.</p>\n<p>Thanks in advance for any advice!</p>\n", "Title": "Linker error. MinGW can't export class from MSVS dll", "CreationDate": "2016-05-07T13:11:52.173", "LastActivityDate": "2016-05-08T02:39:22.307", "CommentCount": "2", "LastEditDate": "2016-05-07T13:34:10.090", "PostTypeId": "1", "LastEditorUserId": "4769404", "Id": "37088979", "Score": "0", "OwnerUserId": "4769404", "Tags": "<c++><dll><linker><mingw>", "AnswerCount": "1"}, "37095588": {"Id": "37095588", "PostTypeId": "2", "Body": "<p><code>extern \"C\" class</code> won't work.\nYou can dll-export a class, but not with C naming convention.</p>\n<p>ISO C++03 7.5[dcl.link]/4:</p>\n<blockquote>\n<p id=\"so_37088979_37095588_0\">A C language linkage is ignored for the names of class members and the member function\n  type of class member functions.</p>\n</blockquote>\n<p>If you remove the <code>extern \"C\"</code>, I see no reason it wouldn't work.</p>\n", "LastEditorUserId": "54013", "LastActivityDate": "2016-05-08T02:39:22.307", "Score": "1", "CreationDate": "2016-05-08T02:24:21.230", "ParentId": "37088979", "CommentCount": "1", "OwnerUserId": "54013", "LastEditDate": "2016-05-08T02:39:22.307"}});