post_cb({"5812483": {"CommentCount": "2", "ViewCount": "1294", "PostTypeId": "1", "OwnerDisplayName": "user408141", "CreationDate": "2011-04-28T01:07:27.163", "LastActivityDate": "2011-04-28T02:05:10.333", "LastEditDate": "2011-04-28T01:16:34.367", "AcceptedAnswerId": "5812749", "LastEditorDisplayName": "user408141", "Title": "No target() of boost::function of a member function", "Id": "5812483", "Score": "0", "Body": "<p>I'm trying to get a pointer to a function in this way:</p>\n<pre><code> boost::function&lt;void(float)&gt; Function;\n Function = boost::bind(&amp;myClassType::myMemberFunction, this, _1);\n void(*)(float) finalFunction = *Function.target&lt;void(*)(float)&gt;();\n/* crash becouse Function.target&lt;void(*)(bool)&gt;() is null */\n</code></pre>\n<p>But I can not get the pointer. Where I am wrong?\nDid I do something that is not allowed? </p>\n<p>(I have to pass finalFunction to lua_register.)</p>\n", "Tags": "<c++><boost>", "AnswerCount": "1"}, "5812749": {"ParentId": "5812483", "PostTypeId": "2", "CommentCount": "1", "CreationDate": "2011-04-28T01:55:47.110", "Score": "1", "LastEditorUserId": "-1", "LastEditDate": "2017-05-23T10:33:14.293", "Id": "5812749", "OwnerUserId": "273767", "Body": "<p><code>function::target()</code> is defined (I'm using the C++11 draft, which I think is a bit more clear than <a href=\"http://www.boost.org/doc/libs/1_46_1/doc/html/boost/function_base.html#id403340-bb\" rel=\"nofollow noreferrer\">boost's reference</a>) as follows:</p>\n<p>per C++0x n3290 20.8.11.2.5[func.wrap.func.targ]/3</p>\n<blockquote>\n<p id=\"so_5812483_5812749_0\">Returns: If target_type() == typeid(T) a pointer to the stored function target; otherwise a null pointer.</p>\n</blockquote>\n<p>In your case, <code>T</code> is your type <code>void(*)(float)</code>, but <code>Function.target_type()</code> is not that at all, it is the type of the boost expression used to initialize boost::function.</p>\n<p>So in short, yes, this is not allowed. The workarounds are not obvious, but here's one: <a href=\"https://stackoverflow.com/questions/282372/demote-boostfunction-to-a-plain-function-pointer/3453616#3453616\">demote boost::function to a plain function pointer</a></p>\n", "LastActivityDate": "2011-04-28T02:05:10.333"}, "bq_ids": {"n4140": {"so_5812483_5812749_0": {"section_id": 4685, "quality": 0.9, "length": 9}}, "n3337": {"so_5812483_5812749_0": {"section_id": 4494, "quality": 0.9, "length": 9}}, "n4659": {"so_5812483_5812749_0": {"section_id": 6054, "quality": 0.9, "length": 9}}}});