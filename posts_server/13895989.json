post_cb({"13895989": {"CommentCount": "3", "ViewCount": "307", "PostTypeId": "1", "LastEditorUserId": "1031191", "CreationDate": "2012-12-15T20:38:17.420", "LastActivityDate": "2012-12-15T21:09:04.183", "Title": "Can I create other #define's with a preprocessor function?", "AcceptedAnswerId": "13896036", "LastEditDate": "2012-12-15T21:09:04.183", "Id": "13895989", "Score": "1", "Body": "<p>I know I will be punished after asking this, still I'd like to do something like this:</p>\n<pre><code>#define DEF_CLASS(x) \\ \n  #define CLASS x \\\n  #define CONSTRUCTOR CLASS::CLASS \\\n  #define COPY_CONSTRUCTOR(x) CONSTRUCTOR(const CLASS&amp; x)\n</code></pre>\n<p>That is I'd like to have a \"#define\" function which dynamically defines other \"#defines\".</p>\n<p>I have an IDE which is not capable of refactoring, furthermore I'd like to make constructors, especially copy constructor to stand out due to its special role.<br>\nTherefore I aim to program my c++ class definitions like this:</br></p>\n<pre><code>CONSTRUCTOR(int i):i(i){}\nCOPY_CONSTRUCTOR(other):i(other.i){}\nvoid CLASS::fun1()\n{\n  //...\n}\n</code></pre>\n<p>For that, currently I need to copy&amp;paste three #define lines. I would rather do those automatically. Is there any way to pull this off using the preprocessor?</p>\n", "Tags": "<c++><preprocessor-directive>", "OwnerUserId": "1031191", "AnswerCount": "2"}, "13896077": {"ParentId": "13895989", "CommentCount": "0", "Body": "<p>No -- \u00a716.3.4/3: </p>\n<blockquote>\n<p id=\"so_13895989_13896077_0\">The resulting completely macro-replaced preprocessing token sequence is not processed as a preprocessing directive even if it resembles one [...]</p>\n</blockquote>\n", "OwnerUserId": "179910", "PostTypeId": "2", "Id": "13896077", "Score": "2", "CreationDate": "2012-12-15T20:50:01.017", "LastActivityDate": "2012-12-15T20:50:01.017"}, "13896036": {"ParentId": "13895989", "PostTypeId": "2", "CommentCount": "4", "Body": "<p>No, such a <code>DEF_CLASS(x)</code> macro is not possible. Macros aren't stateful. The best you can do is:</p>\n<pre><code>#define CONSTRUCTOR CLASS::CLASS\n#define COPY_CONSTRUCTOR(x) CONSTRUCTOR(const CLASS&amp; x)\n\n...\n\n#define CLASS X\n    CONSTRUCTOR(int i):i(i){}\n    COPY_CONSTRUCTOR(other):i(other.i){}\n    void CLASS::fun1()\n    {\n      //...\n    }\n#undef CLASS\n\n#define CLASS Y\n    CONSTRUCTOR(int i):i(i){}\n    COPY_CONSTRUCTOR(other):i(other.i){}\n    void CLASS::fun1()\n    {\n      //...\n    }\n#undef CLASS\n</code></pre>\n<p>But I <strong>strongly</strong> urge you not to abuse the preprocessor like this. Why obfuscate the normal C++ syntax with these macros? Accept C++ for what it is; don't try to make it into a different, friendlier language.</p>\n", "OwnerUserId": "68587", "LastEditorUserId": "68587", "LastEditDate": "2012-12-15T20:58:05.630", "Id": "13896036", "Score": "1", "CreationDate": "2012-12-15T20:44:31.530", "LastActivityDate": "2012-12-15T20:58:05.630"}, "bq_ids": {"n4140": {"so_13895989_13896077_0": {"section_id": 532, "quality": 0.9230769230769231, "length": 12}}, "n3337": {"so_13895989_13896077_0": {"section_id": 523, "quality": 0.9230769230769231, "length": 12}}, "n4659": {"so_13895989_13896077_0": {"section_id": 553, "quality": 0.9230769230769231, "length": 12}}}});