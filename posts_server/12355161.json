post_cb({"12355161": {"CommentCount": "2", "ViewCount": "117", "CreationDate": "2012-09-10T15:49:35.980", "LastActivityDate": "2012-09-10T16:15:44.877", "Title": "Unnamed struct in Comeau compiler", "PostTypeId": "1", "Id": "12355161", "Score": "2", "Body": "<p>Why we can't use something like this</p>\n<pre><code>struct\n{\n    int bar;\n} Foo;\n\nint main() {}\n</code></pre>\n<p>in Comeau compiler in C++ mode, while in C mode we can?</p>\n<blockquote>\n<p id=\"so_12355161_12355161_0\">\"ComeauTest.c\", line 4: error: use of a type with no linkage to\n  declare a variable\n            with linkage   } Foo;\n      ^</p>\n</blockquote>\n", "Tags": "<c++><c>", "OwnerUserId": "1608835", "AnswerCount": "1"}, "12355267": {"ParentId": "12355161", "PostTypeId": "2", "CommentCount": "3", "Body": "<p>Per 3.5:8,</p>\n<blockquote>\n<p id=\"so_12355161_12355267_0\">A type without linkage shall not be used as the type of a variable or function with external linkage unless <br/>\n  \u2014 the entity has C language linkage (7.5), or <br/>\n  \u2014 the entity is declared within an unnamed namespace (7.3.1), or <br/>\n  \u2014 the entity is not odr-used (3.2) or is de\ufb01ned in the same translation unit.</p>\n</blockquote>\n<p>Note that this is relaxed from C++98, which has (in 3.5:8):</p>\n<blockquote>\n<p id=\"so_12355161_12355267_1\">A name with no linkage [...] shall not be used to declare an entity with linkage.</p>\n</blockquote>\n<p>The reason for this rule is that in order to refer to the variable from another translation unit you would need to know its type, which is not possible for an unnamed type.  In practice, this is because variables with external linkage are <em>mangled</em> with their type to generate an unambiguous name, which is not possible for an unnamed type.</p>\n<p>However, in your code the entity <code>Foo</code> (arguably) is not odr-used, and most definitely is defined, so it should be accepted by a conforming C++11 compiler, which Comeau is not.</p>\n", "OwnerUserId": "567292", "LastEditorUserId": "567292", "LastEditDate": "2012-09-10T16:15:44.877", "Id": "12355267", "Score": "4", "CreationDate": "2012-09-10T15:57:10.413", "LastActivityDate": "2012-09-10T16:15:44.877"}, "bq_ids": {"n4140": {"so_12355161_12355267_1": {"section_id": 5522, "quality": 0.8, "length": 4}, "so_12355161_12355267_0": {"section_id": 7141, "quality": 0.9090909090909091, "length": 20}}, "n3337": {"so_12355161_12355267_1": {"section_id": 5308, "quality": 0.8, "length": 4}, "so_12355161_12355267_0": {"section_id": 6885, "quality": 0.9090909090909091, "length": 20}}, "n4659": {"so_12355161_12355267_1": {"section_id": 6957, "quality": 0.8, "length": 4}, "so_12355161_12355267_0": {"section_id": 8642, "quality": 0.9090909090909091, "length": 20}}}});