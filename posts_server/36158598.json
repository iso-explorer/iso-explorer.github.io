post_cb({"36158775": {"ParentId": "36158598", "CommentCount": "0", "Body": "<p>From 5.2.10/10 (<code>reinterpret_cast</code>) we learn:</p>\n<blockquote>\n<p id=\"so_36158598_36158775_0\">A prvalue of type \u201cpointer to member of X of type T1\u201d can be\n  explicitly converted to a prvalue of a different type \u201cpointer to\n  member of Y of type T2\u201d if T1 and T2 are both function types or both\n  object types.71 The null member pointer value (4.11) is converted to\n  the null member pointer value of the destination type. The result of\n  this conversion is unspecified, except in the following cases:</p>\n<ul>\n<li>converting a prvalue of type \u201cpointer to member function\u201d to a\n  different pointer to member function type and back to its original\n  type yields the original pointer to member value.</li>\n</ul>\n</blockquote>\n<p>In this case you're casting to and from pointer-to-member-function (both point to functions), so it looks like it's totally legal.</p>\n", "OwnerUserId": "251738", "PostTypeId": "2", "Id": "36158775", "Score": "3", "CreationDate": "2016-03-22T15:37:32.277", "LastActivityDate": "2016-03-22T15:37:32.277"}, "36158745": {"ParentId": "36158598", "CommentCount": "11", "Body": "<p>5.4 [expr.cast] says that you can use <code>reinterpret_cast</code> to convert a pointer-to-member-of-derived to a pointer-to-member-of-base and back. Of course, you have to convert back to the derived type in order to use the pointer, since there is no guarantee that the function it points to is actually a member of the base.</p>\n", "OwnerUserId": "1593860", "PostTypeId": "2", "Id": "36158745", "Score": "-1", "CreationDate": "2016-03-22T15:36:29.340", "LastActivityDate": "2016-03-22T15:36:29.340"}, "36158740": {"ParentId": "36158598", "PostTypeId": "2", "CommentCount": "0", "Body": "<p>I believe, yes. Here is what I find in standard (5.2.10):</p>\n<blockquote>\n<p id=\"so_36158598_36158740_0\">A prvalue of type \u201cpointer to member of X of type T1\u201d can be\n  explicitly converted to a prvalue of a different type \u201cpointer to\n  member of Y of type T2\u201d if T1 and T2 are both function types or both\n  object types. The null member pointer value (4.11) is converted to\n  the null member pointer value of the destination type. The result of\n  this conversion is unspecified, except in the following cases:<br/></p>\n<p id=\"so_36158598_36158740_1\">\u2014 converting a prvalue of type \u201cpointer to member function\u201d to a\n  different pointer to member function type and back to its original\n  type yields the original pointer to member value.<br/></p>\n<p id=\"so_36158598_36158740_2\">\u2014 converting a prvalue of type \u201cpointer to data member of X of type T1\u201d to the type\n  \u201cpointer to data member of Y of type T2\u201d (where the alignment\n  requirements of T2 are no stricter than those of T1) and back to its\n  original type yields the original pointer to member value.</p>\n</blockquote>\n", "OwnerUserId": "5245033", "LastEditorUserId": "3545273", "LastEditDate": "2016-03-22T15:45:37.157", "Id": "36158740", "Score": "3", "CreationDate": "2016-03-22T15:36:12.160", "LastActivityDate": "2016-03-22T15:45:37.157"}, "36158598": {"CommentCount": "0", "AcceptedAnswerId": "36158775", "CreationDate": "2016-03-22T15:29:44.940", "LastActivityDate": "2016-03-22T15:45:37.157", "PostTypeId": "1", "ViewCount": "57", "FavoriteCount": "1", "Title": "Is it safe to cast a member function pointer to one of another class and back again?", "Id": "36158598", "Score": "1", "Body": "<p>Reading the answer to this question (<a href=\"https://stackoverflow.com/questions/559581/casting-a-function-pointer-to-another-type\">Casting a function pointer to another type</a>), I understand that it is safe to cast pointers like <code>void(*)(A*)</code> to pointers like <code>void(*)(B*)</code>, you just need to cast them back before calling them.</p>\n<p>Does this also work for member function pointers? Can I safely cast <code>void(A::*)()</code> to <code>void(B::*)()</code> and cast it back before calling it?</p>\n<p>Example code that seems to work at least on my system:</p>\n<pre><code>#include &lt;iostream&gt;\n\nstruct A {\n  void f() { std::cout &lt;&lt; \"called\" &lt;&lt; std::endl; }\n};\n\nstruct B {};\n\nint main() {\n  A instance;\n  auto ptr = reinterpret_cast&lt;void (B::*)()&gt;(&amp;A::f);\n  (instance.*(reinterpret_cast&lt;void (A::*)()&gt;(ptr)))();\n}\n</code></pre>\n", "Tags": "<c++><pointers><casting>", "OwnerUserId": "3684240", "AnswerCount": "3"}, "bq_ids": {"n4140": {"so_36158598_36158740_2": {"section_id": 6049, "quality": 1.0, "length": 27}, "so_36158598_36158775_0": {"section_id": 6049, "quality": 0.9, "length": 36}, "so_36158598_36158740_1": {"section_id": 6049, "quality": 1.0, "length": 20}, "so_36158598_36158740_0": {"section_id": 6049, "quality": 0.925, "length": 37}}, "n3337": {"so_36158598_36158740_2": {"section_id": 5817, "quality": 1.0, "length": 27}, "so_36158598_36158775_0": {"section_id": 5817, "quality": 0.9, "length": 36}, "so_36158598_36158740_1": {"section_id": 5817, "quality": 1.0, "length": 20}, "so_36158598_36158740_0": {"section_id": 5817, "quality": 0.925, "length": 37}}, "n4659": {"so_36158598_36158740_2": {"section_id": 7548, "quality": 1.0, "length": 27}, "so_36158598_36158740_1": {"section_id": 7548, "quality": 1.0, "length": 20}, "so_36158598_36158775_0": {"section_id": 7548, "quality": 0.9, "length": 36}, "so_36158598_36158740_0": {"section_id": 7548, "quality": 0.925, "length": 37}}}});