post_cb({"41238470": {"CommentCount": "1", "ViewCount": "58", "CreationDate": "2016-12-20T09:08:50.917", "LastActivityDate": "2016-12-20T09:22:25.420", "Title": "Define variable template in a class template", "AcceptedAnswerId": "41238734", "PostTypeId": "1", "Id": "41238470", "Score": "0", "Body": "<p>Consider this minimal example:</p>\n<pre><code>template&lt;class X&gt; struct foo;\n\ntemplate&lt;&gt;\nstruct foo&lt;int&gt;\n{\n    template&lt;class = void&gt;\n    static constexpr int x = 0;\n};\n\ntemplate&lt;class T&gt;\nconstexpr int foo&lt;int&gt;::x&lt;T&gt;;\n</code></pre>\n<p>The last two lines are needed because otherwise we will get an undefined reference when the variable <code>x</code> is ODR-used.</p>\n<p>While gcc (6.2.1) is happy to compile this code, clang (3.9.0) fails on the last line with this cryptic message:</p>\n<blockquote>\n<p id=\"so_41238470_41238470_0\">error: variable template partial specialization does not specialize\n  any template argument; to define the primary template, remove the\n  template argument list</p>\n</blockquote>\n<p>Which one is the correct behavior?</p>\n", "Tags": "<c++><gcc><clang><c++14>", "OwnerUserId": "666785", "AnswerCount": "1"}, "41238734": {"ParentId": "41238470", "CommentCount": "0", "Body": "<p>The last 2 lines of code should be:</p>\n<pre><code>template&lt;class T&gt;\nconst int foo&lt;int&gt;::x;\n</code></pre>\n<p>or</p>\n<pre><code>template&lt;class T&gt;\nconstexpr int foo&lt;int&gt;::x;\n</code></pre>\n<p>likes <a href=\"http://melpon.org/wandbox/permlink/UKJeuCYC6rla2BCa\" rel=\"nofollow noreferrer\">this</a></p>\n", "OwnerUserId": "4115625", "PostTypeId": "2", "Id": "41238734", "Score": "4", "CreationDate": "2016-12-20T09:22:25.420", "LastActivityDate": "2016-12-20T09:22:25.420"}, "bq_ids": {"n4140": {"so_41238470_41238470_0": {"section_id": 142, "quality": 0.625, "length": 10}}, "n3337": {"so_41238470_41238470_0": {"section_id": 136, "quality": 0.625, "length": 10}}, "n4659": {"so_41238470_41238470_0": {"section_id": 142, "quality": 0.5625, "length": 9}}}});