post_cb({"29924617": {"ViewCount": "105", "Body": "<p>The above code doesn't work. Indeed the default constructed object <code>f</code> in the constructor of <code>Foo</code> complains that the value <code>val</code> is not declared in the scope. I don't understand why it is not declared. </p>\n<pre><code>struct Foo2\n{\n  Foo2(int val)\n  {}\n};\n\nstruct Foo\n{\n  Foo(int val, Foo2 f = Foo2(val))\n  {}\n};\n\nint main()\n{\n  Foo f(1);\n  return 0;\n}\n</code></pre>\n", "AcceptedAnswerId": "29924809", "Title": "Not declared variable in default-constructed object in constructor", "CreationDate": "2015-04-28T16:13:42.280", "Id": "29924617", "CommentCount": "2", "PostTypeId": "1", "LastActivityDate": "2015-04-28T16:30:49.960", "Score": "6", "OwnerUserId": "3707656", "Tags": "<c++><constructor><default-constructor>", "AnswerCount": "4"}, "29924726": {"Id": "29924726", "PostTypeId": "2", "Body": "<p>That's just how the language works; default arguments can't depend on other parameters, since the order of their initialisation is left unspecified.</p>\n<p>In C++11 or later, you can work around this with an overload:</p>\n<pre><code>Foo(int val) : Foo(val, Foo2(val)) {}\n</code></pre>\n", "LastEditorUserId": "204847", "LastActivityDate": "2015-04-28T16:22:48.143", "Score": "2", "CreationDate": "2015-04-28T16:19:40.523", "ParentId": "29924617", "CommentCount": "4", "LastEditDate": "2015-04-28T16:22:48.143", "OwnerUserId": "204847"}, "bq_ids": {"n4140": {"so_29924617_29924809_0": {"length": 31, "quality": 0.9117647058823529, "section_id": 3260}}, "n3337": {"so_29924617_29924809_0": {"length": 33, "quality": 0.9705882352941176, "section_id": 3132}}, "n4659": {"so_29924617_29924809_0": {"length": 20, "quality": 0.5882352941176471, "section_id": 4018}}}, "29924808": {"Id": "29924808", "PostTypeId": "2", "Body": "<p>You can use templates to solve this:</p>\n<pre><code>struct Foo2\n{\n  Foo2(int val)\n  {}\n};\n\ntemplate &lt;int val&gt;\nstruct Foo\n{\n  Foo(Foo2 f = Foo2(val))\n  {}\n};\n\nint main()\n{\n  Foo&lt;1&gt; f = Foo&lt;1&gt;(); \n  return 0;\n}\n</code></pre>\n", "LastActivityDate": "2015-04-28T16:23:27.773", "Score": "0", "CreationDate": "2015-04-28T16:23:27.773", "ParentId": "29924617", "CommentCount": "2", "OwnerUserId": "919578"}, "29924789": {"Id": "29924789", "PostTypeId": "2", "Body": "<pre><code>struct Foo2\n{\n    int x;\n    Foo2(int val): x(val) {}\n};\n\nstruct Foo\n{\n    int y;\n    Foo2 f2;\n    Foo(int val, Foo2 f): y(val), f2(f) {}\n    Foo(int val): y(val), f2(val) {}\n};\n\nint main()\n{\n    Foo f(1);\n}\n</code></pre>\n", "LastActivityDate": "2015-04-28T16:22:38.377", "Score": "0", "CreationDate": "2015-04-28T16:22:38.377", "ParentId": "29924617", "CommentCount": "1", "OwnerUserId": "2863290"}, "29924809": {"Id": "29924809", "PostTypeId": "2", "Body": "<p>According to the C++ Standard (8.3.6 Default arguments):</p>\n<blockquote>\n<p id=\"so_29924617_29924809_0\">9 Default arguments are evaluated each time the function is called.\n  The order of evaluation of function arguments is unspecified.\n  Consequently, <strong>parameters of a function shall not be used in a\n  default argument</strong>, even if they are not evaluated. Parameters of a\n  function declared before a default argument are in scope and can hide\n  namespace and class member names.</p>\n</blockquote>\n<p>In any C++ (not only C++ 2014) you can overload the constructor. For example</p>\n<pre><code>struct Foo\n{\n  Foo(int val )\n  { Foo2 f(val); /*...*/ }\n  Foo(int val, Foo2 f )\n  {}\n};\n</code></pre>\n<p>Or you can use a delegating constructor (if your compiler supports the new Standard)</p>\n<pre><code>struct Foo\n{\n  Foo(int val ) : Foo( val, Foo2( val ) )\n  {}\n  Foo(int val, Foo2 f )\n  {}\n};\n</code></pre>\n", "LastEditorUserId": "2877241", "LastActivityDate": "2015-04-28T16:30:49.960", "Score": "5", "CreationDate": "2015-04-28T16:23:30.640", "ParentId": "29924617", "CommentCount": "0", "LastEditDate": "2015-04-28T16:30:49.960", "OwnerUserId": "2877241"}});