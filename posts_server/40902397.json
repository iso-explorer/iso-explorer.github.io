post_cb({"40902471": {"ParentId": "40902397", "CommentCount": "0", "Body": "<p>That exam question was a very bad question.</p>\n<p>The actual type of the expression <code>x[5]</code> has no bearance on whether or not the actual operation is \"illegal\", whatever that means.</p>\n<p>The proper term is whether the operation is undefined behavior, or not.</p>\n<p>However, whether the operation is or is not undefined behavior, the expression <code>x[5]</code> has a well-defined type, which is <code>float</code>.</p>\n<p>To be a bit nitpicky: the answer is \"the type of the expression <code>x[5]</code> is float\". Whether or not the operation is \"illegal\", loosely speaking, cannot be determined, since the loose description of <code>x</code> being merely \"a pointer to float\" can be interpreted in a few different ways.</p>\n", "OwnerUserId": "3943312", "PostTypeId": "2", "Id": "40902471", "Score": "2", "CreationDate": "2016-12-01T04:07:00.057", "LastActivityDate": "2016-12-01T04:07:00.057"}, "40902500": {"ParentId": "40902397", "CommentCount": "0", "Body": "<blockquote>\n<p id=\"so_40902397_40902500_0\">If x is a pointer to a float what is the type of x[5] or is the operation illegal?</p>\n</blockquote>\n<ul>\n<li><p>If nothing else provided, the operation of <code>x[5]</code> is illegal, the type of <code>x[5]</code> is still well-defined <code>float</code></p></li>\n<li><p>If x is actually a pointer to an element of an array of float, given that there're more than 5 more elements after that element in that array, <code>x[5]</code> is legal. e.g:</p>\n<pre><code>float a[10] = { 0.0 };\nfloat *x = a;\nx[5] = 1.0; // legal\nx = a + 4; // x point to the 5th element of a\nx[5] = 0; // legal\nx = a + 5;\nx[5] = 0; // illegal\nfloat t = 0;\nx = &amp;t; x[5] = 0; // illegal\n</code></pre></li>\n</ul>\n<p>In all above example, type of <code>x[5]</code> is well-defined as float. Because of <a href=\"http://eel.is/c++draft/expr.sub#1\" rel=\"nofollow noreferrer\"><code>[expr.sub]</code></a> (emphasised is mine):</p>\n<blockquote>\n<p id=\"so_40902397_40902500_1\">A postfix expression followed by an expression in square brackets is a postfix expression. One of the expressions shall be a glvalue of type \u201carray of T\u201d or a prvalue of type \u201cpointer to T\u201d and the other shall be a prvalue of unscoped enumeration or integral type. The result is of type \u201cT\u201d. The type \u201cT\u201d shall be a completely-defined object type.66 <strong>The expression E1[E2] is identical (by definition) to *((E1)+(E2))</strong> [ Note: see [expr.unary] and [expr.add] for details of * and + and [dcl.array] for details of arrays.  \u2014 end note ], except that in the case of an array operand, the result is an lvalue if that operand is an lvalue and an xvalue otherwise. The expression E1 is sequenced before the expression E2.</p>\n</blockquote>\n", "OwnerUserId": "4115625", "PostTypeId": "2", "Id": "40902500", "Score": "2", "CreationDate": "2016-12-01T04:10:15.020", "LastActivityDate": "2016-12-01T04:10:15.020"}, "40902397": {"CommentCount": "3", "ViewCount": "61", "CreationDate": "2016-12-01T03:58:13.933", "LastActivityDate": "2016-12-01T04:10:15.020", "Title": "How does getting the index of a pointer work in c++?", "PostTypeId": "1", "Id": "40902397", "Score": "1", "Body": "<p>In a recent exam I had a question along the lines of</p>\n<p>If x is a pointer to a float what is the type of x[5] or is the operation illegal?  </p>\n<p>The correct answer to this question was \"float.\" I tested the following code</p>\n<pre><code>float test = 3.3;\nfloat* test2 = &amp;test;\nstd::cout&lt;&lt; test2[2];\n</code></pre>\n<p>and saw that the answer was indeed a float. I am confused as to why this happens and would appreciate an explanation as I could not find one in the lecture notes. </p>\n", "Tags": "<c++>", "OwnerUserId": "7011781", "AnswerCount": "3"}, "bq_ids": {"n4140": {"so_40902397_40902500_1": {"section_id": 5986, "quality": 0.6885245901639344, "length": 42}}, "n3337": {"so_40902397_40902500_1": {"section_id": 5754, "quality": 0.5081967213114754, "length": 31}}, "n4659": {"so_40902397_40902500_1": {"section_id": 7486, "quality": 0.819672131147541, "length": 50}}}, "40902422": {"ParentId": "40902397", "CommentCount": "0", "Body": "<blockquote>\n<p id=\"so_40902397_40902422_0\">If x is a pointer to a float what is the type of x[5] or is the operation illegal?</p>\n</blockquote>\n<p>The correct answer is:</p>\n<p>The operation is illegal, the resulting type will be <code>float</code> anyways.</p>\n", "OwnerUserId": "1413395", "PostTypeId": "2", "Id": "40902422", "Score": "3", "CreationDate": "2016-12-01T04:01:07.770", "LastActivityDate": "2016-12-01T04:01:07.770"}});