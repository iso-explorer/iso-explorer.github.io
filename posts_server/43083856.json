post_cb({"bq_ids": {"n4140": {"so_43083856_43083976_0": {"length": 54, "quality": 0.9473684210526315, "section_id": 7156}}, "n3337": {"so_43083856_43083976_0": {"length": 54, "quality": 0.9473684210526315, "section_id": 6900}}, "n4659": {"so_43083856_43083976_0": {"length": 36, "quality": 0.631578947368421, "section_id": 8662}}}, "43083976": {"Id": "43083976", "PostTypeId": "2", "Body": "<p>Yes it does.</p>\n<p>Section [basic.start.term] in the language spec says</p>\n<blockquote>\n<p id=\"so_43083856_43083976_0\">Destructors (12.4) for initialized objects (that is, objects whose lifetime (3.8) has begun) with static storage\n  duration are called as a result of returning from main and as a result of calling std::exit (18.5). Destructors\n  for initialized objects with thread storage duration within a given thread are called as a result of returning\n  from the initial function of that thread and as a result of that thread calling std::exit. The completions\n  of the destructors for all initialized objects with thread storage duration within that thread are sequenced\n  before the initiation of the destructors of any object with static storage duration.</p>\n</blockquote>\n<p>So the thread local variables will be destroyed before the static (global) ones.</p>\n", "LastActivityDate": "2017-03-29T03:51:58.730", "CommentCount": "0", "CreationDate": "2017-03-29T03:51:58.730", "ParentId": "43083856", "Score": "3", "OwnerUserId": "5231607"}, "43083856": {"ViewCount": "59", "Body": "<pre><code>#include &lt;thread&gt;\n\nusing namespace std;\n\nstruct A\n{\n    A() {}\n    ~A() {}\n};\n\nA g_a;\n\nint main()\n{\n    thread([]()\n    {\n         thread_local A tl_a;\n         exit(0);\n    }).detach();\n}\n</code></pre>\n<p><strong>Does the C++ standard guarantee <code>g_a</code> will be destructed after <code>tl_a</code> be destructed?</strong></p>\n", "AcceptedAnswerId": "43083976", "Title": "Are global objects guaranteed to be destructed after all thread-local-storage objects are destructed?", "CreationDate": "2017-03-29T03:40:07.757", "Id": "43083856", "CommentCount": "4", "LastEditDate": "2017-03-29T03:44:58.780", "PostTypeId": "1", "LastEditorUserId": "508343", "LastActivityDate": "2017-03-29T03:51:58.730", "Score": "1", "OwnerUserId": "508343", "Tags": "<c++><multithreading><global-variables><standards><c++1z>", "AnswerCount": "1"}});