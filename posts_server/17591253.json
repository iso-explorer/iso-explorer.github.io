post_cb({"17591253": {"CommentCount": "4", "ViewCount": "71", "PostTypeId": "1", "LastEditorUserId": "1594913", "CreationDate": "2013-07-11T10:40:31.370", "LastActivityDate": "2013-07-11T10:55:22.293", "Title": "pointer being freed was not allocated after removing a string", "AcceptedAnswerId": "17591362", "LastEditDate": "2013-07-11T10:44:26.857", "Id": "17591253", "Score": "0", "Body": "<p>I'm trying to remove a specific word from a text file and then rewrite the remaining values into a new file. I believe that the error arises from the code here:</p>\n<pre><code>string removeWord(string r){\n    ifstream wordBase(\"WordDatabase.txt\");\n    ofstream temp(\"temp.txt\");\n\n    string line = \"\";\n    while(getline(wordBase,line))\n    {\n        if(line != r)\n            temp &lt;&lt; line &lt;&lt; endl;\n    }\n\n    temp.close();\n    wordBase.close();\n    remove(\"WordDatabase.txt\");\n    rename(\"temp.txt\",\"WordDatabase.txt\");\n}\n</code></pre>\n<p>Can someon help me out here? Highly appreciated!</p>\n", "Tags": "<c++><netbeans-7>", "OwnerUserId": "504864", "AnswerCount": "1"}, "17591362": {"ParentId": "17591253", "PostTypeId": "2", "CommentCount": "2", "Body": "<p>The code has undefined behaviour as (pointed out by <a href=\"https://stackoverflow.com/users/1423491/john-sheridan\">John Sheridan</a>) the function <code>removeWord()</code> is not <code>return</code>ing a <code>string</code> <em>but</em> a <code>string</code> as its return type. From section <em>6.6.3 The return statement</em> of the c++11 standard (draft n3337), clause 2:</p>\n<blockquote>\n<p id=\"so_17591253_17591362_0\">...Flowing off the end of a function is equivalent to a return with no value; this results in undefined behavior in a value-returning function.</p>\n</blockquote>\n<p>It is pointless trying to reason about the behaviour of a program that has undefined behaviour but given there is an error in the code related to a <code>string</code> and <code>string</code> is mentioned in the error message this is a probable cause. To correct, change the return type to <code>void</code> or return a <code>string</code>.</p>\n", "OwnerUserId": "1033896", "LastEditorUserId": "-1", "LastEditDate": "2017-05-23T10:32:08.077", "Id": "17591362", "Score": "2", "CreationDate": "2013-07-11T10:46:46.383", "LastActivityDate": "2013-07-11T10:55:22.293"}, "bq_ids": {"n4140": {"so_17591253_17591362_0": {"section_id": 3913, "quality": 1.0, "length": 12}}, "n3337": {"so_17591253_17591362_0": {"section_id": 3773, "quality": 1.0, "length": 12}}, "n4659": {"so_17591253_17591362_0": {"section_id": 4799, "quality": 0.75, "length": 9}}}});