post_cb({"17116124": {"ParentId": "17116040", "PostTypeId": "2", "CommentCount": "1", "Body": "<p>The pointer is safe and valid, and can be used as long as you don't dereference it. It's a fairly common practice to store the ponter value in registry to be used later when it is fully constructed. </p>\n<p>Similar story with passing 'this' that also is subject to warning, that even can be used limiting to the already constructed elements.</p>\n<blockquote>\n<h2>[class.cdtor]/3</h2>\n<p id=\"so_17116040_17116124_0\">To form a pointer to (or access the value of) a\n  direct non-static member of an object obj, the construction of obj\n  shall have started and its destruction shall not have completed,\n  otherwise the computation of the pointer value (or accessing the\n  member value) results in undefined behavior.</p>\n</blockquote>\n", "OwnerUserId": "2422194", "LastEditorUserId": "774651", "LastEditDate": "2013-06-14T20:07:55.317", "Id": "17116124", "Score": "2", "CreationDate": "2013-06-14T19:43:43.893", "LastActivityDate": "2013-06-14T20:07:55.317"}, "17116040": {"CommentCount": "0", "ViewCount": "91", "CreationDate": "2013-06-14T19:37:19.080", "LastActivityDate": "2013-06-14T20:07:55.317", "Title": "Is it safe to use to use pointers to (still) uninitialized members in constructor?", "AcceptedAnswerId": "17116124", "PostTypeId": "1", "Id": "17116040", "Score": "1", "Body": "<p>For example</p>\n<pre><code>//somewhere\nstruct IFace;\n\nstruct Base\n{\n    Base(IFace* iface):\n    f(iface)\n    {\n          //will not use iface here\n    }\nprivate:\n    IFace* f;\n};\n\nstruct Data;\nstruct Implementation\n{\nprivate:\n    friend IFace* factory_create(Data*);\n    Implementation(Data* data): // ok, it's not private, just some internal \n                                // class not mentioned in public headers\n    d(data)\n    {\n        //will not deref data here\n    }\n\nprivate:\n    Data* d;\n};\n\nIFace* factory_create(Data* data)\n{\n    return new Implementation(data);\n}\n\n\n//here\nstruct Derived: Base\n{\n    Derived():\n    Base(factory_create(&amp;data)) //using pointer to uninitialized member\n    {\n        //will fill data here\n    }\n\n    Data data;\n};\n</code></pre>\n<p>Seems I have no chance to create <code>data</code> before passing pointer to it to <code>factory_create</code> function. </p>\n<p><em>Is this code safe? If not, what minimal changes should I do to make it safe?</em></p>\n", "Tags": "<c++><constructor><initialization>", "OwnerUserId": "774651", "AnswerCount": "1"}, "bq_ids": {"n4140": {"so_17116040_17116124_0": {"section_id": 446, "quality": 1.0, "length": 27}}, "n3337": {"so_17116040_17116124_0": {"section_id": 437, "quality": 1.0, "length": 27}}, "n4659": {"so_17116040_17116124_0": {"section_id": 468, "quality": 1.0, "length": 27}}}});