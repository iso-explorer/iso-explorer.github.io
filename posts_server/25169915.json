post_cb({"bq_ids": {"n4140": {"so_25169915_25171213_0": {"length": 18, "quality": 0.8181818181818182, "section_id": 1617}}, "n3337": {"so_25169915_25171213_0": {"length": 18, "quality": 0.8181818181818182, "section_id": 1613}}, "n4659": {"so_25169915_25171213_0": {"length": 18, "quality": 0.8181818181818182, "section_id": 1770}}}, "25171213": {"Id": "25171213", "PostTypeId": "2", "Body": "<p>Yes, the code is legal in C++11 because the storage for <code>std::string</code> is guaranteed to be contiguous and your code avoids overwriting the terminating NULL character (or value initialized <code>CharT</code>).</p>\n<p>From N3337, <em>\u00a721.4.5 [string.access]</em></p>\n<blockquote>\n<pre><code> const_reference operator[](size_type pos) const;\n reference operator[](size_type pos);\n</code></pre>\n<p id=\"so_25169915_25171213_0\"><em>1 Requires:</em> <code>pos &lt;= size()</code>.<br/>\n<em>2 Returns:</em> <code>*(begin() + pos)</code> if <code>pos &lt; size()</code>. Otherwise, returns a reference to an object of type <code>charT</code> with value <code>charT()</code>, where modifying the object leads to undefined behavior.</p>\n</blockquote>\n<p>Your example satisfies the requirements stated above, so the behavior is well defined.</p>\n", "LastActivityDate": "2014-08-06T22:19:55.240", "CommentCount": "2", "CreationDate": "2014-08-06T22:19:55.240", "ParentId": "25169915", "Score": "24", "OwnerUserId": "241631"}, "25169915": {"ViewCount": "7862", "Body": "<pre><code>char hello[] = \"hello world\";\nstd::string str;\nstr.resize(sizeof(hello)-1);\nmemcpy(&amp;str[0], hello, sizeof(hello)-1);\n</code></pre>\n<p>This code is undefined behaviour in C++98. Is it legal in C++11?</p>\n", "AcceptedAnswerId": "25171213", "Title": "Is writing to &str[0] buffer (of a std:string) well-defined behaviour in C++11?", "CreationDate": "2014-08-06T20:48:18.300", "Id": "25169915", "CommentCount": "5", "FavoriteCount": "7", "PostTypeId": "1", "LastEditDate": "2014-08-06T20:54:36.250", "LastEditorUserId": "1708801", "LastActivityDate": "2014-08-06T22:19:55.240", "Score": "27", "OwnerUserId": "1483676", "Tags": "<c++><string><c++11><buffer><language-lawyer>", "AnswerCount": "1"}});