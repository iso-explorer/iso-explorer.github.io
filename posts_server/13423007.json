post_cb({"13423263": {"ParentId": "13423007", "LastEditDate": "2017-05-23T11:59:31.440", "CommentCount": "5", "CreationDate": "2012-11-16T19:38:28.723", "OwnerUserId": "500104", "LastEditorUserId": "-1", "PostTypeId": "2", "Id": "13423263", "Score": "6", "Body": "<p><sup>Note that this answer had a slight rewrite that changed the end result to the opposite of what it was before. Thanks to @<a href=\"https://stackoverflow.com/users/36565/david-rodriguez-dribeas\">David Rodr\u00edguez - dribeas</a> for enlightening me. :)</sup></p>\n<p><strong>This is a bug.</strong> Clang 3.2 trunk and GCC 4.7+ agree too and will zero-initialize the members.</p>\n<p>Time for some standardese. Note that <code>T x{};</code> (or <code>= {}</code>) can be interpreted as either list-initialization <em>or</em> aggregate initialization. <code>A</code> here is not an <em>aggregate</em> because it has private members, and as such can not be initialized by the latter.</p>\n<p><code>\u00a78.5.1 [dcl.init.aggr] p1</code></p>\n<blockquote>\n<p id=\"so_13423007_13423263_0\">An <em>aggregate</em> is an array or a class (Clause 9) with [...] no private or protected non-static data members [...]</p>\n</blockquote>\n<p>This only leaves list-initialization and that will value-initialize both <code>a1</code> and <code>a2</code>.</p>\n<p><code>\u00a78.5.1 [dcl.init.list] p3</code></p>\n<blockquote>\n<p id=\"so_13423007_13423263_1\">List-initialization of an object or reference of type <code>T</code> is defined as follows:</p>\n<ul>\n<li>If the initializer list has no elements and <code>T</code> is a class type with a default constructor, the object is value-initialized.</li>\n</ul>\n</blockquote>\n<p>Value-initialization is specified as follows for our specific case:</p>\n<p><code>\u00a78.5 [dcl.init] p7</code></p>\n<blockquote>\n<p id=\"so_13423007_13423263_2\">if <code>T</code> is a (possibly cv-qualified) non-union class type without a user-provided constructor, then the object is zero-initialized [...]</p>\n</blockquote>\n<p>And this in turn means that the members should be zeroed out.</p>\n", "LastActivityDate": "2012-11-16T20:10:07.990"}, "13423146": {"ParentId": "13423007", "LastEditDate": "2012-11-16T19:54:09.920", "CommentCount": "2", "CreationDate": "2012-11-16T19:28:52.490", "OwnerUserId": "734069", "LastEditorUserId": "500104", "PostTypeId": "2", "Id": "13423146", "Score": "7", "Body": "<p>You mean Microsoft's Community Tech Preview compiler, which they aren't even confident enough in to call it a <em>beta</em>, has <em>bugs</em> in it? ;)</p>\n<p>This is a bug; it should behave as you expect. Please report it as such. </p>\n", "LastActivityDate": "2012-11-16T19:54:09.920"}, "bq_ids": {"n4140": {"so_13423007_13423263_1": {"section_id": 3325, "quality": 1.0, "length": 6}, "so_13423007_13423263_0": {"section_id": 3298, "quality": 0.8888888888888888, "length": 8}, "so_13423007_13423263_2": {"section_id": 3287, "quality": 0.9, "length": 9}}, "n3337": {"so_13423007_13423263_1": {"section_id": 3195, "quality": 1.0, "length": 6}, "so_13423007_13423263_0": {"section_id": 3168, "quality": 0.8888888888888888, "length": 8}, "so_13423007_13423263_2": {"section_id": 3157, "quality": 1.0, "length": 10}}, "n4659": {"so_13423007_13423263_1": {"section_id": 4091, "quality": 1.0, "length": 6}, "so_13423007_13423263_0": {"section_id": 4063, "quality": 0.8888888888888888, "length": 8}, "so_13423007_13423263_2": {"section_id": 4049, "quality": 0.9, "length": 9}}}, "13423007": {"CommentCount": "15", "CreationDate": "2012-11-16T19:19:23.717", "PostTypeId": "1", "AcceptedAnswerId": "13423146", "LastEditorUserId": "500104", "LastActivityDate": "2012-11-16T20:10:07.990", "LastEditDate": "2012-11-16T19:26:17.920", "ViewCount": "163", "FavoriteCount": "0", "Title": "Can list initialization not be used for private members?", "Id": "13423007", "Score": "5", "Body": "<pre><code>struct A\n{\nprivate:\n    int a, b, c;\n};\n\nint main()\n{\n    A a1{};\n    A a2 = {};\n\n    return 0;\n}\n</code></pre>\n<p>The code was compiled by VC++ 2012 (with the latest update \"Nov 2012 CTP\").</p>\n<p>I expect a1 and a2 are zero-initialized, but not. a1 and a2 are not initialized.</p>\n<p>Why?</p>\n", "Tags": "<c++><c++11><list-initialization>", "OwnerUserId": "508343", "AnswerCount": "2"}});