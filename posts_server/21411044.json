post_cb({"21411080": {"ParentId": "21411044", "CommentCount": "2", "Body": "<p>You need </p>\n<pre><code>header.length = cpu_to_le32(sizeof(stDescriptor));\n</code></pre>\n<p>because <code>stDescriptor</code> is a type name, not an expression.</p>\n<h3>5.3.3 Sizeof [expr.sizeof]</h3>\n<blockquote>\n<p id=\"so_21411044_21411080_0\"><strong>1</strong> The <code>sizeof</code> operator yields the number of bytes in the object representation of its operand. The operand is\n  either an expression, which is an unevaluated operand (Clause 5), or a parenthesized type-id. [...]</p>\n</blockquote>\n", "OwnerUserId": "673730", "PostTypeId": "2", "Id": "21411080", "Score": "4", "CreationDate": "2014-01-28T16:20:45.640", "LastActivityDate": "2014-01-28T16:20:45.640"}, "21411044": {"CommentCount": "0", "ViewCount": "226", "PostTypeId": "1", "LastEditorUserId": "1386054", "CreationDate": "2014-01-28T16:19:07.990", "LastActivityDate": "2014-01-28T21:11:52.717", "Title": "Using sizeof a struct in its constructor", "LastEditDate": "2014-01-28T21:11:52.717", "Id": "21411044", "Score": "-1", "Body": "<p>I am trying to initialize a <code>struct</code> in its constructor but I run into a compiler error on the last line when I am initializing the member <code>header.length</code>. Is its size known at the time?</p>\n<p>This is the compiler error and the <code>structure</code>:</p>\n<pre><code>In constructor \u2018stDescriptor::stDescriptor()\u2019:\nerror: expected primary-expression before \u2018)\u2019 token\n\n\nstruct stDescriptor {\n    usb_functionfs_descs_head   header;\n    stDescriptorBody fs_descs;\n    stDescriptorBody hs_descs;\n\n    stDescriptor(){\n        header.fs_count = 3;\n        header.magic = cpu_to_le32(FUNCTIONFS_DESCRIPTORS_MAGIC);\n        header.hs_count = 3;\n            header.length = cpu_to_le32(sizeof stDescriptor);\n         }\n};\n</code></pre>\n", "Tags": "<c++><struct><constructor><sizeof>", "OwnerUserId": "338476", "AnswerCount": "1"}, "bq_ids": {"n4140": {"so_21411044_21411080_0": {"section_id": 6076, "quality": 0.8947368421052632, "length": 17}}, "n3337": {"so_21411044_21411080_0": {"section_id": 5844, "quality": 0.8947368421052632, "length": 17}}, "n4659": {"so_21411044_21411080_0": {"section_id": 7572, "quality": 0.8947368421052632, "length": 17}}}});