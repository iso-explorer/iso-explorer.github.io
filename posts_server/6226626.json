post_cb({"6226673": {"ParentId": "6226626", "CommentCount": "0", "Body": "<p>Your compiler tells you exactly what the problem is, that is <code>Connection</code> is <strong>declared</strong> but not <strong>defined</strong>.</p>\n<p>You have to put the complete definition of your <code>Connection</code> type before your <code>typedef</code>.</p>\n", "OwnerUserId": "279259", "PostTypeId": "2", "Id": "6226673", "Score": "1", "CreationDate": "2011-06-03T11:43:35.030", "LastActivityDate": "2011-06-03T11:43:35.030"}, "6226667": {"ParentId": "6226626", "PostTypeId": "2", "CommentCount": "9", "Body": "<p>You're using incomplete type as type argument to <code>std::list</code> which invokes undefined bevahior according to the C++ Standard.</p>\n<p>\u00a717\u200b.4.3.6/2 says,</p>\n<blockquote>\n<p id=\"so_6226626_6226667_0\">In particular, the effects are <strong>undefined</strong> in the following cases:<br>\n   \u2014 if <strong>an incomplete type</strong> (3.9) is <strong>used as a template argument</strong> when instantiating a template component.</br></p>\n</blockquote>\n<p>So one solution would be using pointer of incomplete type.</p>\n<pre><code>struct Connection;\nstruct User;    \n\ntypedef list&lt;Connection*&gt; Connections; //modified line\ntypedef list&lt;User*&gt; Users;             //modified line\n\nstruct User {\n    Connections::iterator connection;\n};\n\nstruct Connection {\n    Users::iterator user;\n};\n</code></pre>\n<p>This will work because <em>pointer to an incomplete type</em> is a complete type, the compiler can know the size of <em>Connection</em>* which is equal to <code>sizeof(Connection*)</code> even if <code>Connection</code> hasn't been defined yet. </p>\n", "OwnerUserId": "415784", "LastEditorUserId": "415784", "LastEditDate": "2012-04-16T04:42:11.797", "Id": "6226667", "Score": "3", "CreationDate": "2011-06-03T11:42:46.547", "LastActivityDate": "2012-04-16T04:42:11.797"}, "bq_ids": {"n4140": {"so_6226626_6226667_0": {"section_id": 6324, "quality": 1.0, "length": 13}}, "n3337": {"so_6226626_6226667_0": {"section_id": 6081, "quality": 1.0, "length": 13}}, "n4659": {"so_6226626_6226667_0": {"section_id": 7834, "quality": 1.0, "length": 13}}}, "6226626": {"CommentCount": "3", "ViewCount": "1093", "PostTypeId": "1", "LastEditorUserId": "782599", "CreationDate": "2011-06-03T11:37:53.070", "LastActivityDate": "2012-04-16T04:42:11.797", "Title": "C++ stl list two structures cross-reference", "AcceptedAnswerId": "6226667", "LastEditDate": "2011-06-03T11:55:43.740", "Id": "6226626", "Score": "3", "Body": "<p>I have such code with 2 structures:</p>\n<pre><code>#include &lt;list&gt;\n\nusing namespace std;\n\nstruct Connection;\nstruct User;    \n\ntypedef list&lt;Connection&gt; Connections;\ntypedef list&lt;User&gt; Users;\n\nstruct User {\n    Connections::iterator connection;\n};\n\nstruct Connection {\n    Users::iterator user;\n};\n</code></pre>\n<p>But when I try to compile it, the compiler (C++ Builder XE) return me such error - \"<strong>Undefined structure 'Connection'</strong>\".</p>\n<p>Can anyone help me with my problem?</p>\n<p>@ereOn,\n    struct Connection;\n    struct User;\n    struct Connection {\n        Users::iterator user;\n    };\n    typedef list Connections;\n    typedef list Users;</p>\n<pre><code>struct User {\n    Connections::iterator connection;\n};\n</code></pre>\n<p><strong>Undefined structure 'User'</strong></p>\n", "Tags": "<c++><list><stl><struct><cross-reference>", "OwnerUserId": "782599", "AnswerCount": "2"}});