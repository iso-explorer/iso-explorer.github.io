post_cb({"bq_ids": {"n4140": {"so_16582644_16582644_0": {"length": 26, "quality": 0.896551724137931, "section_id": 6092}}, "n3337": {"so_16582644_16582644_0": {"length": 26, "quality": 0.896551724137931, "section_id": 5859}}, "n4659": {"so_16582644_16582644_0": {"length": 26, "quality": 0.896551724137931, "section_id": 7588}}}, "16582699": {"Id": "16582699", "PostTypeId": "2", "Body": "<p>I generally just call <code>operator new</code> directly, but the authors of the standard decided to also allow using <code>new char[]</code> as a means of acquiring raw memory.  Thus the alignment requirement.</p>\n", "LastActivityDate": "2013-05-16T08:38:28.740", "CommentCount": "5", "CreationDate": "2013-05-16T08:38:28.740", "ParentId": "16582644", "Score": "3", "OwnerUserId": "649665"}, "16582644": {"ViewCount": "188", "Body": "<p>According to C++03 Standard, 5.3.4/10</p>\n<blockquote>\n<p id=\"so_16582644_16582644_0\">For arrays of char and unsigned char, the difference between the result of the new-expression and the address returned by the allocation function shall be an integral multiple of the most stringent alignment requirement (3.9) of any object type whose size is no greater than the size of the array being created.</p>\n</blockquote>\n<p>The allocation function (<code>operator new[]()</code>) is also required to allocate memory aligned for any possible type. So the quoted part effectively says that <code>new char[sizeof(T)]</code> should yield memory properly aligned for type <code>T</code>.</p>\n<p>What's the purpose of this requirement? I could just call <code>operator new()</code> (or <code>operator new[]()</code>) which is guaranteed to return properly aligned memory and have the propery aligned memory. I mean anyway <code>new char[]</code> will call <code>operator new()[]</code> so I could just call it myself.</p>\n<p>What's the purpose of the quoted requirement? Why not just call <code>operator new[]()</code> directly?</p>\n", "AcceptedAnswerId": "16582699", "Title": "What's the intent behind C++ Standard requirement that new char[] yields aligned memory?", "CreationDate": "2013-05-16T08:35:25.603", "Id": "16582644", "CommentCount": "0", "FavoriteCount": "1", "PostTypeId": "1", "LastActivityDate": "2013-05-16T08:38:28.740", "Score": "5", "OwnerUserId": "57428", "Tags": "<c++><memory-management>", "AnswerCount": "1"}});